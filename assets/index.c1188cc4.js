var Kp=Object.defineProperty,qp=Object.defineProperties;var Zp=Object.getOwnPropertyDescriptors;var _f=Object.getOwnPropertySymbols;var Jp=Object.prototype.hasOwnProperty,Qp=Object.prototype.propertyIsEnumerable;var yf=(r,e,t)=>e in r?Kp(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Hs=(r,e)=>{for(var t in e||(e={}))Jp.call(e,t)&&yf(r,t,e[t]);if(_f)for(var t of _f(e))Qp.call(e,t)&&yf(r,t,e[t]);return r},mf=(r,e)=>qp(r,Zp(e));const tg=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}};tg();function $l(r,e){const t=Object.create(null),n=r.split(",");for(let i=0;i<n.length;i++)t[n[i]]=!0;return e?i=>!!t[i.toLowerCase()]:i=>!!t[i]}const eg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ng=$l(eg);function Hh(r){return!!r||r===""}function zl(r){if(Lt(r)){const e={};for(let t=0;t<r.length;t++){const n=r[t],i=be(n)?og(n):zl(n);if(i)for(const o in i)e[o]=i[o]}return e}else{if(be(r))return r;if(xe(r))return r}}const rg=/;(?![^(]*\))/g,ig=/:(.+)/;function og(r){const e={};return r.split(rg).forEach(t=>{if(t){const n=t.split(ig);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Vl(r){let e="";if(be(r))e=r;else if(Lt(r))for(let t=0;t<r.length;t++){const n=Vl(r[t]);n&&(e+=n+" ")}else if(xe(r))for(const t in r)r[t]&&(e+=t+" ");return e.trim()}function ag(r,e){if(r.length!==e.length)return!1;let t=!0;for(let n=0;t&&n<r.length;n++)t=Ja(r[n],e[n]);return t}function Ja(r,e){if(r===e)return!0;let t=Tf(r),n=Tf(e);if(t||n)return t&&n?r.getTime()===e.getTime():!1;if(t=wo(r),n=wo(e),t||n)return r===e;if(t=Lt(r),n=Lt(e),t||n)return t&&n?ag(r,e):!1;if(t=xe(r),n=xe(e),t||n){if(!t||!n)return!1;const i=Object.keys(r).length,o=Object.keys(e).length;if(i!==o)return!1;for(const a in r){const l=r.hasOwnProperty(a),u=e.hasOwnProperty(a);if(l&&!u||!l&&u||!Ja(r[a],e[a]))return!1}}return String(r)===String(e)}function sg(r,e){return r.findIndex(t=>Ja(t,e))}const Oi=r=>be(r)?r:r==null?"":Lt(r)||xe(r)&&(r.toString===zh||!jt(r.toString))?JSON.stringify(r,Xh,2):String(r),Xh=(r,e)=>e&&e.__v_isRef?Xh(r,e.value):Pi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,i])=>(t[`${n} =>`]=i,t),{})}:ts(e)?{[`Set(${e.size})`]:[...e.values()]}:xe(e)&&!Lt(e)&&!Vh(e)?String(e):e,le={},Si=[],On=()=>{},lg=()=>!1,ug=/^on[^a-z]/,Qa=r=>ug.test(r),Kl=r=>r.startsWith("onUpdate:"),Be=Object.assign,ql=(r,e)=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)},fg=Object.prototype.hasOwnProperty,$t=(r,e)=>fg.call(r,e),Lt=Array.isArray,Pi=r=>jo(r)==="[object Map]",ts=r=>jo(r)==="[object Set]",Tf=r=>jo(r)==="[object Date]",jt=r=>typeof r=="function",be=r=>typeof r=="string",wo=r=>typeof r=="symbol",xe=r=>r!==null&&typeof r=="object",$h=r=>xe(r)&&jt(r.then)&&jt(r.catch),zh=Object.prototype.toString,jo=r=>zh.call(r),hg=r=>jo(r).slice(8,-1),Vh=r=>jo(r)==="[object Object]",Zl=r=>be(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,Ia=$l(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),es=r=>{const e=Object.create(null);return t=>e[t]||(e[t]=r(t))},cg=/-(\w)/g,kn=es(r=>r.replace(cg,(e,t)=>t?t.toUpperCase():"")),dg=/\B([A-Z])/g,ji=es(r=>r.replace(dg,"-$1").toLowerCase()),ns=es(r=>r.charAt(0).toUpperCase()+r.slice(1)),Xs=es(r=>r?`on${ns(r)}`:""),ba=(r,e)=>!Object.is(r,e),Ra=(r,e)=>{for(let t=0;t<r.length;t++)r[t](e)},Ma=(r,e,t)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value:t})},Kh=r=>{const e=parseFloat(r);return isNaN(e)?r:e};let Ef;const pg=()=>Ef||(Ef=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let bn;class gg{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&bn&&(this.parent=bn,this.index=(bn.scopes||(bn.scopes=[])).push(this)-1)}run(e){if(this.active){const t=bn;try{return bn=this,e()}finally{bn=t}}}on(){bn=this}off(){bn=this.parent}stop(e){if(this.active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function vg(r,e=bn){e&&e.active&&e.effects.push(r)}const Jl=r=>{const e=new Set(r);return e.w=0,e.n=0,e},qh=r=>(r.w&Rr)>0,Zh=r=>(r.n&Rr)>0,_g=({deps:r})=>{if(r.length)for(let e=0;e<r.length;e++)r[e].w|=Rr},yg=r=>{const{deps:e}=r;if(e.length){let t=0;for(let n=0;n<e.length;n++){const i=e[n];qh(i)&&!Zh(i)?i.delete(r):e[t++]=i,i.w&=~Rr,i.n&=~Rr}e.length=t}},cl=new WeakMap;let uo=0,Rr=1;const dl=30;let Cn;const ri=Symbol(""),pl=Symbol("");class Ql{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,vg(this,n)}run(){if(!this.active)return this.fn();let e=Cn,t=xr;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Cn,Cn=this,xr=!0,Rr=1<<++uo,uo<=dl?_g(this):Cf(this),this.fn()}finally{uo<=dl&&yg(this),Rr=1<<--uo,Cn=this.parent,xr=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Cn===this?this.deferStop=!0:this.active&&(Cf(this),this.onStop&&this.onStop(),this.active=!1)}}function Cf(r){const{deps:e}=r;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(r);e.length=0}}let xr=!0;const Jh=[];function Wi(){Jh.push(xr),xr=!1}function Bi(){const r=Jh.pop();xr=r===void 0?!0:r}function an(r,e,t){if(xr&&Cn){let n=cl.get(r);n||cl.set(r,n=new Map);let i=n.get(t);i||n.set(t,i=Jl()),Qh(i)}}function Qh(r,e){let t=!1;uo<=dl?Zh(r)||(r.n|=Rr,t=!qh(r)):t=!r.has(Cn),t&&(r.add(Cn),Cn.deps.push(r))}function rr(r,e,t,n,i,o){const a=cl.get(r);if(!a)return;let l=[];if(e==="clear")l=[...a.values()];else if(t==="length"&&Lt(r))a.forEach((u,h)=>{(h==="length"||h>=n)&&l.push(u)});else switch(t!==void 0&&l.push(a.get(t)),e){case"add":Lt(r)?Zl(t)&&l.push(a.get("length")):(l.push(a.get(ri)),Pi(r)&&l.push(a.get(pl)));break;case"delete":Lt(r)||(l.push(a.get(ri)),Pi(r)&&l.push(a.get(pl)));break;case"set":Pi(r)&&l.push(a.get(ri));break}if(l.length===1)l[0]&&gl(l[0]);else{const u=[];for(const h of l)h&&u.push(...h);gl(Jl(u))}}function gl(r,e){const t=Lt(r)?r:[...r];for(const n of t)n.computed&&xf(n);for(const n of t)n.computed||xf(n)}function xf(r,e){(r!==Cn||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}const mg=$l("__proto__,__v_isRef,__isVue"),tc=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(wo)),Tg=tu(),Eg=tu(!1,!0),Cg=tu(!0),wf=xg();function xg(){const r={};return["includes","indexOf","lastIndexOf"].forEach(e=>{r[e]=function(...t){const n=ee(this);for(let o=0,a=this.length;o<a;o++)an(n,"get",o+"");const i=n[e](...t);return i===-1||i===!1?n[e](...t.map(ee)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{r[e]=function(...t){Wi();const n=ee(this)[e].apply(this,t);return Bi(),n}}),r}function tu(r=!1,e=!1){return function(n,i,o){if(i==="__v_isReactive")return!r;if(i==="__v_isReadonly")return r;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&o===(r?e?jg:oc:e?ic:rc).get(n))return n;const a=Lt(n);if(!r&&a&&$t(wf,i))return Reflect.get(wf,i,o);const l=Reflect.get(n,i,o);return(wo(i)?tc.has(i):mg(i))||(r||an(n,"get",i),e)?l:We(l)?a&&Zl(i)?l:l.value:xe(l)?r?ac(l):ru(l):l}}const wg=ec(),Og=ec(!0);function ec(r=!1){return function(t,n,i,o){let a=t[n];if(Oo(a)&&We(a)&&!We(i))return!1;if(!r&&!Oo(i)&&(vl(i)||(i=ee(i),a=ee(a)),!Lt(t)&&We(a)&&!We(i)))return a.value=i,!0;const l=Lt(t)&&Zl(n)?Number(n)<t.length:$t(t,n),u=Reflect.set(t,n,i,o);return t===ee(o)&&(l?ba(i,a)&&rr(t,"set",n,i):rr(t,"add",n,i)),u}}function Ig(r,e){const t=$t(r,e);r[e];const n=Reflect.deleteProperty(r,e);return n&&t&&rr(r,"delete",e,void 0),n}function Rg(r,e){const t=Reflect.has(r,e);return(!wo(e)||!tc.has(e))&&an(r,"has",e),t}function Sg(r){return an(r,"iterate",Lt(r)?"length":ri),Reflect.ownKeys(r)}const nc={get:Tg,set:wg,deleteProperty:Ig,has:Rg,ownKeys:Sg},Pg={get:Cg,set(r,e){return!0},deleteProperty(r,e){return!0}},Lg=Be({},nc,{get:Eg,set:Og}),eu=r=>r,rs=r=>Reflect.getPrototypeOf(r);function la(r,e,t=!1,n=!1){r=r.__v_raw;const i=ee(r),o=ee(e);t||(e!==o&&an(i,"get",e),an(i,"get",o));const{has:a}=rs(i),l=n?eu:t?au:ou;if(a.call(i,e))return l(r.get(e));if(a.call(i,o))return l(r.get(o));r!==i&&r.get(e)}function ua(r,e=!1){const t=this.__v_raw,n=ee(t),i=ee(r);return e||(r!==i&&an(n,"has",r),an(n,"has",i)),r===i?t.has(r):t.has(r)||t.has(i)}function fa(r,e=!1){return r=r.__v_raw,!e&&an(ee(r),"iterate",ri),Reflect.get(r,"size",r)}function Of(r){r=ee(r);const e=ee(this);return rs(e).has.call(e,r)||(e.add(r),rr(e,"add",r,r)),this}function If(r,e){e=ee(e);const t=ee(this),{has:n,get:i}=rs(t);let o=n.call(t,r);o||(r=ee(r),o=n.call(t,r));const a=i.call(t,r);return t.set(r,e),o?ba(e,a)&&rr(t,"set",r,e):rr(t,"add",r,e),this}function Rf(r){const e=ee(this),{has:t,get:n}=rs(e);let i=t.call(e,r);i||(r=ee(r),i=t.call(e,r)),n&&n.call(e,r);const o=e.delete(r);return i&&rr(e,"delete",r,void 0),o}function Sf(){const r=ee(this),e=r.size!==0,t=r.clear();return e&&rr(r,"clear",void 0,void 0),t}function ha(r,e){return function(n,i){const o=this,a=o.__v_raw,l=ee(a),u=e?eu:r?au:ou;return!r&&an(l,"iterate",ri),a.forEach((h,c)=>n.call(i,u(h),u(c),o))}}function ca(r,e,t){return function(...n){const i=this.__v_raw,o=ee(i),a=Pi(o),l=r==="entries"||r===Symbol.iterator&&a,u=r==="keys"&&a,h=i[r](...n),c=t?eu:e?au:ou;return!e&&an(o,"iterate",u?pl:ri),{next(){const{value:_,done:v}=h.next();return v?{value:_,done:v}:{value:l?[c(_[0]),c(_[1])]:c(_),done:v}},[Symbol.iterator](){return this}}}}function fr(r){return function(...e){return r==="delete"?!1:this}}function Ag(){const r={get(o){return la(this,o)},get size(){return fa(this)},has:ua,add:Of,set:If,delete:Rf,clear:Sf,forEach:ha(!1,!1)},e={get(o){return la(this,o,!1,!0)},get size(){return fa(this)},has:ua,add:Of,set:If,delete:Rf,clear:Sf,forEach:ha(!1,!0)},t={get(o){return la(this,o,!0)},get size(){return fa(this,!0)},has(o){return ua.call(this,o,!0)},add:fr("add"),set:fr("set"),delete:fr("delete"),clear:fr("clear"),forEach:ha(!0,!1)},n={get(o){return la(this,o,!0,!0)},get size(){return fa(this,!0)},has(o){return ua.call(this,o,!0)},add:fr("add"),set:fr("set"),delete:fr("delete"),clear:fr("clear"),forEach:ha(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{r[o]=ca(o,!1,!1),t[o]=ca(o,!0,!1),e[o]=ca(o,!1,!0),n[o]=ca(o,!0,!0)}),[r,t,e,n]}const[bg,Mg,Dg,Ng]=Ag();function nu(r,e){const t=e?r?Ng:Dg:r?Mg:bg;return(n,i,o)=>i==="__v_isReactive"?!r:i==="__v_isReadonly"?r:i==="__v_raw"?n:Reflect.get($t(t,i)&&i in n?t:n,i,o)}const Fg={get:nu(!1,!1)},kg={get:nu(!1,!0)},Gg={get:nu(!0,!1)},rc=new WeakMap,ic=new WeakMap,oc=new WeakMap,jg=new WeakMap;function Wg(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Bg(r){return r.__v_skip||!Object.isExtensible(r)?0:Wg(hg(r))}function ru(r){return Oo(r)?r:iu(r,!1,nc,Fg,rc)}function Ug(r){return iu(r,!1,Lg,kg,ic)}function ac(r){return iu(r,!0,Pg,Gg,oc)}function iu(r,e,t,n,i){if(!xe(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const o=i.get(r);if(o)return o;const a=Bg(r);if(a===0)return r;const l=new Proxy(r,a===2?n:t);return i.set(r,l),l}function Li(r){return Oo(r)?Li(r.__v_raw):!!(r&&r.__v_isReactive)}function Oo(r){return!!(r&&r.__v_isReadonly)}function vl(r){return!!(r&&r.__v_isShallow)}function sc(r){return Li(r)||Oo(r)}function ee(r){const e=r&&r.__v_raw;return e?ee(e):r}function lc(r){return Ma(r,"__v_skip",!0),r}const ou=r=>xe(r)?ru(r):r,au=r=>xe(r)?ac(r):r;function Yg(r){xr&&Cn&&(r=ee(r),Qh(r.dep||(r.dep=Jl())))}function Hg(r,e){r=ee(r),r.dep&&gl(r.dep)}function We(r){return!!(r&&r.__v_isRef===!0)}function Xg(r){return We(r)?r.value:r}const $g={get:(r,e,t)=>Xg(Reflect.get(r,e,t)),set:(r,e,t,n)=>{const i=r[e];return We(i)&&!We(t)?(i.value=t,!0):Reflect.set(r,e,t,n)}};function uc(r){return Li(r)?r:new Proxy(r,$g)}class zg{constructor(e,t,n,i){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Ql(e,()=>{this._dirty||(this._dirty=!0,Hg(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const e=ee(this);return Yg(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Vg(r,e,t=!1){let n,i;const o=jt(r);return o?(n=r,i=On):(n=r.get,i=r.set),new zg(n,i,o||!i,t)}function wr(r,e,t,n){let i;try{i=n?r(...n):r()}catch(o){is(o,e,t)}return i}function cn(r,e,t,n){if(jt(r)){const o=wr(r,e,t,n);return o&&$h(o)&&o.catch(a=>{is(a,e,t)}),o}const i=[];for(let o=0;o<r.length;o++)i.push(cn(r[o],e,t,n));return i}function is(r,e,t,n=!0){const i=e?e.vnode:null;if(e){let o=e.parent;const a=e.proxy,l=t;for(;o;){const h=o.ec;if(h){for(let c=0;c<h.length;c++)if(h[c](r,a,l)===!1)return}o=o.parent}const u=e.appContext.config.errorHandler;if(u){wr(u,null,10,[r,a,l]);return}}Kg(r,t,i,n)}function Kg(r,e,t,n=!0){console.error(r)}let Da=!1,_l=!1;const on=[];let tr=0;const _o=[];let fo=null,mi=0;const yo=[];let gr=null,Ti=0;const fc=Promise.resolve();let su=null,yl=null;function qg(r){const e=su||fc;return r?e.then(this?r.bind(this):r):e}function Zg(r){let e=tr+1,t=on.length;for(;e<t;){const n=e+t>>>1;Io(on[n])<r?e=n+1:t=n}return e}function hc(r){(!on.length||!on.includes(r,Da&&r.allowRecurse?tr+1:tr))&&r!==yl&&(r.id==null?on.push(r):on.splice(Zg(r.id),0,r),cc())}function cc(){!Da&&!_l&&(_l=!0,su=fc.then(gc))}function Jg(r){const e=on.indexOf(r);e>tr&&on.splice(e,1)}function dc(r,e,t,n){Lt(r)?t.push(...r):(!e||!e.includes(r,r.allowRecurse?n+1:n))&&t.push(r),cc()}function Qg(r){dc(r,fo,_o,mi)}function tv(r){dc(r,gr,yo,Ti)}function os(r,e=null){if(_o.length){for(yl=e,fo=[...new Set(_o)],_o.length=0,mi=0;mi<fo.length;mi++)fo[mi]();fo=null,mi=0,yl=null,os(r,e)}}function pc(r){if(os(),yo.length){const e=[...new Set(yo)];if(yo.length=0,gr){gr.push(...e);return}for(gr=e,gr.sort((t,n)=>Io(t)-Io(n)),Ti=0;Ti<gr.length;Ti++)gr[Ti]();gr=null,Ti=0}}const Io=r=>r.id==null?1/0:r.id;function gc(r){_l=!1,Da=!0,os(r),on.sort((t,n)=>Io(t)-Io(n));const e=On;try{for(tr=0;tr<on.length;tr++){const t=on[tr];t&&t.active!==!1&&wr(t,null,14)}}finally{tr=0,on.length=0,pc(),Da=!1,su=null,(on.length||_o.length||yo.length)&&gc(r)}}function ev(r,e,...t){if(r.isUnmounted)return;const n=r.vnode.props||le;let i=t;const o=e.startsWith("update:"),a=o&&e.slice(7);if(a&&a in n){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:_,trim:v}=n[c]||le;v&&(i=t.map(T=>T.trim())),_&&(i=t.map(Kh))}let l,u=n[l=Xs(e)]||n[l=Xs(kn(e))];!u&&o&&(u=n[l=Xs(ji(e))]),u&&cn(u,r,6,i);const h=n[l+"Once"];if(h){if(!r.emitted)r.emitted={};else if(r.emitted[l])return;r.emitted[l]=!0,cn(h,r,6,i)}}function vc(r,e,t=!1){const n=e.emitsCache,i=n.get(r);if(i!==void 0)return i;const o=r.emits;let a={},l=!1;if(!jt(r)){const u=h=>{const c=vc(h,e,!0);c&&(l=!0,Be(a,c))};!t&&e.mixins.length&&e.mixins.forEach(u),r.extends&&u(r.extends),r.mixins&&r.mixins.forEach(u)}return!o&&!l?(n.set(r,null),null):(Lt(o)?o.forEach(u=>a[u]=null):Be(a,o),n.set(r,a),a)}function as(r,e){return!r||!Qa(e)?!1:(e=e.slice(2).replace(/Once$/,""),$t(r,e[0].toLowerCase()+e.slice(1))||$t(r,ji(e))||$t(r,e))}let hn=null,ss=null;function Na(r){const e=hn;return hn=r,ss=r&&r.type.__scopeId||null,e}function nv(r){ss=r}function rv(){ss=null}function iv(r,e=hn,t){if(!e||r._n)return r;const n=(...i)=>{n._d&&jf(-1);const o=Na(e),a=r(...i);return Na(o),n._d&&jf(1),a};return n._n=!0,n._c=!0,n._d=!0,n}function $s(r){const{type:e,vnode:t,proxy:n,withProxy:i,props:o,propsOptions:[a],slots:l,attrs:u,emit:h,render:c,renderCache:_,data:v,setupState:T,ctx:E,inheritAttrs:w}=r;let L,P;const F=Na(r);try{if(t.shapeFlag&4){const k=i||n;L=Mn(c.call(k,k,_,o,T,v,E)),P=u}else{const k=e;L=Mn(k.length>1?k(o,{attrs:u,slots:l,emit:h}):k(o,null)),P=e.props?u:ov(u)}}catch(k){To.length=0,is(k,r,1),L=dn(In)}let D=L;if(P&&w!==!1){const k=Object.keys(P),{shapeFlag:$}=D;k.length&&$&7&&(a&&k.some(Kl)&&(P=av(P,a)),D=Sr(D,P))}return t.dirs&&(D=Sr(D),D.dirs=D.dirs?D.dirs.concat(t.dirs):t.dirs),t.transition&&(D.transition=t.transition),L=D,Na(F),L}const ov=r=>{let e;for(const t in r)(t==="class"||t==="style"||Qa(t))&&((e||(e={}))[t]=r[t]);return e},av=(r,e)=>{const t={};for(const n in r)(!Kl(n)||!(n.slice(9)in e))&&(t[n]=r[n]);return t};function sv(r,e,t){const{props:n,children:i,component:o}=r,{props:a,children:l,patchFlag:u}=e,h=o.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&u>=0){if(u&1024)return!0;if(u&16)return n?Pf(n,a,h):!!a;if(u&8){const c=e.dynamicProps;for(let _=0;_<c.length;_++){const v=c[_];if(a[v]!==n[v]&&!as(h,v))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:n===a?!1:n?a?Pf(n,a,h):!0:!!a;return!1}function Pf(r,e,t){const n=Object.keys(e);if(n.length!==Object.keys(r).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(e[o]!==r[o]&&!as(t,o))return!0}return!1}function lv({vnode:r,parent:e},t){for(;e&&e.subTree===r;)(r=e.vnode).el=t,e=e.parent}const uv=r=>r.__isSuspense;function fv(r,e){e&&e.pendingBranch?Lt(r)?e.effects.push(...r):e.effects.push(r):tv(r)}function hv(r,e){if(Le){let t=Le.provides;const n=Le.parent&&Le.parent.provides;n===t&&(t=Le.provides=Object.create(n)),t[r]=e}}function zs(r,e,t=!1){const n=Le||hn;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&r in i)return i[r];if(arguments.length>1)return t&&jt(e)?e.call(n.proxy):e}}const Lf={};function Vs(r,e,t){return _c(r,e,t)}function _c(r,e,{immediate:t,deep:n,flush:i,onTrack:o,onTrigger:a}=le){const l=Le;let u,h=!1,c=!1;if(We(r)?(u=()=>r.value,h=vl(r)):Li(r)?(u=()=>r,n=!0):Lt(r)?(c=!0,h=r.some(P=>Li(P)||vl(P)),u=()=>r.map(P=>{if(We(P))return P.value;if(Li(P))return Jr(P);if(jt(P))return wr(P,l,2)})):jt(r)?e?u=()=>wr(r,l,2):u=()=>{if(!(l&&l.isUnmounted))return _&&_(),cn(r,l,3,[v])}:u=On,e&&n){const P=u;u=()=>Jr(P())}let _,v=P=>{_=L.onStop=()=>{wr(P,l,4)}};if(So)return v=On,e?t&&cn(e,l,3,[u(),c?[]:void 0,v]):u(),On;let T=c?[]:Lf;const E=()=>{if(!!L.active)if(e){const P=L.run();(n||h||(c?P.some((F,D)=>ba(F,T[D])):ba(P,T)))&&(_&&_(),cn(e,l,3,[P,T===Lf?void 0:T,v]),T=P)}else L.run()};E.allowRecurse=!!e;let w;i==="sync"?w=E:i==="post"?w=()=>Ze(E,l&&l.suspense):w=()=>Qg(E);const L=new Ql(u,w);return e?t?E():T=L.run():i==="post"?Ze(L.run.bind(L),l&&l.suspense):L.run(),()=>{L.stop(),l&&l.scope&&ql(l.scope.effects,L)}}function cv(r,e,t){const n=this.proxy,i=be(r)?r.includes(".")?yc(n,r):()=>n[r]:r.bind(n,n);let o;jt(e)?o=e:(o=e.handler,t=e);const a=Le;Ni(this);const l=_c(i,o.bind(n),t);return a?Ni(a):ii(),l}function yc(r,e){const t=e.split(".");return()=>{let n=r;for(let i=0;i<t.length&&n;i++)n=n[t[i]];return n}}function Jr(r,e){if(!xe(r)||r.__v_skip||(e=e||new Set,e.has(r)))return r;if(e.add(r),We(r))Jr(r.value,e);else if(Lt(r))for(let t=0;t<r.length;t++)Jr(r[t],e);else if(ts(r)||Pi(r))r.forEach(t=>{Jr(t,e)});else if(Vh(r))for(const t in r)Jr(r[t],e);return r}function dv(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Cc(()=>{r.isMounted=!0}),xc(()=>{r.isUnmounting=!0}),r}const un=[Function,Array],pv={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:un,onEnter:un,onAfterEnter:un,onEnterCancelled:un,onBeforeLeave:un,onLeave:un,onAfterLeave:un,onLeaveCancelled:un,onBeforeAppear:un,onAppear:un,onAfterAppear:un,onAppearCancelled:un},setup(r,{slots:e}){const t=n_(),n=dv();let i;return()=>{const o=e.default&&Tc(e.default(),!0);if(!o||!o.length)return;let a=o[0];if(o.length>1){for(const w of o)if(w.type!==In){a=w;break}}const l=ee(r),{mode:u}=l;if(n.isLeaving)return Ks(a);const h=Af(a);if(!h)return Ks(a);const c=ml(h,l,n,t);Tl(h,c);const _=t.subTree,v=_&&Af(_);let T=!1;const{getTransitionKey:E}=h.type;if(E){const w=E();i===void 0?i=w:w!==i&&(i=w,T=!0)}if(v&&v.type!==In&&(!qr(h,v)||T)){const w=ml(v,l,n,t);if(Tl(v,w),u==="out-in")return n.isLeaving=!0,w.afterLeave=()=>{n.isLeaving=!1,t.update()},Ks(a);u==="in-out"&&h.type!==In&&(w.delayLeave=(L,P,F)=>{const D=mc(n,v);D[String(v.key)]=v,L._leaveCb=()=>{P(),L._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=F})}return a}}},gv=pv;function mc(r,e){const{leavingVNodes:t}=r;let n=t.get(e.type);return n||(n=Object.create(null),t.set(e.type,n)),n}function ml(r,e,t,n){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:h,onEnterCancelled:c,onBeforeLeave:_,onLeave:v,onAfterLeave:T,onLeaveCancelled:E,onBeforeAppear:w,onAppear:L,onAfterAppear:P,onAppearCancelled:F}=e,D=String(r.key),k=mc(t,r),$=(Y,J)=>{Y&&cn(Y,n,9,J)},p=(Y,J)=>{const st=J[1];$(Y,J),Lt(Y)?Y.every(ct=>ct.length<=1)&&st():Y.length<=1&&st()},tt={mode:o,persisted:a,beforeEnter(Y){let J=l;if(!t.isMounted)if(i)J=w||l;else return;Y._leaveCb&&Y._leaveCb(!0);const st=k[D];st&&qr(r,st)&&st.el._leaveCb&&st.el._leaveCb(),$(J,[Y])},enter(Y){let J=u,st=h,ct=c;if(!t.isMounted)if(i)J=L||u,st=P||h,ct=F||c;else return;let at=!1;const _t=Y._enterCb=Pt=>{at||(at=!0,Pt?$(ct,[Y]):$(st,[Y]),tt.delayedLeave&&tt.delayedLeave(),Y._enterCb=void 0)};J?p(J,[Y,_t]):_t()},leave(Y,J){const st=String(r.key);if(Y._enterCb&&Y._enterCb(!0),t.isUnmounting)return J();$(_,[Y]);let ct=!1;const at=Y._leaveCb=_t=>{ct||(ct=!0,J(),_t?$(E,[Y]):$(T,[Y]),Y._leaveCb=void 0,k[st]===r&&delete k[st])};k[st]=r,v?p(v,[Y,at]):at()},clone(Y){return ml(Y,e,t,n)}};return tt}function Ks(r){if(ls(r))return r=Sr(r),r.children=null,r}function Af(r){return ls(r)?r.children?r.children[0]:void 0:r}function Tl(r,e){r.shapeFlag&6&&r.component?Tl(r.component.subTree,e):r.shapeFlag&128?(r.ssContent.transition=e.clone(r.ssContent),r.ssFallback.transition=e.clone(r.ssFallback)):r.transition=e}function Tc(r,e=!1,t){let n=[],i=0;for(let o=0;o<r.length;o++){let a=r[o];const l=t==null?a.key:String(t)+String(a.key!=null?a.key:o);a.type===Ne?(a.patchFlag&128&&i++,n=n.concat(Tc(a.children,e,l))):(e||a.type!==In)&&n.push(l!=null?Sr(a,{key:l}):a)}if(i>1)for(let o=0;o<n.length;o++)n[o].patchFlag=-2;return n}const Sa=r=>!!r.type.__asyncLoader,ls=r=>r.type.__isKeepAlive;function vv(r,e){Ec(r,"a",e)}function _v(r,e){Ec(r,"da",e)}function Ec(r,e,t=Le){const n=r.__wdc||(r.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return r()});if(us(e,n,t),t){let i=t.parent;for(;i&&i.parent;)ls(i.parent.vnode)&&yv(n,e,t,i),i=i.parent}}function yv(r,e,t,n){const i=us(e,r,n,!0);wc(()=>{ql(n[e],i)},t)}function us(r,e,t=Le,n=!1){if(t){const i=t[r]||(t[r]=[]),o=e.__weh||(e.__weh=(...a)=>{if(t.isUnmounted)return;Wi(),Ni(t);const l=cn(e,t,r,a);return ii(),Bi(),l});return n?i.unshift(o):i.push(o),o}}const or=r=>(e,t=Le)=>(!So||r==="sp")&&us(r,e,t),mv=or("bm"),Cc=or("m"),Tv=or("bu"),Ev=or("u"),xc=or("bum"),wc=or("um"),Cv=or("sp"),xv=or("rtg"),wv=or("rtc");function Ov(r,e=Le){us("ec",r,e)}function lu(r,e){const t=hn;if(t===null)return r;const n=hs(t)||t.proxy,i=r.dirs||(r.dirs=[]);for(let o=0;o<e.length;o++){let[a,l,u,h=le]=e[o];jt(a)&&(a={mounted:a,updated:a}),a.deep&&Jr(l),i.push({dir:a,instance:n,value:l,oldValue:void 0,arg:u,modifiers:h})}return r}function Hr(r,e,t,n){const i=r.dirs,o=e&&e.dirs;for(let a=0;a<i.length;a++){const l=i[a];o&&(l.oldValue=o[a].value);let u=l.dir[n];u&&(Wi(),cn(u,t,8,[r.el,l,r,e]),Bi())}}const Oc="components";function qs(r,e){return Rv(Oc,r,!0,e)||r}const Iv=Symbol();function Rv(r,e,t=!0,n=!1){const i=hn||Le;if(i){const o=i.type;if(r===Oc){const l=s_(o);if(l&&(l===e||l===kn(e)||l===ns(kn(e))))return o}const a=bf(i[r]||o[r],e)||bf(i.appContext[r],e);return!a&&n?o:a}}function bf(r,e){return r&&(r[e]||r[kn(e)]||r[ns(kn(e))])}function mo(r,e,t,n){let i;const o=t&&t[n];if(Lt(r)||be(r)){i=new Array(r.length);for(let a=0,l=r.length;a<l;a++)i[a]=e(r[a],a,void 0,o&&o[a])}else if(typeof r=="number"){i=new Array(r);for(let a=0;a<r;a++)i[a]=e(a+1,a,void 0,o&&o[a])}else if(xe(r))if(r[Symbol.iterator])i=Array.from(r,(a,l)=>e(a,l,void 0,o&&o[l]));else{const a=Object.keys(r);i=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const h=a[l];i[l]=e(r[h],h,l,o&&o[l])}}else i=[];return t&&(t[n]=i),i}const El=r=>r?kc(r)?hs(r)||r.proxy:El(r.parent):null,Fa=Be(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>El(r.parent),$root:r=>El(r.root),$emit:r=>r.emit,$options:r=>Rc(r),$forceUpdate:r=>r.f||(r.f=()=>hc(r.update)),$nextTick:r=>r.n||(r.n=qg.bind(r.proxy)),$watch:r=>cv.bind(r)}),Sv={get({_:r},e){const{ctx:t,setupState:n,data:i,props:o,accessCache:a,type:l,appContext:u}=r;let h;if(e[0]!=="$"){const T=a[e];if(T!==void 0)switch(T){case 1:return n[e];case 2:return i[e];case 4:return t[e];case 3:return o[e]}else{if(n!==le&&$t(n,e))return a[e]=1,n[e];if(i!==le&&$t(i,e))return a[e]=2,i[e];if((h=r.propsOptions[0])&&$t(h,e))return a[e]=3,o[e];if(t!==le&&$t(t,e))return a[e]=4,t[e];Cl&&(a[e]=0)}}const c=Fa[e];let _,v;if(c)return e==="$attrs"&&an(r,"get",e),c(r);if((_=l.__cssModules)&&(_=_[e]))return _;if(t!==le&&$t(t,e))return a[e]=4,t[e];if(v=u.config.globalProperties,$t(v,e))return v[e]},set({_:r},e,t){const{data:n,setupState:i,ctx:o}=r;return i!==le&&$t(i,e)?(i[e]=t,!0):n!==le&&$t(n,e)?(n[e]=t,!0):$t(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(o[e]=t,!0)},has({_:{data:r,setupState:e,accessCache:t,ctx:n,appContext:i,propsOptions:o}},a){let l;return!!t[a]||r!==le&&$t(r,a)||e!==le&&$t(e,a)||(l=o[0])&&$t(l,a)||$t(n,a)||$t(Fa,a)||$t(i.config.globalProperties,a)},defineProperty(r,e,t){return t.get!=null?r._.accessCache[e]=0:$t(t,"value")&&this.set(r,e,t.value,null),Reflect.defineProperty(r,e,t)}};let Cl=!0;function Pv(r){const e=Rc(r),t=r.proxy,n=r.ctx;Cl=!1,e.beforeCreate&&Mf(e.beforeCreate,r,"bc");const{data:i,computed:o,methods:a,watch:l,provide:u,inject:h,created:c,beforeMount:_,mounted:v,beforeUpdate:T,updated:E,activated:w,deactivated:L,beforeDestroy:P,beforeUnmount:F,destroyed:D,unmounted:k,render:$,renderTracked:p,renderTriggered:tt,errorCaptured:Y,serverPrefetch:J,expose:st,inheritAttrs:ct,components:at,directives:_t,filters:Pt}=e;if(h&&Lv(h,n,null,r.appContext.config.unwrapInjectedRef),a)for(const rt in a){const gt=a[rt];jt(gt)&&(n[rt]=gt.bind(t))}if(i){const rt=i.call(t,t);xe(rt)&&(r.data=ru(rt))}if(Cl=!0,o)for(const rt in o){const gt=o[rt],Ot=jt(gt)?gt.bind(t,t):jt(gt.get)?gt.get.bind(t,t):On,Gt=!jt(gt)&&jt(gt.set)?gt.set.bind(t):On,Dt=u_({get:Ot,set:Gt});Object.defineProperty(n,rt,{enumerable:!0,configurable:!0,get:()=>Dt.value,set:Z=>Dt.value=Z})}if(l)for(const rt in l)Ic(l[rt],n,t,rt);if(u){const rt=jt(u)?u.call(t):u;Reflect.ownKeys(rt).forEach(gt=>{hv(gt,rt[gt])})}c&&Mf(c,r,"c");function dt(rt,gt){Lt(gt)?gt.forEach(Ot=>rt(Ot.bind(t))):gt&&rt(gt.bind(t))}if(dt(mv,_),dt(Cc,v),dt(Tv,T),dt(Ev,E),dt(vv,w),dt(_v,L),dt(Ov,Y),dt(wv,p),dt(xv,tt),dt(xc,F),dt(wc,k),dt(Cv,J),Lt(st))if(st.length){const rt=r.exposed||(r.exposed={});st.forEach(gt=>{Object.defineProperty(rt,gt,{get:()=>t[gt],set:Ot=>t[gt]=Ot})})}else r.exposed||(r.exposed={});$&&r.render===On&&(r.render=$),ct!=null&&(r.inheritAttrs=ct),at&&(r.components=at),_t&&(r.directives=_t)}function Lv(r,e,t=On,n=!1){Lt(r)&&(r=xl(r));for(const i in r){const o=r[i];let a;xe(o)?"default"in o?a=zs(o.from||i,o.default,!0):a=zs(o.from||i):a=zs(o),We(a)&&n?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):e[i]=a}}function Mf(r,e,t){cn(Lt(r)?r.map(n=>n.bind(e.proxy)):r.bind(e.proxy),e,t)}function Ic(r,e,t,n){const i=n.includes(".")?yc(t,n):()=>t[n];if(be(r)){const o=e[r];jt(o)&&Vs(i,o)}else if(jt(r))Vs(i,r.bind(t));else if(xe(r))if(Lt(r))r.forEach(o=>Ic(o,e,t,n));else{const o=jt(r.handler)?r.handler.bind(t):e[r.handler];jt(o)&&Vs(i,o,r)}}function Rc(r){const e=r.type,{mixins:t,extends:n}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=r.appContext,l=o.get(e);let u;return l?u=l:!i.length&&!t&&!n?u=e:(u={},i.length&&i.forEach(h=>ka(u,h,a,!0)),ka(u,e,a)),o.set(e,u),u}function ka(r,e,t,n=!1){const{mixins:i,extends:o}=e;o&&ka(r,o,t,!0),i&&i.forEach(a=>ka(r,a,t,!0));for(const a in e)if(!(n&&a==="expose")){const l=Av[a]||t&&t[a];r[a]=l?l(r[a],e[a]):e[a]}return r}const Av={data:Df,props:Vr,emits:Vr,methods:Vr,computed:Vr,beforeCreate:Xe,created:Xe,beforeMount:Xe,mounted:Xe,beforeUpdate:Xe,updated:Xe,beforeDestroy:Xe,beforeUnmount:Xe,destroyed:Xe,unmounted:Xe,activated:Xe,deactivated:Xe,errorCaptured:Xe,serverPrefetch:Xe,components:Vr,directives:Vr,watch:Mv,provide:Df,inject:bv};function Df(r,e){return e?r?function(){return Be(jt(r)?r.call(this,this):r,jt(e)?e.call(this,this):e)}:e:r}function bv(r,e){return Vr(xl(r),xl(e))}function xl(r){if(Lt(r)){const e={};for(let t=0;t<r.length;t++)e[r[t]]=r[t];return e}return r}function Xe(r,e){return r?[...new Set([].concat(r,e))]:e}function Vr(r,e){return r?Be(Be(Object.create(null),r),e):e}function Mv(r,e){if(!r)return e;if(!e)return r;const t=Be(Object.create(null),r);for(const n in e)t[n]=Xe(r[n],e[n]);return t}function Dv(r,e,t,n=!1){const i={},o={};Ma(o,fs,1),r.propsDefaults=Object.create(null),Sc(r,e,i,o);for(const a in r.propsOptions[0])a in i||(i[a]=void 0);t?r.props=n?i:Ug(i):r.type.props?r.props=i:r.props=o,r.attrs=o}function Nv(r,e,t,n){const{props:i,attrs:o,vnode:{patchFlag:a}}=r,l=ee(i),[u]=r.propsOptions;let h=!1;if((n||a>0)&&!(a&16)){if(a&8){const c=r.vnode.dynamicProps;for(let _=0;_<c.length;_++){let v=c[_];if(as(r.emitsOptions,v))continue;const T=e[v];if(u)if($t(o,v))T!==o[v]&&(o[v]=T,h=!0);else{const E=kn(v);i[E]=wl(u,l,E,T,r,!1)}else T!==o[v]&&(o[v]=T,h=!0)}}}else{Sc(r,e,i,o)&&(h=!0);let c;for(const _ in l)(!e||!$t(e,_)&&((c=ji(_))===_||!$t(e,c)))&&(u?t&&(t[_]!==void 0||t[c]!==void 0)&&(i[_]=wl(u,l,_,void 0,r,!0)):delete i[_]);if(o!==l)for(const _ in o)(!e||!$t(e,_)&&!0)&&(delete o[_],h=!0)}h&&rr(r,"set","$attrs")}function Sc(r,e,t,n){const[i,o]=r.propsOptions;let a=!1,l;if(e)for(let u in e){if(Ia(u))continue;const h=e[u];let c;i&&$t(i,c=kn(u))?!o||!o.includes(c)?t[c]=h:(l||(l={}))[c]=h:as(r.emitsOptions,u)||(!(u in n)||h!==n[u])&&(n[u]=h,a=!0)}if(o){const u=ee(t),h=l||le;for(let c=0;c<o.length;c++){const _=o[c];t[_]=wl(i,u,_,h[_],r,!$t(h,_))}}return a}function wl(r,e,t,n,i,o){const a=r[t];if(a!=null){const l=$t(a,"default");if(l&&n===void 0){const u=a.default;if(a.type!==Function&&jt(u)){const{propsDefaults:h}=i;t in h?n=h[t]:(Ni(i),n=h[t]=u.call(null,e),ii())}else n=u}a[0]&&(o&&!l?n=!1:a[1]&&(n===""||n===ji(t))&&(n=!0))}return n}function Pc(r,e,t=!1){const n=e.propsCache,i=n.get(r);if(i)return i;const o=r.props,a={},l=[];let u=!1;if(!jt(r)){const c=_=>{u=!0;const[v,T]=Pc(_,e,!0);Be(a,v),T&&l.push(...T)};!t&&e.mixins.length&&e.mixins.forEach(c),r.extends&&c(r.extends),r.mixins&&r.mixins.forEach(c)}if(!o&&!u)return n.set(r,Si),Si;if(Lt(o))for(let c=0;c<o.length;c++){const _=kn(o[c]);Nf(_)&&(a[_]=le)}else if(o)for(const c in o){const _=kn(c);if(Nf(_)){const v=o[c],T=a[_]=Lt(v)||jt(v)?{type:v}:v;if(T){const E=Gf(Boolean,T.type),w=Gf(String,T.type);T[0]=E>-1,T[1]=w<0||E<w,(E>-1||$t(T,"default"))&&l.push(_)}}}const h=[a,l];return n.set(r,h),h}function Nf(r){return r[0]!=="$"}function Ff(r){const e=r&&r.toString().match(/^\s*function (\w+)/);return e?e[1]:r===null?"null":""}function kf(r,e){return Ff(r)===Ff(e)}function Gf(r,e){return Lt(e)?e.findIndex(t=>kf(t,r)):jt(e)&&kf(e,r)?0:-1}const Lc=r=>r[0]==="_"||r==="$stable",uu=r=>Lt(r)?r.map(Mn):[Mn(r)],Fv=(r,e,t)=>{if(e._n)return e;const n=iv((...i)=>uu(e(...i)),t);return n._c=!1,n},Ac=(r,e,t)=>{const n=r._ctx;for(const i in r){if(Lc(i))continue;const o=r[i];if(jt(o))e[i]=Fv(i,o,n);else if(o!=null){const a=uu(o);e[i]=()=>a}}},bc=(r,e)=>{const t=uu(e);r.slots.default=()=>t},kv=(r,e)=>{if(r.vnode.shapeFlag&32){const t=e._;t?(r.slots=ee(e),Ma(e,"_",t)):Ac(e,r.slots={})}else r.slots={},e&&bc(r,e);Ma(r.slots,fs,1)},Gv=(r,e,t)=>{const{vnode:n,slots:i}=r;let o=!0,a=le;if(n.shapeFlag&32){const l=e._;l?t&&l===1?o=!1:(Be(i,e),!t&&l===1&&delete i._):(o=!e.$stable,Ac(e,i)),a=e}else e&&(bc(r,e),a={default:1});if(o)for(const l in i)!Lc(l)&&!(l in a)&&delete i[l]};function Mc(){return{app:null,config:{isNativeTag:lg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jv=0;function Wv(r,e){return function(n,i=null){jt(n)||(n=Object.assign({},n)),i!=null&&!xe(i)&&(i=null);const o=Mc(),a=new Set;let l=!1;const u=o.app={_uid:jv++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:f_,get config(){return o.config},set config(h){},use(h,...c){return a.has(h)||(h&&jt(h.install)?(a.add(h),h.install(u,...c)):jt(h)&&(a.add(h),h(u,...c))),u},mixin(h){return o.mixins.includes(h)||o.mixins.push(h),u},component(h,c){return c?(o.components[h]=c,u):o.components[h]},directive(h,c){return c?(o.directives[h]=c,u):o.directives[h]},mount(h,c,_){if(!l){const v=dn(n,i);return v.appContext=o,c&&e?e(v,h):r(v,h,_),l=!0,u._container=h,h.__vue_app__=u,hs(v.component)||v.component.proxy}},unmount(){l&&(r(null,u._container),delete u._container.__vue_app__)},provide(h,c){return o.provides[h]=c,u}};return u}}function Ol(r,e,t,n,i=!1){if(Lt(r)){r.forEach((v,T)=>Ol(v,e&&(Lt(e)?e[T]:e),t,n,i));return}if(Sa(n)&&!i)return;const o=n.shapeFlag&4?hs(n.component)||n.component.proxy:n.el,a=i?null:o,{i:l,r:u}=r,h=e&&e.r,c=l.refs===le?l.refs={}:l.refs,_=l.setupState;if(h!=null&&h!==u&&(be(h)?(c[h]=null,$t(_,h)&&(_[h]=null)):We(h)&&(h.value=null)),jt(u))wr(u,l,12,[a,c]);else{const v=be(u),T=We(u);if(v||T){const E=()=>{if(r.f){const w=v?c[u]:u.value;i?Lt(w)&&ql(w,o):Lt(w)?w.includes(o)||w.push(o):v?(c[u]=[o],$t(_,u)&&(_[u]=c[u])):(u.value=[o],r.k&&(c[r.k]=u.value))}else v?(c[u]=a,$t(_,u)&&(_[u]=a)):We(u)&&(u.value=a,r.k&&(c[r.k]=a))};a?(E.id=-1,Ze(E,t)):E()}}}const Ze=fv;function Bv(r){return Uv(r)}function Uv(r,e){const t=pg();t.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:a,createText:l,createComment:u,setText:h,setElementText:c,parentNode:_,nextSibling:v,setScopeId:T=On,cloneNode:E,insertStaticContent:w}=r,L=(O,b,B,G=null,H=null,et=null,ot=!1,Q=null,nt=!!b.dynamicChildren)=>{if(O===b)return;O&&!qr(O,b)&&(G=pe(O),Bt(O,H,et,!0),O=null),b.patchFlag===-2&&(nt=!1,b.dynamicChildren=null);const{type:V,ref:ht,shapeFlag:lt}=b;switch(V){case fu:P(O,b,B,G);break;case In:F(O,b,B,G);break;case Zs:O==null&&D(b,B,G,ot);break;case Ne:_t(O,b,B,G,H,et,ot,Q,nt);break;default:lt&1?p(O,b,B,G,H,et,ot,Q,nt):lt&6?Pt(O,b,B,G,H,et,ot,Q,nt):(lt&64||lt&128)&&V.process(O,b,B,G,H,et,ot,Q,nt,Ue)}ht!=null&&H&&Ol(ht,O&&O.ref,et,b||O,!b)},P=(O,b,B,G)=>{if(O==null)n(b.el=l(b.children),B,G);else{const H=b.el=O.el;b.children!==O.children&&h(H,b.children)}},F=(O,b,B,G)=>{O==null?n(b.el=u(b.children||""),B,G):b.el=O.el},D=(O,b,B,G)=>{[O.el,O.anchor]=w(O.children,b,B,G,O.el,O.anchor)},k=({el:O,anchor:b},B,G)=>{let H;for(;O&&O!==b;)H=v(O),n(O,B,G),O=H;n(b,B,G)},$=({el:O,anchor:b})=>{let B;for(;O&&O!==b;)B=v(O),i(O),O=B;i(b)},p=(O,b,B,G,H,et,ot,Q,nt)=>{ot=ot||b.type==="svg",O==null?tt(b,B,G,H,et,ot,Q,nt):st(O,b,H,et,ot,Q,nt)},tt=(O,b,B,G,H,et,ot,Q)=>{let nt,V;const{type:ht,props:lt,shapeFlag:pt,transition:Tt,patchFlag:Ft,dirs:Nt}=O;if(O.el&&E!==void 0&&Ft===-1)nt=O.el=E(O.el);else{if(nt=O.el=a(O.type,et,lt&&lt.is,lt),pt&8?c(nt,O.children):pt&16&&J(O.children,nt,null,G,H,et&&ht!=="foreignObject",ot,Q),Nt&&Hr(O,null,G,"created"),lt){for(const Ut in lt)Ut!=="value"&&!Ia(Ut)&&o(nt,Ut,null,lt[Ut],et,O.children,G,H,oe);"value"in lt&&o(nt,"value",null,lt.value),(V=lt.onVnodeBeforeMount)&&An(V,G,O)}Y(nt,O,O.scopeId,ot,G)}Nt&&Hr(O,null,G,"beforeMount");const kt=(!H||H&&!H.pendingBranch)&&Tt&&!Tt.persisted;kt&&Tt.beforeEnter(nt),n(nt,b,B),((V=lt&&lt.onVnodeMounted)||kt||Nt)&&Ze(()=>{V&&An(V,G,O),kt&&Tt.enter(nt),Nt&&Hr(O,null,G,"mounted")},H)},Y=(O,b,B,G,H)=>{if(B&&T(O,B),G)for(let et=0;et<G.length;et++)T(O,G[et]);if(H){let et=H.subTree;if(b===et){const ot=H.vnode;Y(O,ot,ot.scopeId,ot.slotScopeIds,H.parent)}}},J=(O,b,B,G,H,et,ot,Q,nt=0)=>{for(let V=nt;V<O.length;V++){const ht=O[V]=Q?_r(O[V]):Mn(O[V]);L(null,ht,b,B,G,H,et,ot,Q)}},st=(O,b,B,G,H,et,ot)=>{const Q=b.el=O.el;let{patchFlag:nt,dynamicChildren:V,dirs:ht}=b;nt|=O.patchFlag&16;const lt=O.props||le,pt=b.props||le;let Tt;B&&Xr(B,!1),(Tt=pt.onVnodeBeforeUpdate)&&An(Tt,B,b,O),ht&&Hr(b,O,B,"beforeUpdate"),B&&Xr(B,!0);const Ft=H&&b.type!=="foreignObject";if(V?ct(O.dynamicChildren,V,Q,B,G,Ft,et):ot||Ot(O,b,Q,null,B,G,Ft,et,!1),nt>0){if(nt&16)at(Q,b,lt,pt,B,G,H);else if(nt&2&&lt.class!==pt.class&&o(Q,"class",null,pt.class,H),nt&4&&o(Q,"style",lt.style,pt.style,H),nt&8){const Nt=b.dynamicProps;for(let kt=0;kt<Nt.length;kt++){const Ut=Nt[kt],we=lt[Ut],ne=pt[Ut];(ne!==we||Ut==="value")&&o(Q,Ut,we,ne,H,O.children,B,G,oe)}}nt&1&&O.children!==b.children&&c(Q,b.children)}else!ot&&V==null&&at(Q,b,lt,pt,B,G,H);((Tt=pt.onVnodeUpdated)||ht)&&Ze(()=>{Tt&&An(Tt,B,b,O),ht&&Hr(b,O,B,"updated")},G)},ct=(O,b,B,G,H,et,ot)=>{for(let Q=0;Q<b.length;Q++){const nt=O[Q],V=b[Q],ht=nt.el&&(nt.type===Ne||!qr(nt,V)||nt.shapeFlag&70)?_(nt.el):B;L(nt,V,ht,null,G,H,et,ot,!0)}},at=(O,b,B,G,H,et,ot)=>{if(B!==G){for(const Q in G){if(Ia(Q))continue;const nt=G[Q],V=B[Q];nt!==V&&Q!=="value"&&o(O,Q,V,nt,ot,b.children,H,et,oe)}if(B!==le)for(const Q in B)!Ia(Q)&&!(Q in G)&&o(O,Q,B[Q],null,ot,b.children,H,et,oe);"value"in G&&o(O,"value",B.value,G.value)}},_t=(O,b,B,G,H,et,ot,Q,nt)=>{const V=b.el=O?O.el:l(""),ht=b.anchor=O?O.anchor:l("");let{patchFlag:lt,dynamicChildren:pt,slotScopeIds:Tt}=b;Tt&&(Q=Q?Q.concat(Tt):Tt),O==null?(n(V,B,G),n(ht,B,G),J(b.children,B,ht,H,et,ot,Q,nt)):lt>0&&lt&64&&pt&&O.dynamicChildren?(ct(O.dynamicChildren,pt,B,H,et,ot,Q),(b.key!=null||H&&b===H.subTree)&&Dc(O,b,!0)):Ot(O,b,B,ht,H,et,ot,Q,nt)},Pt=(O,b,B,G,H,et,ot,Q,nt)=>{b.slotScopeIds=Q,O==null?b.shapeFlag&512?H.ctx.activate(b,B,G,ot,nt):vt(b,B,G,H,et,ot,nt):dt(O,b,nt)},vt=(O,b,B,G,H,et,ot)=>{const Q=O.component=e_(O,G,H);if(ls(O)&&(Q.ctx.renderer=Ue),r_(Q),Q.asyncDep){if(H&&H.registerDep(Q,rt),!O.el){const nt=Q.subTree=dn(In);F(null,nt,b,B)}return}rt(Q,O,b,B,H,et,ot)},dt=(O,b,B)=>{const G=b.component=O.component;if(sv(O,b,B))if(G.asyncDep&&!G.asyncResolved){gt(G,b,B);return}else G.next=b,Jg(G.update),G.update();else b.el=O.el,G.vnode=b},rt=(O,b,B,G,H,et,ot)=>{const Q=()=>{if(O.isMounted){let{next:ht,bu:lt,u:pt,parent:Tt,vnode:Ft}=O,Nt=ht,kt;Xr(O,!1),ht?(ht.el=Ft.el,gt(O,ht,ot)):ht=Ft,lt&&Ra(lt),(kt=ht.props&&ht.props.onVnodeBeforeUpdate)&&An(kt,Tt,ht,Ft),Xr(O,!0);const Ut=$s(O),we=O.subTree;O.subTree=Ut,L(we,Ut,_(we.el),pe(we),O,H,et),ht.el=Ut.el,Nt===null&&lv(O,Ut.el),pt&&Ze(pt,H),(kt=ht.props&&ht.props.onVnodeUpdated)&&Ze(()=>An(kt,Tt,ht,Ft),H)}else{let ht;const{el:lt,props:pt}=b,{bm:Tt,m:Ft,parent:Nt}=O,kt=Sa(b);if(Xr(O,!1),Tt&&Ra(Tt),!kt&&(ht=pt&&pt.onVnodeBeforeMount)&&An(ht,Nt,b),Xr(O,!0),lt&&Pn){const Ut=()=>{O.subTree=$s(O),Pn(lt,O.subTree,O,H,null)};kt?b.type.__asyncLoader().then(()=>!O.isUnmounted&&Ut()):Ut()}else{const Ut=O.subTree=$s(O);L(null,Ut,B,G,O,H,et),b.el=Ut.el}if(Ft&&Ze(Ft,H),!kt&&(ht=pt&&pt.onVnodeMounted)){const Ut=b;Ze(()=>An(ht,Nt,Ut),H)}(b.shapeFlag&256||Nt&&Sa(Nt.vnode)&&Nt.vnode.shapeFlag&256)&&O.a&&Ze(O.a,H),O.isMounted=!0,b=B=G=null}},nt=O.effect=new Ql(Q,()=>hc(V),O.scope),V=O.update=()=>nt.run();V.id=O.uid,Xr(O,!0),V()},gt=(O,b,B)=>{b.component=O;const G=O.vnode.props;O.vnode=b,O.next=null,Nv(O,b.props,G,B),Gv(O,b.children,B),Wi(),os(void 0,O.update),Bi()},Ot=(O,b,B,G,H,et,ot,Q,nt=!1)=>{const V=O&&O.children,ht=O?O.shapeFlag:0,lt=b.children,{patchFlag:pt,shapeFlag:Tt}=b;if(pt>0){if(pt&128){Dt(V,lt,B,G,H,et,ot,Q,nt);return}else if(pt&256){Gt(V,lt,B,G,H,et,ot,Q,nt);return}}Tt&8?(ht&16&&oe(V,H,et),lt!==V&&c(B,lt)):ht&16?Tt&16?Dt(V,lt,B,G,H,et,ot,Q,nt):oe(V,H,et,!0):(ht&8&&c(B,""),Tt&16&&J(lt,B,G,H,et,ot,Q,nt))},Gt=(O,b,B,G,H,et,ot,Q,nt)=>{O=O||Si,b=b||Si;const V=O.length,ht=b.length,lt=Math.min(V,ht);let pt;for(pt=0;pt<lt;pt++){const Tt=b[pt]=nt?_r(b[pt]):Mn(b[pt]);L(O[pt],Tt,B,null,H,et,ot,Q,nt)}V>ht?oe(O,H,et,!0,!1,lt):J(b,B,G,H,et,ot,Q,nt,lt)},Dt=(O,b,B,G,H,et,ot,Q,nt)=>{let V=0;const ht=b.length;let lt=O.length-1,pt=ht-1;for(;V<=lt&&V<=pt;){const Tt=O[V],Ft=b[V]=nt?_r(b[V]):Mn(b[V]);if(qr(Tt,Ft))L(Tt,Ft,B,null,H,et,ot,Q,nt);else break;V++}for(;V<=lt&&V<=pt;){const Tt=O[lt],Ft=b[pt]=nt?_r(b[pt]):Mn(b[pt]);if(qr(Tt,Ft))L(Tt,Ft,B,null,H,et,ot,Q,nt);else break;lt--,pt--}if(V>lt){if(V<=pt){const Tt=pt+1,Ft=Tt<ht?b[Tt].el:G;for(;V<=pt;)L(null,b[V]=nt?_r(b[V]):Mn(b[V]),B,Ft,H,et,ot,Q,nt),V++}}else if(V>pt)for(;V<=lt;)Bt(O[V],H,et,!0),V++;else{const Tt=V,Ft=V,Nt=new Map;for(V=Ft;V<=pt;V++){const Xt=b[V]=nt?_r(b[V]):Mn(b[V]);Xt.key!=null&&Nt.set(Xt.key,V)}let kt,Ut=0;const we=pt-Ft+1;let ne=!1,Qe=0;const fe=new Array(we);for(V=0;V<we;V++)fe[V]=0;for(V=Tt;V<=lt;V++){const Xt=O[V];if(Ut>=we){Bt(Xt,H,et,!0);continue}let re;if(Xt.key!=null)re=Nt.get(Xt.key);else for(kt=Ft;kt<=pt;kt++)if(fe[kt-Ft]===0&&qr(Xt,b[kt])){re=kt;break}re===void 0?Bt(Xt,H,et,!0):(fe[re-Ft]=V+1,re>=Qe?Qe=re:ne=!0,L(Xt,b[re],B,null,H,et,ot,Q,nt),Ut++)}const sn=ne?Yv(fe):Si;for(kt=sn.length-1,V=we-1;V>=0;V--){const Xt=Ft+V,re=b[Xt],Yn=Xt+1<ht?b[Xt+1].el:G;fe[V]===0?L(null,re,B,Yn,H,et,ot,Q,nt):ne&&(kt<0||V!==sn[kt]?Z(re,B,Yn,2):kt--)}}},Z=(O,b,B,G,H=null)=>{const{el:et,type:ot,transition:Q,children:nt,shapeFlag:V}=O;if(V&6){Z(O.component.subTree,b,B,G);return}if(V&128){O.suspense.move(b,B,G);return}if(V&64){ot.move(O,b,B,Ue);return}if(ot===Ne){n(et,b,B);for(let lt=0;lt<nt.length;lt++)Z(nt[lt],b,B,G);n(O.anchor,b,B);return}if(ot===Zs){k(O,b,B);return}if(G!==2&&V&1&&Q)if(G===0)Q.beforeEnter(et),n(et,b,B),Ze(()=>Q.enter(et),H);else{const{leave:lt,delayLeave:pt,afterLeave:Tt}=Q,Ft=()=>n(et,b,B),Nt=()=>{lt(et,()=>{Ft(),Tt&&Tt()})};pt?pt(et,Ft,Nt):Nt()}else n(et,b,B)},Bt=(O,b,B,G=!1,H=!1)=>{const{type:et,props:ot,ref:Q,children:nt,dynamicChildren:V,shapeFlag:ht,patchFlag:lt,dirs:pt}=O;if(Q!=null&&Ol(Q,null,B,O,!0),ht&256){b.ctx.deactivate(O);return}const Tt=ht&1&&pt,Ft=!Sa(O);let Nt;if(Ft&&(Nt=ot&&ot.onVnodeBeforeUnmount)&&An(Nt,b,O),ht&6)Me(O.component,B,G);else{if(ht&128){O.suspense.unmount(B,G);return}Tt&&Hr(O,null,b,"beforeUnmount"),ht&64?O.type.remove(O,b,B,H,Ue,G):V&&(et!==Ne||lt>0&&lt&64)?oe(V,b,B,!1,!0):(et===Ne&&lt&384||!H&&ht&16)&&oe(nt,b,B),G&&St(O)}(Ft&&(Nt=ot&&ot.onVnodeUnmounted)||Tt)&&Ze(()=>{Nt&&An(Nt,b,O),Tt&&Hr(O,null,b,"unmounted")},B)},St=O=>{const{type:b,el:B,anchor:G,transition:H}=O;if(b===Ne){de(B,G);return}if(b===Zs){$(O);return}const et=()=>{i(B),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if(O.shapeFlag&1&&H&&!H.persisted){const{leave:ot,delayLeave:Q}=H,nt=()=>ot(B,et);Q?Q(O.el,et,nt):nt()}else et()},de=(O,b)=>{let B;for(;O!==b;)B=v(O),i(O),O=B;i(b)},Me=(O,b,B)=>{const{bum:G,scope:H,update:et,subTree:ot,um:Q}=O;G&&Ra(G),H.stop(),et&&(et.active=!1,Bt(ot,O,b,B)),Q&&Ze(Q,b),Ze(()=>{O.isUnmounted=!0},b),b&&b.pendingBranch&&!b.isUnmounted&&O.asyncDep&&!O.asyncResolved&&O.suspenseId===b.pendingId&&(b.deps--,b.deps===0&&b.resolve())},oe=(O,b,B,G=!1,H=!1,et=0)=>{for(let ot=et;ot<O.length;ot++)Bt(O[ot],b,B,G,H)},pe=O=>O.shapeFlag&6?pe(O.component.subTree):O.shapeFlag&128?O.suspense.next():v(O.anchor||O.el),ue=(O,b,B)=>{O==null?b._vnode&&Bt(b._vnode,null,null,!0):L(b._vnode||null,O,b,null,null,null,B),pc(),b._vnode=O},Ue={p:L,um:Bt,m:Z,r:St,mt:vt,mc:J,pc:Ot,pbc:ct,n:pe,o:r};let Fe,Pn;return e&&([Fe,Pn]=e(Ue)),{render:ue,hydrate:Fe,createApp:Wv(ue,Fe)}}function Xr({effect:r,update:e},t){r.allowRecurse=e.allowRecurse=t}function Dc(r,e,t=!1){const n=r.children,i=e.children;if(Lt(n)&&Lt(i))for(let o=0;o<n.length;o++){const a=n[o];let l=i[o];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[o]=_r(i[o]),l.el=a.el),t||Dc(a,l))}}function Yv(r){const e=r.slice(),t=[0];let n,i,o,a,l;const u=r.length;for(n=0;n<u;n++){const h=r[n];if(h!==0){if(i=t[t.length-1],r[i]<h){e[n]=i,t.push(n);continue}for(o=0,a=t.length-1;o<a;)l=o+a>>1,r[t[l]]<h?o=l+1:a=l;h<r[t[o]]&&(o>0&&(e[n]=t[o-1]),t[o]=n)}}for(o=t.length,a=t[o-1];o-- >0;)t[o]=a,a=e[a];return t}const Hv=r=>r.__isTeleport,Ne=Symbol(void 0),fu=Symbol(void 0),In=Symbol(void 0),Zs=Symbol(void 0),To=[];let wn=null;function De(r=!1){To.push(wn=r?null:[])}function Xv(){To.pop(),wn=To[To.length-1]||null}let Ro=1;function jf(r){Ro+=r}function Nc(r){return r.dynamicChildren=Ro>0?wn||Si:null,Xv(),Ro>0&&wn&&wn.push(r),r}function Ge(r,e,t,n,i,o){return Nc(te(r,e,t,n,i,o,!0))}function $v(r,e,t,n,i){return Nc(dn(r,e,t,n,i,!0))}function zv(r){return r?r.__v_isVNode===!0:!1}function qr(r,e){return r.type===e.type&&r.key===e.key}const fs="__vInternal",Fc=({key:r})=>r!=null?r:null,Pa=({ref:r,ref_key:e,ref_for:t})=>r!=null?be(r)||We(r)||jt(r)?{i:hn,r,k:e,f:!!t}:r:null;function te(r,e=null,t=null,n=0,i=null,o=r===Ne?0:1,a=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&Fc(e),ref:e&&Pa(e),scopeId:ss,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null};return l?(hu(u,t),o&128&&r.normalize(u)):t&&(u.shapeFlag|=be(t)?8:16),Ro>0&&!a&&wn&&(u.patchFlag>0||o&6)&&u.patchFlag!==32&&wn.push(u),u}const dn=Vv;function Vv(r,e=null,t=null,n=0,i=null,o=!1){if((!r||r===Iv)&&(r=In),zv(r)){const l=Sr(r,e,!0);return t&&hu(l,t),Ro>0&&!o&&wn&&(l.shapeFlag&6?wn[wn.indexOf(r)]=l:wn.push(l)),l.patchFlag|=-2,l}if(l_(r)&&(r=r.__vccOpts),e){e=Kv(e);let{class:l,style:u}=e;l&&!be(l)&&(e.class=Vl(l)),xe(u)&&(sc(u)&&!Lt(u)&&(u=Be({},u)),e.style=zl(u))}const a=be(r)?1:uv(r)?128:Hv(r)?64:xe(r)?4:jt(r)?2:0;return te(r,e,t,n,i,a,o,!0)}function Kv(r){return r?sc(r)||fs in r?Be({},r):r:null}function Sr(r,e,t=!1){const{props:n,ref:i,patchFlag:o,children:a}=r,l=e?Jv(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:l,key:l&&Fc(l),ref:e&&e.ref?t&&i?Lt(i)?i.concat(Pa(e)):[i,Pa(e)]:Pa(e):i,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:a,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==Ne?o===-1?16:o|16:o,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&Sr(r.ssContent),ssFallback:r.ssFallback&&Sr(r.ssFallback),el:r.el,anchor:r.anchor}}function qv(r=" ",e=0){return dn(fu,null,r,e)}function Zv(r="",e=!1){return e?(De(),$v(In,null,r)):dn(In,null,r)}function Mn(r){return r==null||typeof r=="boolean"?dn(In):Lt(r)?dn(Ne,null,r.slice()):typeof r=="object"?_r(r):dn(fu,null,String(r))}function _r(r){return r.el===null||r.memo?r:Sr(r)}function hu(r,e){let t=0;const{shapeFlag:n}=r;if(e==null)e=null;else if(Lt(e))t=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),hu(r,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!(fs in e)?e._ctx=hn:i===3&&hn&&(hn.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else jt(e)?(e={default:e,_ctx:hn},t=32):(e=String(e),n&64?(t=16,e=[qv(e)]):t=8);r.children=e,r.shapeFlag|=t}function Jv(...r){const e={};for(let t=0;t<r.length;t++){const n=r[t];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=Vl([e.class,n.class]));else if(i==="style")e.style=zl([e.style,n.style]);else if(Qa(i)){const o=e[i],a=n[i];a&&o!==a&&!(Lt(o)&&o.includes(a))&&(e[i]=o?[].concat(o,a):a)}else i!==""&&(e[i]=n[i])}return e}function An(r,e,t,n=null){cn(r,e,7,[t,n])}const Qv=Mc();let t_=0;function e_(r,e,t){const n=r.type,i=(e?e.appContext:r.appContext)||Qv,o={uid:t_++,vnode:r,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new gg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Pc(n,i),emitsOptions:vc(n,i),emit:null,emitted:null,propsDefaults:le,inheritAttrs:n.inheritAttrs,ctx:le,data:le,props:le,attrs:le,slots:le,refs:le,setupState:le,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=ev.bind(null,o),r.ce&&r.ce(o),o}let Le=null;const n_=()=>Le||hn,Ni=r=>{Le=r,r.scope.on()},ii=()=>{Le&&Le.scope.off(),Le=null};function kc(r){return r.vnode.shapeFlag&4}let So=!1;function r_(r,e=!1){So=e;const{props:t,children:n}=r.vnode,i=kc(r);Dv(r,t,i,e),kv(r,n);const o=i?i_(r,e):void 0;return So=!1,o}function i_(r,e){const t=r.type;r.accessCache=Object.create(null),r.proxy=lc(new Proxy(r.ctx,Sv));const{setup:n}=t;if(n){const i=r.setupContext=n.length>1?a_(r):null;Ni(r),Wi();const o=wr(n,r,0,[r.props,i]);if(Bi(),ii(),$h(o)){if(o.then(ii,ii),e)return o.then(a=>{Wf(r,a,e)}).catch(a=>{is(a,r,0)});r.asyncDep=o}else Wf(r,o,e)}else Gc(r,e)}function Wf(r,e,t){jt(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:xe(e)&&(r.setupState=uc(e)),Gc(r,t)}let Bf;function Gc(r,e,t){const n=r.type;if(!r.render){if(!e&&Bf&&!n.render){const i=n.template;if(i){const{isCustomElement:o,compilerOptions:a}=r.appContext.config,{delimiters:l,compilerOptions:u}=n,h=Be(Be({isCustomElement:o,delimiters:l},a),u);n.render=Bf(i,h)}}r.render=n.render||On}Ni(r),Wi(),Pv(r),Bi(),ii()}function o_(r){return new Proxy(r.attrs,{get(e,t){return an(r,"get","$attrs"),e[t]}})}function a_(r){const e=n=>{r.exposed=n||{}};let t;return{get attrs(){return t||(t=o_(r))},slots:r.slots,emit:r.emit,expose:e}}function hs(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(uc(lc(r.exposed)),{get(e,t){if(t in e)return e[t];if(t in Fa)return Fa[t](r)}}))}function s_(r){return jt(r)&&r.displayName||r.name}function l_(r){return jt(r)&&"__vccOpts"in r}const u_=(r,e)=>Vg(r,e,So),f_="3.2.36",h_="http://www.w3.org/2000/svg",Zr=typeof document!="undefined"?document:null,Uf=Zr&&Zr.createElement("template"),c_={insert:(r,e,t)=>{e.insertBefore(r,t||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,t,n)=>{const i=e?Zr.createElementNS(h_,r):Zr.createElement(r,t?{is:t}:void 0);return r==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:r=>Zr.createTextNode(r),createComment:r=>Zr.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>Zr.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},cloneNode(r){const e=r.cloneNode(!0);return"_value"in r&&(e._value=r._value),e},insertStaticContent(r,e,t,n,i,o){const a=t?t.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===o||!(i=i.nextSibling)););else{Uf.innerHTML=n?`<svg>${r}</svg>`:r;const l=Uf.content;if(n){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}e.insertBefore(l,t)}return[a?a.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function d_(r,e,t){const n=r._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?r.removeAttribute("class"):t?r.setAttribute("class",e):r.className=e}function p_(r,e,t){const n=r.style,i=be(t);if(t&&!i){for(const o in t)Il(n,o,t[o]);if(e&&!be(e))for(const o in e)t[o]==null&&Il(n,o,"")}else{const o=n.display;i?e!==t&&(n.cssText=t):e&&r.removeAttribute("style"),"_vod"in r&&(n.display=o)}}const Yf=/\s*!important$/;function Il(r,e,t){if(Lt(t))t.forEach(n=>Il(r,e,n));else if(t==null&&(t=""),e.startsWith("--"))r.setProperty(e,t);else{const n=g_(r,e);Yf.test(t)?r.setProperty(ji(n),t.replace(Yf,""),"important"):r[n]=t}}const Hf=["Webkit","Moz","ms"],Js={};function g_(r,e){const t=Js[e];if(t)return t;let n=kn(e);if(n!=="filter"&&n in r)return Js[e]=n;n=ns(n);for(let i=0;i<Hf.length;i++){const o=Hf[i]+n;if(o in r)return Js[e]=o}return e}const Xf="http://www.w3.org/1999/xlink";function v_(r,e,t,n,i){if(n&&e.startsWith("xlink:"))t==null?r.removeAttributeNS(Xf,e.slice(6,e.length)):r.setAttributeNS(Xf,e,t);else{const o=ng(e);t==null||o&&!Hh(t)?r.removeAttribute(e):r.setAttribute(e,o?"":t)}}function __(r,e,t,n,i,o,a){if(e==="innerHTML"||e==="textContent"){n&&a(n,i,o),r[e]=t==null?"":t;return}if(e==="value"&&r.tagName!=="PROGRESS"&&!r.tagName.includes("-")){r._value=t;const u=t==null?"":t;(r.value!==u||r.tagName==="OPTION")&&(r.value=u),t==null&&r.removeAttribute(e);return}let l=!1;if(t===""||t==null){const u=typeof r[e];u==="boolean"?t=Hh(t):t==null&&u==="string"?(t="",l=!0):u==="number"&&(t=0,l=!0)}try{r[e]=t}catch{}l&&r.removeAttribute(e)}const[jc,y_]=(()=>{let r=Date.now,e=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(r=performance.now.bind(performance));const t=navigator.userAgent.match(/firefox\/(\d+)/i);e=!!(t&&Number(t[1])<=53)}return[r,e]})();let Rl=0;const m_=Promise.resolve(),T_=()=>{Rl=0},E_=()=>Rl||(m_.then(T_),Rl=jc());function Wc(r,e,t,n){r.addEventListener(e,t,n)}function C_(r,e,t,n){r.removeEventListener(e,t,n)}function x_(r,e,t,n,i=null){const o=r._vei||(r._vei={}),a=o[e];if(n&&a)a.value=n;else{const[l,u]=w_(e);if(n){const h=o[e]=O_(n,i);Wc(r,l,h,u)}else a&&(C_(r,l,a,u),o[e]=void 0)}}const $f=/(?:Once|Passive|Capture)$/;function w_(r){let e;if($f.test(r)){e={};let t;for(;t=r.match($f);)r=r.slice(0,r.length-t[0].length),e[t[0].toLowerCase()]=!0}return[ji(r.slice(2)),e]}function O_(r,e){const t=n=>{const i=n.timeStamp||jc();(y_||i>=t.attached-1)&&cn(I_(n,t.value),e,5,[n])};return t.value=r,t.attached=E_(),t}function I_(r,e){if(Lt(e)){const t=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{t.call(r),r._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const zf=/^on[a-z]/,R_=(r,e,t,n,i=!1,o,a,l,u)=>{e==="class"?d_(r,n,i):e==="style"?p_(r,t,n):Qa(e)?Kl(e)||x_(r,e,t,n,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):S_(r,e,n,i))?__(r,e,n,o,a,l,u):(e==="true-value"?r._trueValue=n:e==="false-value"&&(r._falseValue=n),v_(r,e,n,i))};function S_(r,e,t,n){return n?!!(e==="innerHTML"||e==="textContent"||e in r&&zf.test(e)&&jt(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA"||zf.test(e)&&be(t)?!1:e in r}const P_={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};gv.props;const Vf=r=>{const e=r.props["onUpdate:modelValue"]||!1;return Lt(e)?t=>Ra(e,t):e},cu={deep:!0,created(r,{value:e,modifiers:{number:t}},n){const i=ts(e);Wc(r,"change",()=>{const o=Array.prototype.filter.call(r.options,a=>a.selected).map(a=>t?Kh(Ga(a)):Ga(a));r._assign(r.multiple?i?new Set(o):o:o[0])}),r._assign=Vf(n)},mounted(r,{value:e}){Kf(r,e)},beforeUpdate(r,e,t){r._assign=Vf(t)},updated(r,{value:e}){Kf(r,e)}};function Kf(r,e){const t=r.multiple;if(!(t&&!Lt(e)&&!ts(e))){for(let n=0,i=r.options.length;n<i;n++){const o=r.options[n],a=Ga(o);if(t)Lt(e)?o.selected=sg(e,a)>-1:o.selected=e.has(a);else if(Ja(Ga(o),e)){r.selectedIndex!==n&&(r.selectedIndex=n);return}}!t&&r.selectedIndex!==-1&&(r.selectedIndex=-1)}}function Ga(r){return"_value"in r?r._value:r.value}const L_=Be({patchProp:R_},c_);let qf;function A_(){return qf||(qf=Bv(L_))}const b_=(...r)=>{const e=A_().createApp(...r),{mount:t}=e;return e.mount=n=>{const i=M_(n);if(!i)return;const o=e._component;!jt(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const a=t(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},e};function M_(r){return be(r)?document.querySelector(r):r}const D_={center:[41.4583,12.7059],zoom:5,mapTypeId:"topo",mapTypes:{streets:{name:"Streets",url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{attribution:'Map data: &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}},terrain:{name:"Terrain",url:"https://{a-c}.tile.thunderforest.com/landscape/{z}/{x}/{y}.png",options:{attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> | Map style: &copy; <a href="http://www.thunderforest.com/">Thunderforest</a>'}},satellite:{name:"Satellite",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{attribution:'Map data: &copy; <a href="http://www.esri.com/">Esri</a> &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'}},topo:{name:"Topo",url:"https://{a-c}.tile.opentopomap.org/{z}/{x}/{y}.png",options:{attribution:'Map data: &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}}},drawingFeatures:["Point","LineString","Polygon","Circle"],fullscreenElement:"main"};var N_=function(){function r(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}return r.prototype.preventDefault=function(){this.defaultPrevented=!0},r.prototype.stopPropagation=function(){this.propagationStopped=!0},r}(),Bn=N_,Fi={PROPERTYCHANGE:"propertychange"},F_=function(){function r(){this.disposed=!1}return r.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},r.prototype.disposeInternal=function(){},r}(),du=F_;function k_(r,e,t){for(var n,i,o=t||li,a=0,l=r.length,u=!1;a<l;)n=a+(l-a>>1),i=+o(r[n],e),i<0?a=n+1:(l=n,u=!i);return u?a:~a}function li(r,e){return r>e?1:r<e?-1:0}function pu(r,e,t){var n=r.length;if(r[0]<=e)return 0;if(e<=r[n-1])return n-1;var i=void 0;if(t>0){for(i=1;i<n;++i)if(r[i]<e)return i-1}else if(t<0){for(i=1;i<n;++i)if(r[i]<=e)return i}else for(i=1;i<n;++i){if(r[i]==e)return i;if(r[i]<e)return typeof t=="function"?t(e,r[i-1],r[i])>0?i-1:i:r[i-1]-e<e-r[i]?i-1:i}return n-1}function G_(r,e,t){for(;e<t;){var n=r[e];r[e]=r[t],r[t]=n,++e,--t}}function er(r,e){for(var t=Array.isArray(e)?e:[e],n=t.length,i=0;i<n;i++)r[r.length]=t[i]}function hi(r,e){var t=r.length;if(t!==e.length)return!1;for(var n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function j_(r,e,t){var n=e||li;return r.every(function(i,o){if(o===0)return!0;var a=n(r[o-1],i);return!(a>0||t&&a===0)})}function oi(){return!0}function Wo(){return!1}function ui(){}function W_(r){var e=!1,t,n,i;return function(){var o=Array.prototype.slice.call(arguments);return(!e||this!==i||!hi(o,n))&&(e=!0,i=this,n=o,t=r.apply(this,arguments)),t}}var Ae=typeof Object.assign=="function"?Object.assign:function(r,e){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),n=1,i=arguments.length;n<i;++n){var o=arguments[n];if(o!=null)for(var a in o)o.hasOwnProperty(a)&&(t[a]=o[a])}return t};function Bo(r){for(var e in r)delete r[e]}var Bc=typeof Object.values=="function"?Object.values:function(r){var e=[];for(var t in r)e.push(r[t]);return e};function Po(r){var e;for(e in r)return!1;return!e}var B_=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),U_=function(r){B_(e,r);function e(t){var n=r.call(this)||this;return n.eventTarget_=t,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return e.prototype.addEventListener=function(t,n){if(!(!t||!n)){var i=this.listeners_||(this.listeners_={}),o=i[t]||(i[t]=[]);o.indexOf(n)===-1&&o.push(n)}},e.prototype.dispatchEvent=function(t){var n=typeof t=="string",i=n?t:t.type,o=this.listeners_&&this.listeners_[i];if(!!o){var a=n?new Bn(t):t;a.target||(a.target=this.eventTarget_||this);var l=this.dispatching_||(this.dispatching_={}),u=this.pendingRemovals_||(this.pendingRemovals_={});i in l||(l[i]=0,u[i]=0),++l[i];for(var h,c=0,_=o.length;c<_;++c)if("handleEvent"in o[c]?h=o[c].handleEvent(a):h=o[c].call(this,a),h===!1||a.propagationStopped){h=!1;break}if(--l[i]===0){var v=u[i];for(delete u[i];v--;)this.removeEventListener(i,ui);delete l[i]}return h}},e.prototype.disposeInternal=function(){this.listeners_&&Bo(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},e.prototype.hasListener=function(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1},e.prototype.removeEventListener=function(t,n){var i=this.listeners_&&this.listeners_[t];if(i){var o=i.indexOf(n);o!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[o]=ui,++this.pendingRemovals_[t]):(i.splice(o,1),i.length===0&&delete this.listeners_[t]))}},e}(du),Ui=U_,Mt={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function zt(r,e,t,n,i){if(n&&n!==r&&(t=t.bind(n)),i){var o=t;t=function(){r.removeEventListener(e,t),o.apply(this,arguments)}}var a={target:r,type:e,listener:t};return r.addEventListener(e,t),a}function ja(r,e,t,n){return zt(r,e,t,n,!0)}function ce(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),Bo(r))}var Y_=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),cs=function(r){Y_(e,r);function e(){var t=r.call(this)||this;return t.on=t.onInternal,t.once=t.onceInternal,t.un=t.unInternal,t.revision_=0,t}return e.prototype.changed=function(){++this.revision_,this.dispatchEvent(Mt.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(t,n){if(Array.isArray(t)){for(var i=t.length,o=new Array(i),a=0;a<i;++a)o[a]=zt(this,t[a],n);return o}else return zt(this,t,n)},e.prototype.onceInternal=function(t,n){var i;if(Array.isArray(t)){var o=t.length;i=new Array(o);for(var a=0;a<o;++a)i[a]=ja(this,t[a],n)}else i=ja(this,t,n);return n.ol_key=i,i},e.prototype.unInternal=function(t,n){var i=n.ol_key;if(i)H_(i);else if(Array.isArray(t))for(var o=0,a=t.length;o<a;++o)this.removeEventListener(t[o],n);else this.removeEventListener(t,n)},e}(Ui);cs.prototype.on;cs.prototype.once;cs.prototype.un;function H_(r){if(Array.isArray(r))for(var e=0,t=r.length;e<t;++e)ce(r[e]);else ce(r)}var Uc=cs;function Yt(){return function(){throw new Error("Unimplemented abstract method.")}()}var X_=0;function Zt(r){return r.ol_uid||(r.ol_uid=String(++X_))}var $_="6.14.1",Yc=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Zf=function(r){Yc(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.key=n,o.oldValue=i,o}return e}(Bn),z_=function(r){Yc(e,r);function e(t){var n=r.call(this)||this;return n.on,n.once,n.un,Zt(n),n.values_=null,t!==void 0&&n.setProperties(t),n}return e.prototype.get=function(t){var n;return this.values_&&this.values_.hasOwnProperty(t)&&(n=this.values_[t]),n},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&Ae({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,n){var i;i="change:".concat(t),this.hasListener(i)&&this.dispatchEvent(new Zf(i,t,n)),i=Fi.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Zf(i,t,n))},e.prototype.addChangeListener=function(t,n){this.addEventListener("change:".concat(t),n)},e.prototype.removeChangeListener=function(t,n){this.removeEventListener("change:".concat(t),n)},e.prototype.set=function(t,n,i){var o=this.values_||(this.values_={});if(i)o[t]=n;else{var a=o[t];o[t]=n,a!==n&&this.notify(t,a)}},e.prototype.setProperties=function(t,n){for(var i in t)this.set(i,t[i],n)},e.prototype.applyProperties=function(t){!t.values_||Ae(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,n){if(this.values_&&t in this.values_){var i=this.values_[t];delete this.values_[t],Po(this.values_)&&(this.values_=null),n||this.notify(t,i)}},e}(Uc),Un=z_,ft={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},Yi={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Gn={};Gn[Yi.RADIANS]=6370997/(2*Math.PI);Gn[Yi.DEGREES]=2*Math.PI*6370997/360;Gn[Yi.FEET]=.3048;Gn[Yi.METERS]=1;Gn[Yi.USFEET]=1200/3937;var Or=Yi,je={ANIMATING:0,INTERACTING:1},mn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},V_=42,gu=256,K_=function(){function r(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}return r.prototype.canWrapX=function(){return this.canWrapX_},r.prototype.getCode=function(){return this.code_},r.prototype.getExtent=function(){return this.extent_},r.prototype.getUnits=function(){return this.units_},r.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Gn[this.units_]},r.prototype.getWorldExtent=function(){return this.worldExtent_},r.prototype.getAxisOrientation=function(){return this.axisOrientation_},r.prototype.isGlobal=function(){return this.global_},r.prototype.setGlobal=function(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)},r.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},r.prototype.setDefaultTileGrid=function(e){this.defaultTileGrid_=e},r.prototype.setExtent=function(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)},r.prototype.setWorldExtent=function(e){this.worldExtent_=e},r.prototype.setGetPointResolution=function(e){this.getPointResolutionFunc_=e},r.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},r}(),Hc=K_;function Ce(r,e,t){return Math.min(Math.max(r,e),t)}var q_=function(){var r;return"cosh"in Math?r=Math.cosh:r=function(e){var t=Math.exp(e);return(t+1/t)/2},r}(),Z_=function(){var r;return"log2"in Math?r=Math.log2:r=function(e){return Math.log(e)*Math.LOG2E},r}();function J_(r,e,t,n,i,o){var a=i-t,l=o-n;if(a!==0||l!==0){var u=((r-t)*a+(e-n)*l)/(a*a+l*l);u>1?(t=i,n=o):u>0&&(t+=a*u,n+=l*u)}return ai(r,e,t,n)}function ai(r,e,t,n){var i=t-r,o=n-e;return i*i+o*o}function Q_(r){for(var e=r.length,t=0;t<e;t++){for(var n=t,i=Math.abs(r[t][t]),o=t+1;o<e;o++){var a=Math.abs(r[o][t]);a>i&&(i=a,n=o)}if(i===0)return null;var l=r[n];r[n]=r[t],r[t]=l;for(var u=t+1;u<e;u++)for(var h=-r[u][t]/r[t][t],c=t;c<e+1;c++)t==c?r[u][c]=0:r[u][c]+=h*r[t][c]}for(var _=new Array(e),v=e-1;v>=0;v--){_[v]=r[v][e]/r[v][v];for(var T=v-1;T>=0;T--)r[T][e]-=r[T][v]*_[v]}return _}function La(r){return r*Math.PI/180}function Ai(r,e){var t=r%e;return t*e<0?t+e:t}function Qn(r,e,t){return r+t*(e-r)}function Xc(r,e){var t=Math.pow(10,e);return Math.round(r*t)/t}function da(r,e){return Math.floor(Xc(r,e))}function pa(r,e){return Math.ceil(Xc(r,e))}var ty=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Uo=6378137,Ii=Math.PI*Uo,ey=[-Ii,-Ii,Ii,Ii],ny=[-180,-85,180,85],ga=Uo*Math.log(Math.tan(Math.PI/2)),gi=function(r){ty(e,r);function e(t){return r.call(this,{code:t,units:Or.METERS,extent:ey,global:!0,worldExtent:ny,getPointResolution:function(n,i){return n/q_(i[1]/Uo)}})||this}return e}(Hc),Jf=[new gi("EPSG:3857"),new gi("EPSG:102100"),new gi("EPSG:102113"),new gi("EPSG:900913"),new gi("http://www.opengis.net/def/crs/EPSG/0/3857"),new gi("http://www.opengis.net/gml/srs/epsg.xml#3857")];function ry(r,e,t){var n=r.length,i=t>1?t:2,o=e;o===void 0&&(i>2?o=r.slice():o=new Array(n));for(var a=0;a<n;a+=i){o[a]=Ii*r[a]/180;var l=Uo*Math.log(Math.tan(Math.PI*(+r[a+1]+90)/360));l>ga?l=ga:l<-ga&&(l=-ga),o[a+1]=l}return o}function iy(r,e,t){var n=r.length,i=t>1?t:2,o=e;o===void 0&&(i>2?o=r.slice():o=new Array(n));for(var a=0;a<n;a+=i)o[a]=180*r[a]/Ii,o[a+1]=360*Math.atan(Math.exp(r[a+1]/Uo))/Math.PI-90;return o}var oy=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ay=6378137,Qf=[-180,-90,180,90],sy=Math.PI*ay/180,$r=function(r){oy(e,r);function e(t,n){return r.call(this,{code:t,units:Or.DEGREES,extent:Qf,axisOrientation:n,global:!0,metersPerUnit:sy,worldExtent:Qf})||this}return e}(Hc),th=[new $r("CRS:84"),new $r("EPSG:4326","neu"),new $r("urn:ogc:def:crs:OGC:1.3:CRS84"),new $r("urn:ogc:def:crs:OGC:2:84"),new $r("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new $r("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new $r("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],Sl={};function ly(r){return Sl[r]||Sl[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function uy(r,e){Sl[r]=e}var bi={};function Wa(r,e,t){var n=r.getCode(),i=e.getCode();n in bi||(bi[n]={}),bi[n][i]=t}function fy(r,e){var t;return r in bi&&e in bi[r]&&(t=bi[r][e]),t}var ho={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},Pe={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16},hy=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),cy=function(r){hy(e,r);function e(t){var n=this,i="v"+$_.split("-")[0],o="Assertion failed. See https://openlayers.org/en/"+i+"/doc/errors/#"+t+" for details.";return n=r.call(this,o)||this,n.code=t,n.name="AssertionError",n.message=o,n}return e}(Error),$c=cy;function Ht(r,e){if(!r)throw new $c(e)}function eh(r){for(var e=pn(),t=0,n=r.length;t<n;++t)Eo(e,r[t]);return e}function vu(r,e,t){return t?(t[0]=r[0]-e,t[1]=r[1]-e,t[2]=r[2]+e,t[3]=r[3]+e,t):[r[0]-e,r[1]-e,r[2]+e,r[3]+e]}function zc(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r.slice()}function Hi(r,e,t){var n,i;return e<r[0]?n=r[0]-e:r[2]<e?n=e-r[2]:n=0,t<r[1]?i=r[1]-t:r[3]<t?i=t-r[3]:i=0,n*n+i*i}function Yo(r,e){return _u(r,e[0],e[1])}function Ri(r,e){return r[0]<=e[0]&&e[2]<=r[2]&&r[1]<=e[1]&&e[3]<=r[3]}function _u(r,e,t){return r[0]<=e&&e<=r[2]&&r[1]<=t&&t<=r[3]}function Pl(r,e){var t=r[0],n=r[1],i=r[2],o=r[3],a=e[0],l=e[1],u=Pe.UNKNOWN;return a<t?u=u|Pe.LEFT:a>i&&(u=u|Pe.RIGHT),l<n?u=u|Pe.BELOW:l>o&&(u=u|Pe.ABOVE),u===Pe.UNKNOWN&&(u=Pe.INTERSECTING),u}function pn(){return[1/0,1/0,-1/0,-1/0]}function jn(r,e,t,n,i){return i?(i[0]=r,i[1]=e,i[2]=t,i[3]=n,i):[r,e,t,n]}function ds(r){return jn(1/0,1/0,-1/0,-1/0,r)}function dy(r,e){var t=r[0],n=r[1];return jn(t,n,t,n,e)}function Vc(r,e,t,n,i){var o=ds(i);return Kc(o,r,e,t,n)}function Lo(r,e){return r[0]==e[0]&&r[2]==e[2]&&r[1]==e[1]&&r[3]==e[3]}function py(r,e){return e[0]<r[0]&&(r[0]=e[0]),e[2]>r[2]&&(r[2]=e[2]),e[1]<r[1]&&(r[1]=e[1]),e[3]>r[3]&&(r[3]=e[3]),r}function Eo(r,e){e[0]<r[0]&&(r[0]=e[0]),e[0]>r[2]&&(r[2]=e[0]),e[1]<r[1]&&(r[1]=e[1]),e[1]>r[3]&&(r[3]=e[1])}function Kc(r,e,t,n,i){for(;t<n;t+=i)gy(r,e[t],e[t+1]);return r}function gy(r,e,t){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}function yu(r,e){var t;return t=e(ps(r)),t||(t=e(gs(r)),t)||(t=e(vs(r)),t)||(t=e(ci(r)),t)?t:!1}function Ll(r){var e=0;return mu(r)||(e=ye(r)*Rn(r)),e}function ps(r){return[r[0],r[1]]}function gs(r){return[r[2],r[1]]}function ki(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function vy(r,e){var t;return e===ho.BOTTOM_LEFT?t=ps(r):e===ho.BOTTOM_RIGHT?t=gs(r):e===ho.TOP_LEFT?t=ci(r):e===ho.TOP_RIGHT?t=vs(r):Ht(!1,13),t}function Al(r,e,t,n,i){var o=e*n[0]/2,a=e*n[1]/2,l=Math.cos(t),u=Math.sin(t),h=o*l,c=o*u,_=a*l,v=a*u,T=r[0],E=r[1],w=T-h+v,L=T-h-v,P=T+h-v,F=T+h+v,D=E-c-_,k=E-c+_,$=E+c+_,p=E+c-_;return jn(Math.min(w,L,P,F),Math.min(D,k,$,p),Math.max(w,L,P,F),Math.max(D,k,$,p),i)}function Rn(r){return r[3]-r[1]}function Co(r,e,t){var n=t||pn();return $e(r,e)?(r[0]>e[0]?n[0]=r[0]:n[0]=e[0],r[1]>e[1]?n[1]=r[1]:n[1]=e[1],r[2]<e[2]?n[2]=r[2]:n[2]=e[2],r[3]<e[3]?n[3]=r[3]:n[3]=e[3]):ds(n),n}function ci(r){return[r[0],r[3]]}function vs(r){return[r[2],r[3]]}function ye(r){return r[2]-r[0]}function $e(r,e){return r[0]<=e[2]&&r[2]>=e[0]&&r[1]<=e[3]&&r[3]>=e[1]}function mu(r){return r[2]<r[0]||r[3]<r[1]}function _y(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r}function yy(r,e,t){var n=!1,i=Pl(r,e),o=Pl(r,t);if(i===Pe.INTERSECTING||o===Pe.INTERSECTING)n=!0;else{var a=r[0],l=r[1],u=r[2],h=r[3],c=e[0],_=e[1],v=t[0],T=t[1],E=(T-_)/(v-c),w=void 0,L=void 0;!!(o&Pe.ABOVE)&&!(i&Pe.ABOVE)&&(w=v-(T-h)/E,n=w>=a&&w<=u),!n&&!!(o&Pe.RIGHT)&&!(i&Pe.RIGHT)&&(L=T-(v-u)*E,n=L>=l&&L<=h),!n&&!!(o&Pe.BELOW)&&!(i&Pe.BELOW)&&(w=v-(T-l)/E,n=w>=a&&w<=u),!n&&!!(o&Pe.LEFT)&&!(i&Pe.LEFT)&&(L=T-(v-a)*E,n=L>=l&&L<=h)}return n}function my(r,e){var t=e.getExtent(),n=ki(r);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){var i=ye(t),o=Math.floor((n[0]-t[0])/i),a=o*i;r[0]-=a,r[2]-=a}return r}function Ty(r,e){return r[0]+=+e[0],r[1]+=+e[1],r}function Ba(r,e){for(var t=!0,n=r.length-1;n>=0;--n)if(r[n]!=e[n]){t=!1;break}return t}function Tu(r,e){var t=Math.cos(e),n=Math.sin(e),i=r[0]*t-r[1]*n,o=r[1]*t+r[0]*n;return r[0]=i,r[1]=o,r}function Ey(r,e){return r[0]*=e,r[1]*=e,r}function Cy(r,e){var t=r[0]-e[0],n=r[1]-e[1];return t*t+n*n}function qc(r,e){if(e.canWrapX()){var t=ye(e.getExtent()),n=xy(r,e,t);n&&(r[0]-=n*t)}return r}function xy(r,e,t){var n=e.getExtent(),i=0;if(e.canWrapX()&&(r[0]<n[0]||r[0]>n[2])){var o=t||ye(n);i=Math.floor((r[0]-n[0])/o)}return i}var wy=63710088e-1;function nh(r,e,t){var n=t||wy,i=La(r[1]),o=La(e[1]),a=(o-i)/2,l=La(e[0]-r[0])/2,u=Math.sin(a)*Math.sin(a)+Math.sin(l)*Math.sin(l)*Math.cos(i)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}var bl=!0;function Oy(r){var e=r===void 0?!0:r;bl=!e}function Eu(r,e,t){var n;if(e!==void 0){for(var i=0,o=r.length;i<o;++i)e[i]=r[i];n=e}else n=r.slice();return n}function Zc(r,e,t){if(e!==void 0&&r!==e){for(var n=0,i=r.length;n<i;++n)e[n]=r[n];r=e}return r}function Iy(r){uy(r.getCode(),r),Wa(r,r,Eu)}function Ry(r){r.forEach(Iy)}function Sn(r){return typeof r=="string"?ly(r):r||null}function rh(r,e,t,n){r=Sn(r);var i,o=r.getPointResolutionFunc();if(o){if(i=o(e,t),n&&n!==r.getUnits()){var a=r.getMetersPerUnit();a&&(i=i*a/Gn[n])}}else{var l=r.getUnits();if(l==Or.DEGREES&&!n||n==Or.DEGREES)i=e;else{var u=xu(r,Sn("EPSG:4326"));if(u===Zc&&l!==Or.DEGREES)i=e*r.getMetersPerUnit();else{var h=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];h=u(h,h,2);var c=nh(h.slice(0,2),h.slice(2,4)),_=nh(h.slice(4,6),h.slice(6,8));i=(c+_)/2}var a=n?Gn[n]:r.getMetersPerUnit();a!==void 0&&(i/=a)}}return i}function ih(r){Ry(r),r.forEach(function(e){r.forEach(function(t){e!==t&&Wa(e,t,Eu)})})}function Sy(r,e,t,n){r.forEach(function(i){e.forEach(function(o){Wa(i,o,t),Wa(o,i,n)})})}function Cu(r,e){return r?typeof r=="string"?Sn(r):r:Sn(e)}function Ei(r,e){if(r===e)return!0;var t=r.getUnits()===e.getUnits();if(r.getCode()===e.getCode())return t;var n=xu(r,e);return n===Eu&&t}function xu(r,e){var t=r.getCode(),n=e.getCode(),i=fy(t,n);return i||(i=Zc),i}function Ua(r,e){var t=Sn(r),n=Sn(e);return xu(t,n)}function Jc(r,e,t){var n=Ua(e,t);return n(r,void 0,r.length)}var Py=null;function Ly(){return Py}function Ml(r,e){return r}function En(r,e){return bl&&!Ba(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(bl=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r}function Qc(r,e){return r}function Qr(r,e){return r}function Ay(){ih(Jf),ih(th),Sy(th,Jf,ry,iy)}Ay();function oh(r,e,t){return function(n,i,o,a,l){if(!!n){if(!i&&!e)return n;var u=e?0:o[0]*i,h=e?0:o[1]*i,c=l?l[0]:0,_=l?l[1]:0,v=r[0]+u/2+c,T=r[2]-u/2+c,E=r[1]+h/2+_,w=r[3]-h/2+_;v>T&&(v=(T+v)/2,T=v),E>w&&(E=(w+E)/2,w=E);var L=Ce(n[0],v,T),P=Ce(n[1],E,w);if(a&&t&&i){var F=30*i;L+=-F*Math.log(1+Math.max(0,v-n[0])/F)+F*Math.log(1+Math.max(0,n[0]-T)/F),P+=-F*Math.log(1+Math.max(0,E-n[1])/F)+F*Math.log(1+Math.max(0,n[1]-w)/F)}return[L,P]}}}function by(r){return r}function wu(r,e,t,n){var i=ye(e)/t[0],o=Rn(e)/t[1];return n?Math.min(r,Math.max(i,o)):Math.min(r,Math.min(i,o))}function Ou(r,e,t){var n=Math.min(r,e),i=50;return n*=Math.log(1+i*Math.max(0,r/e-1))/i+1,t&&(n=Math.max(n,t),n/=Math.log(1+i*Math.max(0,t/r-1))/i+1),Ce(n,t/2,e*2)}function My(r,e,t,n){return function(i,o,a,l){if(i!==void 0){var u=r[0],h=r[r.length-1],c=t?wu(u,t,a,n):u;if(l){var _=e!==void 0?e:!0;return _?Ou(i,c,h):Ce(i,h,c)}var v=Math.min(c,i),T=Math.floor(pu(r,v,o));return r[T]>c&&T<r.length-1?r[T+1]:r[T]}else return}}function Dy(r,e,t,n,i,o){return function(a,l,u,h){if(a!==void 0){var c=i?wu(e,i,u,o):e,_=t!==void 0?t:0;if(h){var v=n!==void 0?n:!0;return v?Ou(a,c,_):Ce(a,_,c)}var T=1e-9,E=Math.ceil(Math.log(e/c)/Math.log(r)-T),w=-l*(.5-T)+.5,L=Math.min(c,a),P=Math.floor(Math.log(e/L)/Math.log(r)+w),F=Math.max(E,P),D=e/Math.pow(r,F);return Ce(D,_,c)}else return}}function ah(r,e,t,n,i){return function(o,a,l,u){if(o!==void 0){var h=n?wu(r,n,l,i):r,c=t!==void 0?t:!0;return!c||!u?Ce(o,e,h):Ou(o,h,e)}else return}}function Iu(r){if(r!==void 0)return 0}function sh(r){if(r!==void 0)return r}function Ny(r){var e=2*Math.PI/r;return function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function Fy(r){var e=r||La(5);return function(t,n){if(n)return t;if(t!==void 0)return Math.abs(t)<=e?0:t}}function td(r){return Math.pow(r,3)}function Xi(r){return 1-td(1-r)}function ky(r){return 3*r*r-2*r*r*r}function Gy(r){return r}var me={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"},Pr=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",jy=Pr.indexOf("firefox")!==-1,Wy=Pr.indexOf("safari")!==-1&&Pr.indexOf("chrom")==-1;Wy&&(Pr.indexOf("version/15.4")>=0||Pr.match(/cpu (os|iphone os) 15_4 like mac os x/));var By=Pr.indexOf("webkit")!==-1&&Pr.indexOf("edge")==-1,Uy=Pr.indexOf("macintosh")!==-1,ed=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,_s=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,Yy=typeof Image!="undefined"&&Image.prototype.decode,nd=function(){var r=!1;try{var e=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return r}();new Array(6);function Fn(){return[1,0,0,1,0,0]}function Hy(r,e,t,n,i,o,a){return r[0]=e,r[1]=t,r[2]=n,r[3]=i,r[4]=o,r[5]=a,r}function Xy(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r}function Ee(r,e){var t=e[0],n=e[1];return e[0]=r[0]*t+r[2]*n+r[4],e[1]=r[1]*t+r[3]*n+r[5],e}function $y(r,e,t){return Hy(r,e,0,0,t,0,0)}function ir(r,e,t,n,i,o,a,l){var u=Math.sin(o),h=Math.cos(o);return r[0]=n*h,r[1]=i*u,r[2]=-n*u,r[3]=i*h,r[4]=a*n*h-l*n*u+e,r[5]=a*i*u+l*i*h+t,r}function Ru(r,e){var t=zy(e);Ht(t!==0,32);var n=e[0],i=e[1],o=e[2],a=e[3],l=e[4],u=e[5];return r[0]=a/t,r[1]=-i/t,r[2]=-o/t,r[3]=n/t,r[4]=(o*u-a*l)/t,r[5]=-(n*u-i*l)/t,r}function zy(r){return r[0]*r[3]-r[1]*r[2]}var lh;function rd(r){var e="matrix("+r.join(", ")+")";if(_s)return e;var t=lh||(lh=document.createElement("div"));return t.style.transform=e,t.style.transform}function si(r,e,t,n,i,o){for(var a=o||[],l=0,u=e;u<t;u+=n){var h=r[u],c=r[u+1];a[l++]=i[0]*h+i[2]*c+i[4],a[l++]=i[1]*h+i[3]*c+i[5]}return o&&a.length!=l&&(a.length=l),a}function Su(r,e,t,n,i,o,a){for(var l=a||[],u=Math.cos(i),h=Math.sin(i),c=o[0],_=o[1],v=0,T=e;T<t;T+=n){var E=r[T]-c,w=r[T+1]-_;l[v++]=c+E*u-w*h,l[v++]=_+E*h+w*u;for(var L=T+2;L<T+n;++L)l[v++]=r[L]}return a&&l.length!=v&&(l.length=v),l}function Vy(r,e,t,n,i,o,a,l){for(var u=l||[],h=a[0],c=a[1],_=0,v=e;v<t;v+=n){var T=r[v]-h,E=r[v+1]-c;u[_++]=h+i*T,u[_++]=c+o*E;for(var w=v+2;w<v+n;++w)u[_++]=r[w]}return l&&u.length!=_&&(u.length=_),u}function id(r,e,t,n,i,o,a){for(var l=a||[],u=0,h=e;h<t;h+=n){l[u++]=r[h]+i,l[u++]=r[h+1]+o;for(var c=h+2;c<h+n;++c)l[u++]=r[c]}return a&&l.length!=u&&(l.length=u),l}var Ky=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),uh=Fn(),qy=function(r){Ky(e,r);function e(){var t=r.call(this)||this;return t.extent_=pn(),t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=W_(function(n,i,o){if(!o)return this.getSimplifiedGeometry(i);var a=this.clone();return a.applyTransform(o),a.getSimplifiedGeometry(i)}),t}return e.prototype.simplifyTransformed=function(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)},e.prototype.clone=function(){return Yt()},e.prototype.closestPointXY=function(t,n,i,o){return Yt()},e.prototype.containsXY=function(t,n){var i=this.getClosestPoint([t,n]);return i[0]===t&&i[1]===n},e.prototype.getClosestPoint=function(t,n){var i=n||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return Yt()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&ds(n),this.extentRevision_=this.getRevision()}return _y(this.extent_,t)},e.prototype.rotate=function(t,n){Yt()},e.prototype.scale=function(t,n,i){Yt()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return Yt()},e.prototype.getType=function(){return Yt()},e.prototype.applyTransform=function(t){Yt()},e.prototype.intersectsExtent=function(t){return Yt()},e.prototype.translate=function(t,n){Yt()},e.prototype.transform=function(t,n){var i=Sn(t),o=i.getUnits()==Or.TILE_PIXELS?function(a,l,u){var h=i.getExtent(),c=i.getWorldExtent(),_=Rn(c)/Rn(h);return ir(uh,c[0],c[3],_,-_,0,0,0),si(a,0,a.length,u,uh,l),Ua(i,n)(a,l,u)}:Ua(i,n);return this.applyTransform(o),this},e}(Un),Zy=qy,Jy=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qy=function(r){Jy(e,r);function e(){var t=r.call(this)||this;return t.layout=me.XY,t.stride=2,t.flatCoordinates=null,t}return e.prototype.computeExtent=function(t){return Vc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return Yt()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(t),i=n.getFlatCoordinates();return i.length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,n){this.stride=fh(t),this.layout=t,this.flatCoordinates=n},e.prototype.setCoordinates=function(t,n){Yt()},e.prototype.setLayout=function(t,n,i){var o;if(t)o=fh(t);else{for(var a=0;a<i;++a)if(n.length===0){this.layout=me.XY,this.stride=2;return}else n=n[0];o=n.length,t=tm(o)}this.layout=t,this.stride=o},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,n){var i=this.getFlatCoordinates();if(i){var o=this.getStride();Su(i,0,i.length,o,t,n,i),this.changed()}},e.prototype.scale=function(t,n,i){var o=n;o===void 0&&(o=t);var a=i;a||(a=ki(this.getExtent()));var l=this.getFlatCoordinates();if(l){var u=this.getStride();Vy(l,0,l.length,u,t,o,a,l),this.changed()}},e.prototype.translate=function(t,n){var i=this.getFlatCoordinates();if(i){var o=this.getStride();id(i,0,i.length,o,t,n,i),this.changed()}},e}(Zy);function tm(r){var e;return r==2?e=me.XY:r==3?e=me.XYZ:r==4&&(e=me.XYZM),e}function fh(r){var e;return r==me.XY?e=2:r==me.XYZ||r==me.XYM?e=3:r==me.XYZM&&(e=4),e}function em(r,e,t){var n=r.getFlatCoordinates();if(n){var i=r.getStride();return si(n,0,n.length,i,e,t)}else return null}var Lr=Qy;function hh(r,e,t,n,i,o,a){var l=r[e],u=r[e+1],h=r[t]-l,c=r[t+1]-u,_;if(h===0&&c===0)_=e;else{var v=((i-l)*h+(o-u)*c)/(h*h+c*c);if(v>1)_=t;else if(v>0){for(var T=0;T<n;++T)a[T]=Qn(r[e+T],r[t+T],v);a.length=n;return}else _=e}for(var T=0;T<n;++T)a[T]=r[_+T];a.length=n}function Pu(r,e,t,n,i){var o=r[e],a=r[e+1];for(e+=n;e<t;e+=n){var l=r[e],u=r[e+1],h=ai(o,a,l,u);h>i&&(i=h),o=l,a=u}return i}function Lu(r,e,t,n,i){for(var o=0,a=t.length;o<a;++o){var l=t[o];i=Pu(r,e,l,n,i),e=l}return i}function nm(r,e,t,n,i){for(var o=0,a=t.length;o<a;++o){var l=t[o];i=Lu(r,e,l,n,i),e=l[l.length-1]}return i}function Au(r,e,t,n,i,o,a,l,u,h,c){if(e==t)return h;var _,v;if(i===0)if(v=ai(a,l,r[e],r[e+1]),v<h){for(_=0;_<n;++_)u[_]=r[e+_];return u.length=n,v}else return h;for(var T=c||[NaN,NaN],E=e+n;E<t;)if(hh(r,E-n,E,n,a,l,T),v=ai(a,l,T[0],T[1]),v<h){for(h=v,_=0;_<n;++_)u[_]=T[_];u.length=n,E+=n}else E+=n*Math.max((Math.sqrt(v)-Math.sqrt(h))/i|0,1);if(o&&(hh(r,t-n,e,n,a,l,T),v=ai(a,l,T[0],T[1]),v<h)){for(h=v,_=0;_<n;++_)u[_]=T[_];u.length=n}return h}function bu(r,e,t,n,i,o,a,l,u,h,c){for(var _=c||[NaN,NaN],v=0,T=t.length;v<T;++v){var E=t[v];h=Au(r,e,E,n,i,o,a,l,u,h,_),e=E}return h}function rm(r,e,t,n,i,o,a,l,u,h,c){for(var _=c||[NaN,NaN],v=0,T=t.length;v<T;++v){var E=t[v];h=bu(r,e,E,n,i,o,a,l,u,h,_),e=E[E.length-1]}return h}function od(r,e,t,n){for(var i=0,o=t.length;i<o;++i)r[e++]=t[i];return e}function ys(r,e,t,n){for(var i=0,o=t.length;i<o;++i)for(var a=t[i],l=0;l<n;++l)r[e++]=a[l];return e}function Mu(r,e,t,n,i){for(var o=i||[],a=0,l=0,u=t.length;l<u;++l){var h=ys(r,e,t[l],n);o[a++]=h,e=h}return o.length=a,o}function im(r,e,t,n,i){for(var o=i||[],a=0,l=0,u=t.length;l<u;++l){var h=Mu(r,e,t[l],n,o[a]);o[a++]=h,e=h[h.length-1]}return o.length=a,o}function Du(r,e,t,n,i,o,a){var l=(t-e)/n;if(l<3){for(;e<t;e+=n)o[a++]=r[e],o[a++]=r[e+1];return a}var u=new Array(l);u[0]=1,u[l-1]=1;for(var h=[e,t-n],c=0;h.length>0;){for(var _=h.pop(),v=h.pop(),T=0,E=r[v],w=r[v+1],L=r[_],P=r[_+1],F=v+n;F<_;F+=n){var D=r[F],k=r[F+1],$=J_(D,k,E,w,L,P);$>T&&(c=F,T=$)}T>i&&(u[(c-e)/n]=1,v+n<c&&h.push(v,c),c+n<_&&h.push(c,_))}for(var F=0;F<l;++F)u[F]&&(o[a++]=r[e+F*n],o[a++]=r[e+F*n+1]);return a}function om(r,e,t,n,i,o,a,l){for(var u=0,h=t.length;u<h;++u){var c=t[u];a=Du(r,e,c,n,i,o,a),l.push(a),e=c}return a}function Kr(r,e){return e*Math.round(r/e)}function am(r,e,t,n,i,o,a){if(e==t)return a;var l=Kr(r[e],i),u=Kr(r[e+1],i);e+=n,o[a++]=l,o[a++]=u;var h,c;do if(h=Kr(r[e],i),c=Kr(r[e+1],i),e+=n,e==t)return o[a++]=h,o[a++]=c,a;while(h==l&&c==u);for(;e<t;){var _=Kr(r[e],i),v=Kr(r[e+1],i);if(e+=n,!(_==h&&v==c)){var T=h-l,E=c-u,w=_-l,L=v-u;if(T*L==E*w&&(T<0&&w<T||T==w||T>0&&w>T)&&(E<0&&L<E||E==L||E>0&&L>E)){h=_,c=v;continue}o[a++]=h,o[a++]=c,l=h,u=c,h=_,c=v}}return o[a++]=h,o[a++]=c,a}function ad(r,e,t,n,i,o,a,l){for(var u=0,h=t.length;u<h;++u){var c=t[u];a=am(r,e,c,n,i,o,a),l.push(a),e=c}return a}function sm(r,e,t,n,i,o,a,l){for(var u=0,h=t.length;u<h;++u){var c=t[u],_=[];a=ad(r,e,c,n,i,o,a,_),l.push(_),e=c[c.length-1]}return a}function Er(r,e,t,n,i){for(var o=i!==void 0?i:[],a=0,l=e;l<t;l+=n)o[a++]=r.slice(l,l+n);return o.length=a,o}function Ao(r,e,t,n,i){for(var o=i!==void 0?i:[],a=0,l=0,u=t.length;l<u;++l){var h=t[l];o[a++]=Er(r,e,h,n,o[a]),e=h}return o.length=a,o}function Dl(r,e,t,n,i){for(var o=i!==void 0?i:[],a=0,l=0,u=t.length;l<u;++l){var h=t[l];o[a++]=Ao(r,e,h,n,o[a]),e=h[h.length-1]}return o.length=a,o}function sd(r,e,t,n){for(var i=0,o=r[t-n],a=r[t-n+1];e<t;e+=n){var l=r[e],u=r[e+1];i+=a*l-o*u,o=l,a=u}return i/2}function ld(r,e,t,n){for(var i=0,o=0,a=t.length;o<a;++o){var l=t[o];i+=sd(r,e,l,n),e=l}return i}function lm(r,e,t,n){for(var i=0,o=0,a=t.length;o<a;++o){var l=t[o];i+=ld(r,e,l,n),e=l[l.length-1]}return i}var um=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fm=function(r){um(e,r);function e(t,n){var i=r.call(this)||this;return i.maxDelta_=-1,i.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?i.setFlatCoordinates(n,t):i.setCoordinates(t,n),i}return e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,n,i,o){return o<Hi(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Pu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Au(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,n,i,o))},e.prototype.getArea=function(){return sd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Er(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=Du(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,me.XY)},e.prototype.getType=function(){return ft.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ys(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Lr),ch=fm,hm=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),cm=function(r){hm(e,r);function e(t,n){var i=r.call(this)||this;return i.setCoordinates(t,n),i}return e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){var a=this.flatCoordinates,l=ai(t,n,a[0],a[1]);if(l<o){for(var u=this.stride,h=0;h<u;++h)i[h]=a[h];return i.length=u,l}else return o},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return dy(this.flatCoordinates,t)},e.prototype.getType=function(){return ft.POINT},e.prototype.intersectsExtent=function(t){return _u(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=od(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Lr),Mi=cm;function dm(r,e,t,n,i){var o=yu(i,function(a){return!ti(r,e,t,n,a[0],a[1])});return!o}function ti(r,e,t,n,i,o){for(var a=0,l=r[t-n],u=r[t-n+1];e<t;e+=n){var h=r[e],c=r[e+1];u<=o?c>o&&(h-l)*(o-u)-(i-l)*(c-u)>0&&a++:c<=o&&(h-l)*(o-u)-(i-l)*(c-u)<0&&a--,l=h,u=c}return a!==0}function Nu(r,e,t,n,i,o){if(t.length===0||!ti(r,e,t[0],n,i,o))return!1;for(var a=1,l=t.length;a<l;++a)if(ti(r,t[a-1],t[a],n,i,o))return!1;return!0}function pm(r,e,t,n,i,o){if(t.length===0)return!1;for(var a=0,l=t.length;a<l;++a){var u=t[a];if(Nu(r,e,u,n,i,o))return!0;e=u[u.length-1]}return!1}function ud(r,e,t,n,i,o,a){for(var l,u,h,c,_,v,T,E=i[o+1],w=[],L=0,P=t.length;L<P;++L){var F=t[L];for(c=r[F-n],v=r[F-n+1],l=e;l<F;l+=n)_=r[l],T=r[l+1],(E<=v&&T<=E||v<=E&&E<=T)&&(h=(E-v)/(T-v)*(_-c)+c,w.push(h)),c=_,v=T}var D=NaN,k=-1/0;for(w.sort(li),c=w[0],l=1,u=w.length;l<u;++l){_=w[l];var $=Math.abs(_-c);$>k&&(h=(c+_)/2,Nu(r,e,t,n,h,E)&&(D=h,k=$)),c=_}return isNaN(D)&&(D=i[o]),a?(a.push(D,E,k),a):[D,E,k]}function gm(r,e,t,n,i){for(var o=[],a=0,l=t.length;a<l;++a){var u=t[a];o=ud(r,e,u,n,i,2*a,o),e=u[u.length-1]}return o}function fd(r,e,t,n,i){var o;for(e+=n;e<t;e+=n)if(o=i(r.slice(e-n,e),r.slice(e,e+n)),o)return o;return!1}function ms(r,e,t,n,i){var o=Kc(pn(),r,e,t,n);return $e(i,o)?Ri(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]?!0:fd(r,e,t,n,function(a,l){return yy(i,a,l)}):!1}function vm(r,e,t,n,i){for(var o=0,a=t.length;o<a;++o){if(ms(r,e,t[o],n,i))return!0;e=t[o]}return!1}function _m(r,e,t,n,i){return!!(ms(r,e,t,n,i)||ti(r,e,t,n,i[0],i[1])||ti(r,e,t,n,i[0],i[3])||ti(r,e,t,n,i[2],i[1])||ti(r,e,t,n,i[2],i[3]))}function hd(r,e,t,n,i){if(!_m(r,e,t[0],n,i))return!1;if(t.length===1)return!0;for(var o=1,a=t.length;o<a;++o)if(dm(r,t[o-1],t[o],n,i)&&!ms(r,t[o-1],t[o],n,i))return!1;return!0}function ym(r,e,t,n,i){for(var o=0,a=t.length;o<a;++o){var l=t[o];if(hd(r,e,l,n,i))return!0;e=l[l.length-1]}return!1}function mm(r,e,t,n){for(;e<t-n;){for(var i=0;i<n;++i){var o=r[e+i];r[e+i]=r[t-n+i],r[t-n+i]=o}e+=n,t-=n}}function cd(r,e,t,n){for(var i=0,o=r[t-n],a=r[t-n+1];e<t;e+=n){var l=r[e],u=r[e+1];i+=(l-o)*(u+a),o=l,a=u}return i===0?void 0:i>0}function dd(r,e,t,n,i){for(var o=i!==void 0?i:!1,a=0,l=t.length;a<l;++a){var u=t[a],h=cd(r,e,u,n);if(a===0){if(o&&h||!o&&!h)return!1}else if(o&&!h||!o&&h)return!1;e=u}return!0}function Tm(r,e,t,n,i){for(var o=0,a=t.length;o<a;++o){var l=t[o];if(!dd(r,e,l,n,i))return!1;l.length&&(e=l[l.length-1])}return!0}function Nl(r,e,t,n,i){for(var o=i!==void 0?i:!1,a=0,l=t.length;a<l;++a){var u=t[a],h=cd(r,e,u,n),c=a===0?o&&h||!o&&!h:o&&!h||!o&&h;c&&mm(r,e,u,n),e=u}return e}function dh(r,e,t,n,i){for(var o=0,a=t.length;o<a;++o)e=Nl(r,e,t[o],n,i);return e}var Em=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bo=function(r){Em(e,r);function e(t,n,i){var o=r.call(this)||this;return o.ends_=[],o.flatInteriorPointRevision_=-1,o.flatInteriorPoint_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,n!==void 0&&i?(o.setFlatCoordinates(n,t),o.ends_=i):o.setCoordinates(t,n),o}return e.prototype.appendLinearRing=function(t){this.flatCoordinates?er(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){return o<Hi(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Lu(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),bu(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,n,i,o))},e.prototype.containsXY=function(t,n){return Nu(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,n)},e.prototype.getArea=function(){return ld(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),Nl(n,0,this.ends_,this.stride,t)):n=this.flatCoordinates,Ao(n,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=ki(this.getExtent());this.flatInteriorPoint_=ud(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Mi(this.getFlatInteriorPoint(),me.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new ch(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,n=this.flatCoordinates,i=this.ends_,o=[],a=0,l=0,u=i.length;l<u;++l){var h=i[l],c=new ch(n.slice(a,h),t);o.push(c),a=h}return o},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;dd(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Nl(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=ad(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,i),new e(n,me.XY,i)},e.prototype.getType=function(){return ft.POLYGON},e.prototype.intersectsExtent=function(t){return hd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Mu(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()},e}(Lr);function ph(r){var e=r[0],t=r[1],n=r[2],i=r[3],o=[e,t,e,i,n,i,n,t,e,t];return new bo(o,me.XY,[o.length])}var Cm=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qs=0,xm=function(r){Cm(e,r);function e(t){var n=r.call(this)||this;n.on,n.once,n.un;var i=Ae({},t);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=Cu(i.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.nextCenter_=null,n.nextResolution_,n.nextRotation_,n.cancelAnchor_=void 0,i.projection&&Oy(),i.center&&(i.center=En(i.center,n.projection_)),i.extent&&(i.extent=Qr(i.extent,n.projection_)),n.applyOptions_(i),n}return e.prototype.applyOptions_=function(t){var n=Ae({},t);for(var i in mn)delete n[i];this.setProperties(n,!0);var o=Om(t);this.maxResolution_=o.maxResolution,this.minResolution_=o.minResolution,this.zoomFactor_=o.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=o.minZoom;var a=wm(t),l=o.constraint,u=Im(t);this.constraints_={center:a,resolution:l,rotation:u},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)},Object.defineProperty(e.prototype,"padding",{get:function(){return this.padding_},set:function(t){var n=this.padding_;this.padding_=t;var i=this.getCenter();if(i){var o=t||[0,0,0,0];n=n||[0,0,0,0];var a=this.getResolution(),l=a/2*(o[3]-n[3]+n[1]-o[1]),u=a/2*(o[0]-n[0]+n[2]-o[2]);this.setCenterInternal([i[0]+l,i[1]-u])}},enumerable:!1,configurable:!0}),e.prototype.getUpdatedOptions_=function(t){var n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Ae({},n,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),i=0;i<n.length;++i){var o=arguments[i];o.center&&(o=Ae({},o),o.center=En(o.center,this.getProjection())),o.anchor&&(o=Ae({},o),o.anchor=En(o.anchor,this.getProjection())),n[i]=o}this.animateInternal.apply(this,n)},e.prototype.animateInternal=function(t){var n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);for(var o=0;o<n&&!this.isDef();++o){var a=arguments[o];a.center&&this.setCenterInternal(a.center),a.zoom!==void 0?this.setZoom(a.zoom):a.resolution&&this.setResolution(a.resolution),a.rotation!==void 0&&this.setRotation(a.rotation)}if(o===n){i&&va(i,!0);return}for(var l=Date.now(),u=this.targetCenter_.slice(),h=this.targetResolution_,c=this.targetRotation_,_=[];o<n;++o){var v=arguments[o],T={start:l,complete:!1,anchor:v.anchor,duration:v.duration!==void 0?v.duration:1e3,easing:v.easing||ky,callback:i};if(v.center&&(T.sourceCenter=u,T.targetCenter=v.center.slice(),u=T.targetCenter),v.zoom!==void 0?(T.sourceResolution=h,T.targetResolution=this.getResolutionForZoom(v.zoom),h=T.targetResolution):v.resolution&&(T.sourceResolution=h,T.targetResolution=v.resolution,h=T.targetResolution),v.rotation!==void 0){T.sourceRotation=c;var E=Ai(v.rotation-c+Math.PI,2*Math.PI)-Math.PI;T.targetRotation=c+E,c=T.targetRotation}Rm(T)?T.complete=!0:l+=T.duration,_.push(T)}this.animations_.push(_),this.setHint(je.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[je.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[je.INTERACTING]>0},e.prototype.cancelAnimations=function(){this.setHint(je.ANIMATING,-this.hints_[je.ANIMATING]);for(var t,n=0,i=this.animations_.length;n<i;++n){var o=this.animations_[n];if(o[0].callback&&va(o[0].callback,!1),!t)for(var a=0,l=o.length;a<l;++a){var u=o[a];if(!u.complete){t=u.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},e.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var t=Date.now(),n=!1,i=this.animations_.length-1;i>=0;--i){for(var o=this.animations_[i],a=!0,l=0,u=o.length;l<u;++l){var h=o[l];if(!h.complete){var c=t-h.start,_=h.duration>0?c/h.duration:1;_>=1?(h.complete=!0,_=1):a=!1;var v=h.easing(_);if(h.sourceCenter){var T=h.sourceCenter[0],E=h.sourceCenter[1],w=h.targetCenter[0],L=h.targetCenter[1];this.nextCenter_=h.targetCenter;var P=T+v*(w-T),F=E+v*(L-E);this.targetCenter_=[P,F]}if(h.sourceResolution&&h.targetResolution){var D=v===1?h.targetResolution:h.sourceResolution+v*(h.targetResolution-h.sourceResolution);if(h.anchor){var k=this.getViewportSize_(this.getRotation()),$=this.constraints_.resolution(D,0,k,!0);this.targetCenter_=this.calculateCenterZoom($,h.anchor)}this.nextResolution_=h.targetResolution,this.targetResolution_=D,this.applyTargetState_(!0)}if(h.sourceRotation!==void 0&&h.targetRotation!==void 0){var p=v===1?Ai(h.targetRotation+Math.PI,2*Math.PI)-Math.PI:h.sourceRotation+v*(h.targetRotation-h.sourceRotation);if(h.anchor){var tt=this.constraints_.rotation(p,!0);this.targetCenter_=this.calculateCenterRotate(tt,h.anchor)}this.nextRotation_=h.targetRotation,this.targetRotation_=p}if(this.applyTargetState_(!0),n=!0,!h.complete)break}}if(a){this.animations_[i]=null,this.setHint(je.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var Y=o[0].callback;Y&&va(Y,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,n){var i,o=this.getCenterInternal();return o!==void 0&&(i=[o[0]-n[0],o[1]-n[1]],Tu(i,t-this.getRotation()),Ty(i,n)),i},e.prototype.calculateCenterZoom=function(t,n){var i,o=this.getCenterInternal(),a=this.getResolution();if(o!==void 0&&a!==void 0){var l=n[0]-t*(n[0]-o[0])/a,u=n[1]-t*(n[1]-o[1])/a;i=[l,u]}return i},e.prototype.getViewportSize_=function(t){var n=this.viewportSize_;if(t){var i=n[0],o=n[1];return[Math.abs(i*Math.cos(t))+Math.abs(o*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(o*Math.cos(t))]}else return n},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t&&Ml(t,this.getProjection())},e.prototype.getCenterInternal=function(){return this.get(mn.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},e.prototype.getHints=function(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var n=this.calculateExtentInternal(t);return Qc(n,this.getProjection())},e.prototype.calculateExtentInternal=function(t){var n=t||this.getViewportSizeMinusPadding_(),i=this.getCenterInternal();Ht(i,1);var o=this.getResolution();Ht(o!==void 0,2);var a=this.getRotation();return Ht(a!==void 0,3),Al(i,o,a,n)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(mn.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,n){return this.getResolutionForExtentInternal(Qr(t,this.getProjection()),n)},e.prototype.getResolutionForExtentInternal=function(t,n){var i=n||this.getViewportSizeMinusPadding_(),o=ye(t)/i[0],a=Rn(t)/i[1];return Math.max(o,a)},e.prototype.getResolutionForValueFunction=function(t){var n=t||2,i=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,a=Math.log(i/o)/Math.log(n);return function(l){var u=i/Math.pow(n,l*a);return u}},e.prototype.getRotation=function(){return this.get(mn.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var n=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,a=Math.log(i/o)/n;return function(l){var u=Math.log(i/l)/n/a;return u}},e.prototype.getViewportSizeMinusPadding_=function(t){var n=this.getViewportSize_(t),i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n},e.prototype.getState=function(){var t=this.getProjection(),n=this.getResolution(),i=this.getRotation(),o=this.getCenterInternal(),a=this.padding_;if(a){var l=this.getViewportSizeMinusPadding_();o=tl(o,this.getViewportSize_(),[l[0]/2+a[3],l[1]/2+a[0]],n,i)}return{center:o.slice(0),projection:t!==void 0?t:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,n=this.getResolution();return n!==void 0&&(t=this.getZoomForResolution(n)),t},e.prototype.getZoomForResolution=function(t){var n=this.minZoom_||0,i,o;if(this.resolutions_){var a=pu(this.resolutions_,t,1);n=a,i=this.resolutions_[a],a==this.resolutions_.length-1?o=2:o=i/this.resolutions_[a+1]}else i=this.maxResolution_,o=this.zoomFactor_;return n+Math.log(i/t)/Math.log(o)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var n=Ce(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,Ce(t-n,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,n){var i;if(Ht(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){Ht(!mu(t),25);var o=Qr(t,this.getProjection());i=ph(o)}else if(t.getType()===ft.CIRCLE){var o=Qr(t.getExtent(),this.getProjection());i=ph(o),i.rotate(this.getRotation(),ki(o))}else{var a=Ly();a?i=t.clone().transform(a,this.getProjection()):i=t}this.fitInternal(i,n)},e.prototype.rotatedExtentForGeometry=function(t){for(var n=this.getRotation(),i=Math.cos(n),o=Math.sin(-n),a=t.getFlatCoordinates(),l=t.getStride(),u=1/0,h=1/0,c=-1/0,_=-1/0,v=0,T=a.length;v<T;v+=l){var E=a[v]*i-a[v+1]*o,w=a[v]*o+a[v+1]*i;u=Math.min(u,E),h=Math.min(h,w),c=Math.max(c,E),_=Math.max(_,w)}return[u,h,c,_]},e.prototype.fitInternal=function(t,n){var i=n||{},o=i.size;o||(o=this.getViewportSizeMinusPadding_());var a=i.padding!==void 0?i.padding:[0,0,0,0],l=i.nearest!==void 0?i.nearest:!1,u;i.minResolution!==void 0?u=i.minResolution:i.maxZoom!==void 0?u=this.getResolutionForZoom(i.maxZoom):u=0;var h=this.rotatedExtentForGeometry(t),c=this.getResolutionForExtentInternal(h,[o[0]-a[1]-a[3],o[1]-a[0]-a[2]]);c=isNaN(c)?u:Math.max(c,u),c=this.getConstrainedResolution(c,l?0:1);var _=this.getRotation(),v=Math.sin(_),T=Math.cos(_),E=ki(h);E[0]+=(a[1]-a[3])/2*c,E[1]+=(a[0]-a[2])/2*c;var w=E[0]*T-E[1]*v,L=E[1]*T+E[0]*v,P=this.getConstrainedCenter([w,L],c),F=i.callback?i.callback:ui;i.duration!==void 0?this.animateInternal({resolution:c,center:P,duration:i.duration,easing:i.easing},F):(this.targetResolution_=c,this.targetCenter_=P,this.applyTargetState_(!1,!0),va(F,!0))},e.prototype.centerOn=function(t,n,i){this.centerOnInternal(En(t,this.getProjection()),n,i)},e.prototype.centerOnInternal=function(t,n,i){this.setCenterInternal(tl(t,n,i,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function(t,n,i,o){var a,l=this.padding_;if(l&&t){var u=this.getViewportSizeMinusPadding_(-i),h=tl(t,o,[u[0]/2+l[3],u[1]/2+l[0]],n,i);a=[t[0]-h[0],t[1]-h[1]]}return a},e.prototype.isDef=function(){return!!this.getCenterInternal()&&this.getResolution()!==void 0},e.prototype.adjustCenter=function(t){var n=Ml(this.targetCenter_,this.getProjection());this.setCenter([n[0]+t[0],n[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var n=this.targetCenter_;this.setCenterInternal([n[0]+t[0],n[1]+t[1]])},e.prototype.adjustResolution=function(t,n){var i=n&&En(n,this.getProjection());this.adjustResolutionInternal(t,i)},e.prototype.adjustResolutionInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),a=this.constraints_.resolution(this.targetResolution_*t,0,o,i);n&&(this.targetCenter_=this.calculateCenterZoom(a,n)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,n){this.adjustResolution(Math.pow(this.zoomFactor_,-t),n)},e.prototype.adjustRotation=function(t,n){n&&(n=En(n,this.getProjection())),this.adjustRotationInternal(t,n)},e.prototype.adjustRotationInternal=function(t,n){var i=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+t,i);n&&(this.targetCenter_=this.calculateCenterRotate(o,n)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(t&&En(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,n){return this.hints_[t]+=n,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,n){var i=this.getAnimating()||this.getInteracting()||n,o=this.constraints_.rotation(this.targetRotation_,i),a=this.getViewportSize_(o),l=this.constraints_.resolution(this.targetResolution_,0,a,i),u=this.constraints_.center(this.targetCenter_,l,a,i,this.calculateCenterShift(this.targetCenter_,l,o,a));this.get(mn.ROTATION)!==o&&this.set(mn.ROTATION,o),this.get(mn.RESOLUTION)!==l&&(this.set(mn.RESOLUTION,l),this.set("zoom",this.getZoom(),!0)),(!u||!this.get(mn.CENTER)||!Ba(this.get(mn.CENTER),u))&&this.set(mn.CENTER,u),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,n,i){var o=t!==void 0?t:200,a=n||0,l=this.constraints_.rotation(this.targetRotation_),u=this.getViewportSize_(l),h=this.constraints_.resolution(this.targetResolution_,a,u),c=this.constraints_.center(this.targetCenter_,h,u,!1,this.calculateCenterShift(this.targetCenter_,h,l,u));if(o===0&&!this.cancelAnchor_){this.targetResolution_=h,this.targetRotation_=l,this.targetCenter_=c,this.applyTargetState_();return}var _=i||(o===0?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==h||this.getRotation()!==l||!this.getCenterInternal()||!Ba(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:l,center:c,resolution:h,duration:o,easing:Xi,anchor:_}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(je.INTERACTING,1)},e.prototype.endInteraction=function(t,n,i){var o=i&&En(i,this.getProjection());this.endInteractionInternal(t,n,o)},e.prototype.endInteractionInternal=function(t,n,i){this.setHint(je.INTERACTING,-1),this.resolveConstraints(t,n,i)},e.prototype.getConstrainedCenter=function(t,n){var i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,n||this.getResolution(),i)},e.prototype.getConstrainedZoom=function(t,n){var i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,n))},e.prototype.getConstrainedResolution=function(t,n){var i=n||0,o=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,i,o)},e}(Un);function va(r,e){setTimeout(function(){r(e)},0)}function wm(r){if(r.extent!==void 0){var e=r.smoothExtentConstraint!==void 0?r.smoothExtentConstraint:!0;return oh(r.extent,r.constrainOnlyCenter,e)}var t=Cu(r.projection,"EPSG:3857");if(r.multiWorld!==!0&&t.isGlobal()){var n=t.getExtent().slice();return n[0]=-1/0,n[2]=1/0,oh(n,!1,!1)}return by}function Om(r){var e,t,n,i=28,o=2,a=r.minZoom!==void 0?r.minZoom:Qs,l=r.maxZoom!==void 0?r.maxZoom:i,u=r.zoomFactor!==void 0?r.zoomFactor:o,h=r.multiWorld!==void 0?r.multiWorld:!1,c=r.smoothResolutionConstraint!==void 0?r.smoothResolutionConstraint:!0,_=r.showFullExtent!==void 0?r.showFullExtent:!1,v=Cu(r.projection,"EPSG:3857"),T=v.getExtent(),E=r.constrainOnlyCenter,w=r.extent;if(!h&&!w&&v.isGlobal()&&(E=!1,w=T),r.resolutions!==void 0){var L=r.resolutions;t=L[a],n=L[l]!==void 0?L[l]:L[L.length-1],r.constrainResolution?e=My(L,c,!E&&w,_):e=ah(t,n,c,!E&&w,_)}else{var P=T?Math.max(ye(T),Rn(T)):360*Gn[Or.DEGREES]/v.getMetersPerUnit(),F=P/gu/Math.pow(o,Qs),D=F/Math.pow(o,i-Qs);t=r.maxResolution,t!==void 0?a=0:t=F/Math.pow(u,a),n=r.minResolution,n===void 0&&(r.maxZoom!==void 0?r.maxResolution!==void 0?n=t/Math.pow(u,l):n=F/Math.pow(u,l):n=D),l=a+Math.floor(Math.log(t/n)/Math.log(u)),n=t/Math.pow(u,l-a),r.constrainResolution?e=Dy(u,t,n,c,!E&&w,_):e=ah(t,n,c,!E&&w,_)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:a,zoomFactor:u}}function Im(r){var e=r.enableRotation!==void 0?r.enableRotation:!0;if(e){var t=r.constrainRotation;return t===void 0||t===!0?Fy():t===!1?sh:typeof t=="number"?Ny(t):sh}else return Iu}function Rm(r){return!(r.sourceCenter&&r.targetCenter&&!Ba(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function tl(r,e,t,n,i){var o=Math.cos(-i),a=Math.sin(-i),l=r[0]*o-r[1]*a,u=r[1]*o+r[0]*a;l+=(e[0]/2-t[0])*n,u+=(t[1]-e[1]/2)*n,a=-a;var h=l*o-u*a,c=u*o+l*a;return[h,c]}var Tr=xm,Sm=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Pm=/^([a-z]*)$|^hsla?\(.*\)$/i;function pd(r){return typeof r=="string"?r:gd(r)}function Lm(r){var e=document.createElement("div");if(e.style.color=r,e.style.color!==""){document.body.appendChild(e);var t=getComputedStyle(e).color;return document.body.removeChild(e),t}else return""}var Am=function(){var r=1024,e={},t=0;return function(n){var i;if(e.hasOwnProperty(n))i=e[n];else{if(t>=r){var o=0;for(var a in e)(o++&3)===0&&(delete e[a],--t)}i=bm(n),e[n]=i,++t}return i}}();function Ya(r){return Array.isArray(r)?r:Am(r)}function bm(r){var e,t,n,i,o;if(Pm.exec(r)&&(r=Lm(r)),Sm.exec(r)){var a=r.length-1,l=void 0;a<=4?l=1:l=2;var u=a===4||a===8;e=parseInt(r.substr(1+0*l,l),16),t=parseInt(r.substr(1+1*l,l),16),n=parseInt(r.substr(1+2*l,l),16),u?i=parseInt(r.substr(1+3*l,l),16):i=255,l==1&&(e=(e<<4)+e,t=(t<<4)+t,n=(n<<4)+n,u&&(i=(i<<4)+i)),o=[e,t,n,i/255]}else r.indexOf("rgba(")==0?(o=r.slice(5,-1).split(",").map(Number),gh(o)):r.indexOf("rgb(")==0?(o=r.slice(4,-1).split(",").map(Number),o.push(1),gh(o)):Ht(!1,14);return o}function gh(r){return r[0]=Ce(r[0]+.5|0,0,255),r[1]=Ce(r[1]+.5|0,0,255),r[2]=Ce(r[2]+.5|0,0,255),r[3]=Ce(r[3],0,1),r}function gd(r){var e=r[0];e!=(e|0)&&(e=e+.5|0);var t=r[1];t!=(t|0)&&(t=t+.5|0);var n=r[2];n!=(n|0)&&(n=n+.5|0);var i=r[3]===void 0?1:Math.round(r[3]*100)/100;return"rgba("+e+","+t+","+n+","+i+")"}var Mm=function(){function r(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return r.prototype.clear=function(){this.cache_={},this.cacheSize_=0},r.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},r.prototype.expire=function(){if(this.canExpireCache()){var e=0;for(var t in this.cache_){var n=this.cache_[t];(e++&3)===0&&!n.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}},r.prototype.get=function(e,t,n){var i=vh(e,t,n);return i in this.cache_?this.cache_[i]:null},r.prototype.set=function(e,t,n,i){var o=vh(e,t,n);this.cache_[o]=i,++this.cacheSize_},r.prototype.setSize=function(e){this.maxCacheSize_=e,this.expire()},r}();function vh(r,e,t){var n=t?pd(t):"null";return e+":"+r+":"+n}var Ha=new Mm,Qt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"},Dm=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Nm=function(r){Dm(e,r);function e(t){var n=r.call(this)||this;n.on,n.once,n.un,n.background_=t.background;var i=Ae({},t);return typeof t.properties=="object"&&(delete i.properties,Ae(i,t.properties)),i[Qt.OPACITY]=t.opacity!==void 0?t.opacity:1,Ht(typeof i[Qt.OPACITY]=="number",64),i[Qt.VISIBLE]=t.visible!==void 0?t.visible:!0,i[Qt.Z_INDEX]=t.zIndex,i[Qt.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,i[Qt.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,i[Qt.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,i[Qt.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,n.className_=i.className!==void 0?i.className:"ol-layer",delete i.className,n.setProperties(i),n.state_=null,n}return e.prototype.getBackground=function(){return this.background_},e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var n=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return n.opacity=Ce(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n},e.prototype.getLayersArray=function(t){return Yt()},e.prototype.getLayerStatesArray=function(t){return Yt()},e.prototype.getExtent=function(){return this.get(Qt.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(Qt.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(Qt.MIN_RESOLUTION)},e.prototype.getMinZoom=function(){return this.get(Qt.MIN_ZOOM)},e.prototype.getMaxZoom=function(){return this.get(Qt.MAX_ZOOM)},e.prototype.getOpacity=function(){return this.get(Qt.OPACITY)},e.prototype.getSourceState=function(){return Yt()},e.prototype.getVisible=function(){return this.get(Qt.VISIBLE)},e.prototype.getZIndex=function(){return this.get(Qt.Z_INDEX)},e.prototype.setBackground=function(t){this.background_=t,this.changed()},e.prototype.setExtent=function(t){this.set(Qt.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(Qt.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(Qt.MIN_RESOLUTION,t)},e.prototype.setMaxZoom=function(t){this.set(Qt.MAX_ZOOM,t)},e.prototype.setMinZoom=function(t){this.set(Qt.MIN_ZOOM,t)},e.prototype.setOpacity=function(t){Ht(typeof t=="number",64),this.set(Qt.OPACITY,t)},e.prototype.setVisible=function(t){this.set(Qt.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(Qt.Z_INDEX,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),r.prototype.disposeInternal.call(this)},e}(Un),vd=Nm,Ir={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},fi={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"},Fm=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ts=function(r){Fm(e,r);function e(t){var n=this,i=Ae({},t);delete i.source,n=r.call(this,i)||this,n.on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,n.rendered=!1,t.render&&(n.render=t.render),t.map&&n.setMap(t.map),n.addChangeListener(Qt.SOURCE,n.handleSourcePropertyChange_);var o=t.source?t.source:null;return n.setSource(o),n}return e.prototype.getLayersArray=function(t){var n=t||[];return n.push(this),n},e.prototype.getLayerStatesArray=function(t){var n=t||[];return n.push(this.getLayerState()),n},e.prototype.getSource=function(){return this.get(Qt.SOURCE)||null},e.prototype.getRenderSource=function(){return this.getSource()},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():fi.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(ce(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=zt(t,Mt.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(function(n){return n([])})},e.prototype.getData=function(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)},e.prototype.render=function(t,n){var i=this.getRenderer();if(i.prepareFrame(t))return this.rendered=!0,i.renderFrame(t,n)},e.prototype.unrender=function(){this.rendered=!1},e.prototype.setMapInternal=function(t){t||this.unrender(),this.set(Qt.MAP,t)},e.prototype.getMapInternal=function(){return this.get(Qt.MAP)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(ce(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(ce(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=zt(t,Ir.PRECOMPOSE,function(n){var i=n,o=i.frameState.layerStatesArray,a=this.getLayerState(!1);Ht(!o.some(function(l){return l.layer===a.layer}),67),o.push(a)},this),this.mapRenderKey_=zt(this,Mt.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(Qt.SOURCE,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),r.prototype.disposeInternal.call(this)},e}(vd);function Xa(r,e){if(!r.visible)return!1;var t=e.resolution;if(t<r.minResolution||t>=r.maxResolution)return!1;var n=e.zoom;return n>r.minZoom&&n<=r.maxZoom}var km=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gm=function(r){km(e,r);function e(t){var n=r.call(this)||this;return n.map_=t,n}return e.prototype.dispatchRenderEvent=function(t,n){Yt()},e.prototype.calculateMatrices2D=function(t){var n=t.viewState,i=t.coordinateToPixelTransform,o=t.pixelToCoordinateTransform;ir(i,t.size[0]/2,t.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),Ru(o,i)},e.prototype.forEachFeatureAtCoordinate=function(t,n,i,o,a,l,u,h){var c,_=n.viewState;function v(vt,dt,rt,gt){return a.call(l,dt,vt?rt:null,gt)}var T=_.projection,E=qc(t.slice(),T),w=[[0,0]];if(T.canWrapX()&&o){var L=T.getExtent(),P=ye(L);w.push([-P,0],[P,0])}for(var F=n.layerStatesArray,D=F.length,k=[],$=[],p=0;p<w.length;p++)for(var tt=D-1;tt>=0;--tt){var Y=F[tt],J=Y.layer;if(J.hasRenderer()&&Xa(Y,_)&&u.call(h,J)){var st=J.getRenderer(),ct=J.getSource();if(st&&ct){var at=ct.getWrapX()?E:t,_t=v.bind(null,Y.managed);$[0]=at[0]+w[p][0],$[1]=at[1]+w[p][1],c=st.forEachFeatureAtCoordinate($,n,i,_t,k)}if(c)return c}}if(k.length!==0){var Pt=1/k.length;return k.forEach(function(vt,dt){return vt.distanceSq+=dt*Pt}),k.sort(function(vt,dt){return vt.distanceSq-dt.distanceSq}),k.some(function(vt){return c=vt.callback(vt.feature,vt.layer,vt.geometry)}),c}},e.prototype.forEachLayerAtPixel=function(t,n,i,o,a){return Yt()},e.prototype.hasFeatureAtCoordinate=function(t,n,i,o,a,l){var u=this.forEachFeatureAtCoordinate(t,n,i,o,oi,this,a,l);return u!==void 0},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){Yt()},e.prototype.scheduleExpireIconCache=function(t){Ha.canExpireCache()&&t.postRenderFunctions.push(jm)},e}(du);function jm(r,e){Ha.expire()}var Wm=Gm,Bm=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Um=function(r){Bm(e,r);function e(t,n,i,o){var a=r.call(this,t)||this;return a.inversePixelTransform=n,a.frameState=i,a.context=o,a}return e}(Bn),_d=Um,_a="ol-hidden",Ho="ol-unselectable",_h="ol-unsupported",Es="ol-control",yh="ol-collapsed",Ym=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),mh=["style","variant","weight","size","lineHeight","family"],yd=function(r){var e=r.match(Ym);if(!e)return null;for(var t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,i=mh.length;n<i;++n){var o=e[n+1];o!==void 0&&(t[mh[n]]=o)}return t.families=t.family.split(/,\s?/),t};function md(r){return r===1?"":String(Math.round(r*100)/100)}function gn(r,e,t,n){var i;return t&&t.length?i=t.shift():_s?i=new OffscreenCanvas(r||300,e||300):i=document.createElement("canvas"),r&&(i.width=r),e&&(i.height=e),i.getContext("2d",n)}function $a(r,e){var t=e.parentNode;t&&t.replaceChild(r,e)}function Fl(r){return r&&r.parentNode?r.parentNode.removeChild(r):null}function Hm(r){for(;r.lastChild;)r.removeChild(r.lastChild)}function Xm(r,e){for(var t=r.childNodes,n=0;;++n){var i=t[n],o=e[n];if(!i&&!o)break;if(i!==o){if(!i){r.appendChild(o);continue}if(!o){r.removeChild(i),--n;continue}r.insertBefore(o,i)}}}var Td="10px sans-serif",nr="#000",za="round",Mo=[],Do=0,Gi="round",No=10,Fo="#000",ko="center",Va="middle",ei=[0,0,0,0],Go=1,Zn=new Un,$m=new Ui;$m.setSize=function(){console.warn("labelCache is deprecated.")};var Ci=null,kl,Gl={},zm=function(){var r=100,e="32px ",t=["monospace","serif"],n=t.length,i="wmytzilWMYTZIL@#/&?$%10\uF013",o,a;function l(h,c,_){for(var v=!0,T=0;T<n;++T){var E=t[T];if(a=Ka(h+" "+c+" "+e+E,i),_!=E){var w=Ka(h+" "+c+" "+e+_+","+E,i);v=v&&w!=a}}return!!v}function u(){for(var h=!0,c=Zn.getKeys(),_=0,v=c.length;_<v;++_){var T=c[_];Zn.get(T)<r&&(l.apply(this,T.split(`
`))?(Bo(Gl),Ci=null,kl=void 0,Zn.set(T,r)):(Zn.set(T,Zn.get(T)+1,!0),h=!1))}h&&(clearInterval(o),o=void 0)}return function(h){var c=yd(h);if(!!c)for(var _=c.families,v=0,T=_.length;v<T;++v){var E=_[v],w=c.style+`
`+c.weight+`
`+E;Zn.get(w)===void 0&&(Zn.set(w,r,!0),l(c.style,c.weight,E)||(Zn.set(w,0,!0),o===void 0&&(o=setInterval(u,32))))}}}(),Vm=function(){var r;return function(e){var t=Gl[e];if(t==null){if(_s){var n=yd(e),i=Ed(e,"\u017Dg"),o=isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight);t=o*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=e,document.body.appendChild(r),t=r.offsetHeight,document.body.removeChild(r);Gl[e]=t}return t}}();function Ed(r,e){return Ci||(Ci=gn(1,1)),r!=kl&&(Ci.font=r,kl=Ci.font),Ci.measureText(e)}function Ka(r,e){return Ed(r,e).width}function Th(r,e,t){if(e in t)return t[e];var n=Ka(r,e);return t[e]=n,n}function Km(r,e){for(var t=[],n=[],i=[],o=0,a=0,l=0,u=0,h=0,c=e.length;h<=c;h+=2){var _=e[h];if(_===`
`||h===c){o=Math.max(o,a),i.push(a),a=0,l+=u;continue}var v=e[h+1]||r.font,T=Ka(v,_);t.push(T),a+=T;var E=Vm(v);n.push(E),u=Math.max(u,E)}return{width:o,height:l,widths:t,heights:n,lineWidths:i}}function qm(r,e,t,n,i,o,a,l,u,h,c){r.save(),t!==1&&(r.globalAlpha*=t),e&&r.setTransform.apply(r,e),n.contextInstructions?(r.translate(u,h),r.scale(c[0],c[1]),Zm(n,r)):c[0]<0||c[1]<0?(r.translate(u,h),r.scale(c[0],c[1]),r.drawImage(n,i,o,a,l,0,0,a,l)):r.drawImage(n,i,o,a,l,u,h,a*c[0],l*c[1]),r.restore()}function Zm(r,e){for(var t=r.contextInstructions,n=0,i=t.length;n<i;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}var Jm=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qm=function(r){Jm(e,r);function e(t){var n=r.call(this,t)||this;n.fontChangeListenerKey_=zt(Zn,Fi.PROPERTYCHANGE,t.redrawText.bind(t)),n.element_=document.createElement("div");var i=n.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",n.element_.className=Ho+" ol-layers";var o=t.getViewport();return o.insertBefore(n.element_,o.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return e.prototype.dispatchRenderEvent=function(t,n){var i=this.getMap();if(i.hasListener(t)){var o=new _d(t,void 0,n);i.dispatchEvent(o)}},e.prototype.disposeInternal=function(){ce(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),r.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(Ir.PRECOMPOSE,t);var n=t.layerStatesArray.sort(function(T,E){return T.zIndex-E.zIndex}),i=t.viewState;this.children_.length=0;for(var o=[],a=null,l=0,u=n.length;l<u;++l){var h=n[l];t.layerIndex=l;var c=h.layer,_=c.getSourceState();if(!Xa(h,i)||_!=fi.READY&&_!=fi.UNDEFINED){c.unrender();continue}var v=c.render(t,a);!v||(v!==a&&(this.children_.push(v),a=v),"getDeclutter"in c&&o.push(c))}for(var l=o.length-1;l>=0;--l)o[l].renderDeclutter(t);Xm(this.element_,this.children_),this.dispatchRenderEvent(Ir.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)},e.prototype.forEachLayerAtPixel=function(t,n,i,o,a){for(var l=n.viewState,u=n.layerStatesArray,h=u.length,c=h-1;c>=0;--c){var _=u[c],v=_.layer;if(v.hasRenderer()&&Xa(_,l)&&a(v)){var T=v.getRenderer(),E=T.getDataAtPixel(t,n,i);if(E){var w=o(v,E);if(w)return w}}}},e}(Wm),t0=Qm,Je={ADD:"add",REMOVE:"remove"},Cd=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Eh={LENGTH:"length"},ya=function(r){Cd(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.element=n,o.index=i,o}return e}(Bn),e0=function(r){Cd(e,r);function e(t,n){var i=r.call(this)||this;i.on,i.once,i.un;var o=n||{};if(i.unique_=!!o.unique,i.array_=t||[],i.unique_)for(var a=0,l=i.array_.length;a<l;++a)i.assertUnique_(i.array_[a],a);return i.updateLength_(),i}return e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var n=0,i=t.length;n<i;++n)this.push(t[n]);return this},e.prototype.forEach=function(t){for(var n=this.array_,i=0,o=n.length;i<o;++i)t(n[i],i,n)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(Eh.LENGTH)},e.prototype.insertAt=function(t,n){this.unique_&&this.assertUnique_(n),this.array_.splice(t,0,n),this.updateLength_(),this.dispatchEvent(new ya(Je.ADD,n,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var n=this.getLength();return this.insertAt(n,t),this.getLength()},e.prototype.remove=function(t){for(var n=this.array_,i=0,o=n.length;i<o;++i)if(n[i]===t)return this.removeAt(i)},e.prototype.removeAt=function(t){var n=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new ya(Je.REMOVE,n,t)),n},e.prototype.setAt=function(t,n){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(n,t);var o=this.array_[t];this.array_[t]=n,this.dispatchEvent(new ya(Je.REMOVE,o,t)),this.dispatchEvent(new ya(Je.ADD,n,t))}else{for(var a=i;a<t;++a)this.insertAt(a,void 0);this.insertAt(t,n)}},e.prototype.updateLength_=function(){this.set(Eh.LENGTH,this.array_.length)},e.prototype.assertUnique_=function(t,n){for(var i=0,o=this.array_.length;i<o;++i)if(this.array_[i]===t&&i!==n)throw new $c(58)},e}(Un),ze=e0,xd=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),yr=function(r){xd(e,r);function e(t,n){var i=r.call(this,t)||this;return i.layer=n,i}return e}(Bn),el={LAYERS:"layers"},n0=function(r){xd(e,r);function e(t){var n=this,i=t||{},o=Ae({},i);delete o.layers;var a=i.layers;return n=r.call(this,o)||this,n.on,n.once,n.un,n.layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(el.LAYERS,n.handleLayersChanged_),a?Array.isArray(a)?a=new ze(a.slice(),{unique:!0}):Ht(typeof a.getArray=="function",43):a=new ze(void 0,{unique:!0}),n.setLayers(a),n}return e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(ce),this.layersListenerKeys_.length=0;var t=this.getLayers();this.layersListenerKeys_.push(zt(t,Je.ADD,this.handleLayersAdd_,this),zt(t,Je.REMOVE,this.handleLayersRemove_,this));for(var n in this.listenerKeys_)this.listenerKeys_[n].forEach(ce);Bo(this.listenerKeys_);for(var i=t.getArray(),o=0,a=i.length;o<a;o++){var l=i[o];this.registerLayerListeners_(l),this.dispatchEvent(new yr("addlayer",l))}this.changed()},e.prototype.registerLayerListeners_=function(t){var n=[zt(t,Fi.PROPERTYCHANGE,this.handleLayerChange_,this),zt(t,Mt.CHANGE,this.handleLayerChange_,this)];t instanceof e&&n.push(zt(t,"addlayer",this.handleLayerGroupAdd_,this),zt(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Zt(t)]=n},e.prototype.handleLayerGroupAdd_=function(t){this.dispatchEvent(new yr("addlayer",t.layer))},e.prototype.handleLayerGroupRemove_=function(t){this.dispatchEvent(new yr("removelayer",t.layer))},e.prototype.handleLayersAdd_=function(t){var n=t.element;this.registerLayerListeners_(n),this.dispatchEvent(new yr("addlayer",n)),this.changed()},e.prototype.handleLayersRemove_=function(t){var n=t.element,i=Zt(n);this.listenerKeys_[i].forEach(ce),delete this.listenerKeys_[i],this.dispatchEvent(new yr("removelayer",n)),this.changed()},e.prototype.getLayers=function(){return this.get(el.LAYERS)},e.prototype.setLayers=function(t){var n=this.getLayers();if(n)for(var i=n.getArray(),o=0,a=i.length;o<a;++o)this.dispatchEvent(new yr("removelayer",i[o]));this.set(el.LAYERS,t)},e.prototype.getLayersArray=function(t){var n=t!==void 0?t:[];return this.getLayers().forEach(function(i){i.getLayersArray(n)}),n},e.prototype.getLayerStatesArray=function(t){var n=t!==void 0?t:[],i=n.length;this.getLayers().forEach(function(c){c.getLayerStatesArray(n)});var o=this.getLayerState(),a=o.zIndex;!t&&o.zIndex===void 0&&(a=0);for(var l=i,u=n.length;l<u;l++){var h=n[l];h.opacity*=o.opacity,h.visible=h.visible&&o.visible,h.maxResolution=Math.min(h.maxResolution,o.maxResolution),h.minResolution=Math.max(h.minResolution,o.minResolution),h.minZoom=Math.max(h.minZoom,o.minZoom),h.maxZoom=Math.min(h.maxZoom,o.maxZoom),o.extent!==void 0&&(h.extent!==void 0?h.extent=Co(h.extent,o.extent):h.extent=o.extent),h.zIndex===void 0&&(h.zIndex=a)}return n},e.prototype.getSourceState=function(){return fi.READY},e}(vd),Wn=n0,r0=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),i0=function(r){r0(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.map=n,o.frameState=i!==void 0?i:null,o}return e}(Bn),xi=i0,o0=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),a0=function(r){o0(e,r);function e(t,n,i,o,a){var l=r.call(this,t,n,a)||this;return l.originalEvent=i,l.pixel_=null,l.coordinate_=null,l.dragging=o!==void 0?o:!1,l}return Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){r.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){r.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},e}(xi),Jn=a0,qt={SINGLECLICK:"singleclick",CLICK:Mt.CLICK,DBLCLICK:Mt.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},jl={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},s0=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),l0=function(r){s0(e,r);function e(t,n){var i=r.call(this,t)||this;i.map_=t,i.clickTimeoutId_,i.emulateClicks_=!1,i.dragging_=!1,i.dragListenerKeys_=[],i.moveTolerance_=n===void 0?1:n,i.down_=null;var o=i.map_.getViewport();return i.activePointers_=0,i.trackedTouches_={},i.element_=o,i.pointerdownListenerKey_=zt(o,jl.POINTERDOWN,i.handlePointerDown_,i),i.originalPointerMoveEvent_,i.relayedListenerKey_=zt(o,jl.POINTERMOVE,i.relayEvent_,i),i.boundHandleTouchMove_=i.handleTouchMove_.bind(i),i.element_.addEventListener(Mt.TOUCHMOVE,i.boundHandleTouchMove_,nd?{passive:!1}:!1),i}return e.prototype.emulateClick_=function(t){var n=new Jn(qt.CLICK,this.map_,t);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new Jn(qt.DBLCLICK,this.map_,t),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var i=new Jn(qt.SINGLECLICK,this.map_,t);this.dispatchEvent(i)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var n=t;n.type==qt.POINTERUP||n.type==qt.POINTERCANCEL?delete this.trackedTouches_[n.pointerId]:n.type==qt.POINTERDOWN&&(this.trackedTouches_[n.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var n=new Jn(qt.POINTERUP,this.map_,t);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_===0&&(this.dragListenerKeys_.forEach(ce),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return t.button===0},e.prototype.handlePointerDown_=function(t){this.emulateClicks_=this.activePointers_===0,this.updateActivePointers_(t);var n=new Jn(qt.POINTERDOWN,this.map_,t);this.dispatchEvent(n),this.down_={};for(var i in t){var o=t[i];this.down_[i]=typeof o=="function"?ui:o}if(this.dragListenerKeys_.length===0){var a=this.map_.getOwnerDocument();this.dragListenerKeys_.push(zt(a,qt.POINTERMOVE,this.handlePointerMove_,this),zt(a,qt.POINTERUP,this.handlePointerUp_,this),zt(this.element_,qt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==a&&this.dragListenerKeys_.push(zt(this.element_.getRootNode(),qt.POINTERUP,this.handlePointerUp_,this))}},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var n=new Jn(qt.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(n)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var n=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new Jn(t.type,this.map_,t,n))},e.prototype.handleTouchMove_=function(t){var n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(ce(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Mt.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ce(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ce),this.dragListenerKeys_.length=0,this.element_=null,r.prototype.disposeInternal.call(this)},e}(Ui),u0=l0,vr={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Se={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},qa=1/0,f0=function(){function r(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return r.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Bo(this.queuedElements_)},r.prototype.dequeue=function(){var e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));var i=this.keyFunction_(n);return delete this.queuedElements_[i],n},r.prototype.enqueue=function(e){Ht(!(this.keyFunction_(e)in this.queuedElements_),31);var t=this.priorityFunction_(e);return t!=qa?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1},r.prototype.getCount=function(){return this.elements_.length},r.prototype.getLeftChildIndex_=function(e){return e*2+1},r.prototype.getRightChildIndex_=function(e){return e*2+2},r.prototype.getParentIndex_=function(e){return e-1>>1},r.prototype.heapify_=function(){var e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)},r.prototype.isEmpty=function(){return this.elements_.length===0},r.prototype.isKeyQueued=function(e){return e in this.queuedElements_},r.prototype.isQueued=function(e){return this.isKeyQueued(this.keyFunction_(e))},r.prototype.siftUp_=function(e){for(var t=this.elements_,n=this.priorities_,i=t.length,o=t[e],a=n[e],l=e;e<i>>1;){var u=this.getLeftChildIndex_(e),h=this.getRightChildIndex_(e),c=h<i&&n[h]<n[u]?h:u;t[e]=t[c],n[e]=n[c],e=c}t[e]=o,n[e]=a,this.siftDown_(l,e)},r.prototype.siftDown_=function(e,t){for(var n=this.elements_,i=this.priorities_,o=n[t],a=i[t];t>e;){var l=this.getParentIndex_(t);if(i[l]>a)n[t]=n[l],i[t]=i[l],t=l;else break}n[t]=o,i[t]=a},r.prototype.reprioritize=function(){var e=this.priorityFunction_,t=this.elements_,n=this.priorities_,i=0,o=t.length,a,l,u;for(l=0;l<o;++l)a=t[l],u=e(a),u==qa?delete this.queuedElements_[this.keyFunction_(a)]:(n[i]=u,t[i++]=a);t.length=i,n.length=i,this.heapify_()},r}(),h0=f0,It={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},c0=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),d0=function(r){c0(e,r);function e(t,n){var i=r.call(this,function(o){return t.apply(null,o)},function(o){return o[0].getKey()})||this;return i.boundHandleTileChange_=i.handleTileChange.bind(i),i.tileChangeCallback_=n,i.tilesLoading_=0,i.tilesLoadingKeys_={},i}return e.prototype.enqueue=function(t){var n=r.prototype.enqueue.call(this,t);if(n){var i=t[0];i.addEventListener(Mt.CHANGE,this.boundHandleTileChange_)}return n},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var n=t.target,i=n.getState();if(i===It.LOADED||i===It.ERROR||i===It.EMPTY){n.removeEventListener(Mt.CHANGE,this.boundHandleTileChange_);var o=n.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,n){for(var i=0,o,a,l;this.tilesLoading_<t&&i<n&&this.getCount()>0;)a=this.dequeue()[0],l=a.getKey(),o=a.getState(),o===It.IDLE&&!(l in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[l]=!0,++this.tilesLoading_,++i,a.load())},e}(h0),p0=d0;function g0(r,e,t,n,i){if(!r||!(t in r.wantedTiles)||!r.wantedTiles[t][e.getKey()])return qa;var o=r.viewState.center,a=n[0]-o[0],l=n[1]-o[1];return 65536*Math.log(i)+Math.sqrt(a*a+l*l)/i}function Ch(r){return r[0]>0&&r[1]>0}function v0(r,e,t){return t===void 0&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function xn(r,e){return Array.isArray(r)?r:(e===void 0?e=[r,r]:(e[0]=r,e[1]=r),e)}var _0=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();function wd(r){if(r instanceof Ts){r.setMapInternal(null);return}r instanceof Wn&&r.getLayers().forEach(wd)}function Od(r,e){if(r instanceof Ts){r.setMapInternal(e);return}if(r instanceof Wn)for(var t=r.getLayers().getArray(),n=0,i=t.length;n<i;++n)Od(t[n],e)}var y0=function(r){_0(e,r);function e(t){var n=r.call(this)||this;n.on,n.once,n.un;var i=m0(t);n.renderComplete_,n.loaded_=!0,n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,n.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:ed,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=Fn(),n.pixelToCoordinateTransform_=Fn(),n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=t.moveTolerance,n.keyboardEventTarget_=i.keyboardEventTarget,n.targetChangeHandlerKeys_=null,n.controls=i.controls||new ze,n.interactions=i.interactions||new ze,n.overlays_=i.overlays,n.overlayIdIndex_={},n.renderer_=null,n.postRenderFunctions_=[],n.tileQueue_=new p0(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(Se.LAYERGROUP,n.handleLayerGroupChanged_),n.addChangeListener(Se.VIEW,n.handleViewChanged_),n.addChangeListener(Se.SIZE,n.handleSizeChanged_),n.addChangeListener(Se.TARGET,n.handleTargetChanged_),n.setProperties(i.values);var o=n;return t.view&&!(t.view instanceof Tr)&&t.view.then(function(a){o.setView(new Tr(a))}),n.controls.addEventListener(Je.ADD,function(a){a.element.setMap(this)}.bind(n)),n.controls.addEventListener(Je.REMOVE,function(a){a.element.setMap(null)}.bind(n)),n.interactions.addEventListener(Je.ADD,function(a){a.element.setMap(this)}.bind(n)),n.interactions.addEventListener(Je.REMOVE,function(a){a.element.setMap(null)}.bind(n)),n.overlays_.addEventListener(Je.ADD,function(a){this.addOverlayInternal_(a.element)}.bind(n)),n.overlays_.addEventListener(Je.REMOVE,function(a){var l=a.element,u=l.getId();u!==void 0&&delete this.overlayIdIndex_[u.toString()],a.element.setMap(null)}.bind(n)),n.controls.forEach(function(a){a.setMap(this)}.bind(n)),n.interactions.forEach(function(a){a.setMap(this)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n}return e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){var n=this.getLayerGroup().getLayers();n.push(t)},e.prototype.handleLayerAdd_=function(t){Od(t.layer,this)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var n=t.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.setTarget(null),r.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,n,i){if(!(!this.frameState_||!this.renderer_)){var o=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};var a=i.hitTolerance!==void 0?i.hitTolerance:0,l=i.layerFilter!==void 0?i.layerFilter:oi,u=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,a,u,n,null,l,null)}},e.prototype.getFeaturesAtPixel=function(t,n){var i=[];return this.forEachFeatureAtPixel(t,function(o){i.push(o)},n),i},e.prototype.getAllLayers=function(){var t=[];function n(i){i.forEach(function(o){o instanceof Wn?n(o.getLayers()):t.push(o)})}return n(this.getLayers()),t},e.prototype.forEachLayerAtPixel=function(t,n,i){if(!(!this.frameState_||!this.renderer_)){var o=i||{},a=o.hitTolerance!==void 0?o.hitTolerance:0,l=o.layerFilter||oi;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,a,n,l)}},e.prototype.hasFeatureAtPixel=function(t,n){if(!this.frameState_||!this.renderer_)return!1;var i=this.getCoordinateFromPixelInternal(t);n=n!==void 0?n:{};var o=n.layerFilter!==void 0?n.layerFilter:oi,a=n.hitTolerance!==void 0?n.hitTolerance:0,l=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,a,l,o,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var n=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-n.left,i.clientY-n.top]},e.prototype.getTarget=function(){return this.get(Se.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return t!==void 0?typeof t=="string"?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return Ml(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var n=this.frameState_;return n?Ee(n.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var n=this.overlayIdIndex_[t.toString()];return n!==void 0?n:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(Se.LAYERGROUP)},e.prototype.setLayers=function(t){var n=this.getLayerGroup();if(t instanceof ze){n.setLayers(t);return}var i=n.getLayers();i.clear(),i.extend(t)},e.prototype.getLayers=function(){var t=this.getLayerGroup().getLayers();return t},e.prototype.getLoadingOrNotReady=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var o=t[n];if(!!o.visible){var a=o.layer.getRenderer();if(a&&!a.ready)return!0;var l=o.layer.getSource();if(l&&l.loading)return!0}}return!1},e.prototype.getPixelFromCoordinate=function(t){var n=En(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},e.prototype.getPixelFromCoordinateInternal=function(t){var n=this.frameState_;return n?Ee(n.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(Se.SIZE)},e.prototype.getView=function(){return this.get(Se.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},e.prototype.getTilePriority=function(t,n,i,o){return g0(this.frameState_,t,n,i,o)},e.prototype.handleBrowserEvent=function(t,n){var i=n||t.type,o=new Jn(i,this,t);this.handleMapBrowserEvent(o)},e.prototype.handleMapBrowserEvent=function(t){if(!!this.frameState_){var n=t.originalEvent,i=n.type;if(i===jl.POINTERDOWN||i===Mt.WHEEL||i===Mt.KEYDOWN){var o=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():o,l=n.target;if(this.overlayContainerStopEvent_.contains(l)||!(a===o?o.documentElement:a).contains(l))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1)for(var u=this.getInteractions().getArray().slice(),h=u.length-1;h>=0;h--){var c=u[h];if(!(c.getMap()!==this||!c.getActive()||!this.getTargetElement())){var _=c.handleEvent(t);if(!_||t.propagationStopped)break}}}},e.prototype.handlePostRender=function(){var t=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){var i=this.maxTilesLoading_,o=i;if(t){var a=t.viewHints;if(a[je.ANIMATING]||a[je.INTERACTING]){var l=Date.now()-t.time>8;i=l?0:8,o=l?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,o))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(Ir.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ir.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new xi(vr.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new xi(vr.LOADSTART,this,t))));for(var u=this.postRenderFunctions_,h=0,c=u.length;h<c;++h)u[h](this,t);u.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var t=0,n=this.targetChangeHandlerKeys_.length;t<n;++t)ce(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Mt.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Mt.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Fl(this.viewport_)}var i=this.getTargetElement();if(!i)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{i.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new u0(this,this.moveTolerance_);for(var o in qt)this.mapBrowserEventHandler_.addEventListener(qt[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Mt.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Mt.WHEEL,this.boundHandleBrowserEvent_,nd?{passive:!1}:!1);var a=this.getOwnerDocument().defaultView,l=this.keyboardEventTarget_?this.keyboardEventTarget_:i;this.targetChangeHandlerKeys_=[zt(l,Mt.KEYDOWN,this.handleBrowserEvent,this),zt(l,Mt.KEYPRESS,this.handleBrowserEvent,this),zt(a,Mt.RESIZE,this.updateSize,this)]}this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(ce(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ce(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=zt(t,Fi.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=zt(t,Mt.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ce),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.handleLayerAdd_(new yr("addlayer",t)),this.layerGroupPropertyListenerKeys_=[zt(t,Fi.PROPERTYCHANGE,this.render,this),zt(t,Mt.CHANGE,this.render,this),zt(t,"addlayer",this.handleLayerAdd_,this),zt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),n=0,i=t.length;n<i;++n){var o=t[n].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){var n=this.getLayerGroup().getLayers();return n.remove(t)},e.prototype.handleLayerRemove_=function(t){wd(t.layer)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var n=this,i=this.getSize(),o=this.getView(),a=this.frameState_,l=null;if(i!==void 0&&Ch(i)&&o&&o.isDef()){var u=o.getHints(this.frameState_?this.frameState_.viewHints:void 0),h=o.getState();if(l={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Al(h.center,h.resolution,h.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:h,viewHints:u,wantedTiles:{},mapId:Zt(this),renderTargets:{}},h.nextCenter&&h.nextResolution){var c=isNaN(h.nextRotation)?h.rotation:h.nextRotation;l.nextExtent=Al(h.nextCenter,h.nextResolution,c,i)}}if(this.frameState_=l,this.renderer_.renderFrame(l),l){if(l.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,l.postRenderFunctions),a){var _=!this.previousExtent_||!mu(this.previousExtent_)&&!Lo(l.extent,this.previousExtent_);_&&(this.dispatchEvent(new xi(vr.MOVESTART,this,a)),this.previousExtent_=ds(this.previousExtent_))}var v=this.previousExtent_&&!l.viewHints[je.ANIMATING]&&!l.viewHints[je.INTERACTING]&&!Lo(l.extent,this.previousExtent_);v&&(this.dispatchEvent(new xi(vr.MOVEEND,this,l)),zc(l.extent,this.previousExtent_))}this.dispatchEvent(new xi(vr.POSTRENDER,this,l)),this.renderComplete_=this.hasListener(vr.LOADSTART)||this.hasListener(vr.LOADEND)||this.hasListener(Ir.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){n.postRenderTimeoutHandle_=void 0,n.handlePostRender()},0))},e.prototype.setLayerGroup=function(t){var n=this.getLayerGroup();n&&this.handleLayerRemove_(new yr("removelayer",n)),this.set(Se.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(Se.SIZE,t)},e.prototype.setTarget=function(t){this.set(Se.TARGET,t)},e.prototype.setView=function(t){if(!t||t instanceof Tr){this.set(Se.VIEW,t);return}this.set(Se.VIEW,new Tr);var n=this;t.then(function(i){n.setView(new Tr(i))})},e.prototype.updateSize=function(){var t=this.getTargetElement(),n=void 0;if(t){var i=getComputedStyle(t),o=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),a=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(o)&&!isNaN(a)&&(n=[o,a],!Ch(n)&&!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(n),this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var n=void 0,i=getComputedStyle(this.viewport_);i.width&&i.height&&(n=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(n)}},e}(Un);function m0(r){var e=null;r.keyboardEventTarget!==void 0&&(e=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);var t={},n=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new Wn({layers:r.layers});t[Se.LAYERGROUP]=n,t[Se.TARGET]=r.target,t[Se.VIEW]=r.view instanceof Tr?r.view:new Tr;var i;r.controls!==void 0&&(Array.isArray(r.controls)?i=new ze(r.controls.slice()):(Ht(typeof r.controls.getArray=="function",47),i=r.controls));var o;r.interactions!==void 0&&(Array.isArray(r.interactions)?o=new ze(r.interactions.slice()):(Ht(typeof r.interactions.getArray=="function",48),o=r.interactions));var a;return r.overlays!==void 0?Array.isArray(r.overlays)?a=new ze(r.overlays.slice()):(Ht(typeof r.overlays.getArray=="function",49),a=r.overlays):a=new ze,{controls:i,interactions:o,keyboardEventTarget:e,overlays:a,values:t}}var T0=y0,E0=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),C0=function(r){E0(e,r);function e(t){var n=r.call(this)||this,i=t.element;return i&&!t.target&&!i.style.pointerEvents&&(i.style.pointerEvents="auto"),n.element=i||null,n.target_=null,n.map_=null,n.listenerKeys=[],t.render&&(n.render=t.render),t.target&&n.setTarget(t.target),n}return e.prototype.disposeInternal=function(){Fl(this.element),r.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&Fl(this.element);for(var n=0,i=this.listenerKeys.length;n<i;++n)ce(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=t,t){var o=this.target_?this.target_:t.getOverlayContainerStopEvent();o.appendChild(this.element),this.render!==ui&&this.listenerKeys.push(zt(t,vr.POSTRENDER,this.render,this)),t.render()}},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.target_=typeof t=="string"?document.getElementById(t):t},e}(Un),Cs=C0,x0=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),w0=function(r){x0(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this,n.ulElement_=document.createElement("ul"),n.collapsed_=i.collapsed!==void 0?i.collapsed:!0,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=i.collapsible!==void 0,n.collapsible_=i.collapsible!==void 0?i.collapsible:!0,n.collapsible_||(n.collapsed_=!1);var o=i.className!==void 0?i.className:"ol-attribution",a=i.tipLabel!==void 0?i.tipLabel:"Attributions",l=i.expandClassName!==void 0?i.expandClassName:o+"-expand",u=i.collapseLabel!==void 0?i.collapseLabel:"\u203A",h=i.collapseClassName!==void 0?i.collapseClassName:o+"-collapse";typeof u=="string"?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=u,n.collapseLabel_.className=h):n.collapseLabel_=u;var c=i.label!==void 0?i.label:"i";typeof c=="string"?(n.label_=document.createElement("span"),n.label_.textContent=c,n.label_.className=l):n.label_=c;var _=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=a,n.toggleButton_.appendChild(_),n.toggleButton_.addEventListener(Mt.CLICK,n.handleClick_.bind(n),!1);var v=o+" "+Ho+" "+Es+(n.collapsed_&&n.collapsible_?" "+yh:"")+(n.collapsible_?"":" ol-uncollapsible"),T=n.element;return T.className=v,T.appendChild(n.toggleButton_),T.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return e.prototype.collectSourceAttributions_=function(t){for(var n={},i=[],o=!0,a=t.layerStatesArray,l=0,u=a.length;l<u;++l){var h=a[l];if(!!Xa(h,t.viewState)){var c=h.layer.getSource();if(!!c){var _=c.getAttributions();if(!!_){var v=_(t);if(!!v)if(o=o&&c.getAttributionsCollapsible()!==!1,Array.isArray(v))for(var T=0,E=v.length;T<E;++T)v[T]in n||(i.push(v[T]),n[v[T]]=!0);else v in n||(i.push(v),n[v]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(o),i},e.prototype.updateElement_=function(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var n=this.collectSourceAttributions_(t),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!hi(n,this.renderedAttributions_)){Hm(this.ulElement_);for(var o=0,a=n.length;o<a;++o){var l=document.createElement("li");l.innerHTML=n[o],this.ulElement_.appendChild(l)}this.renderedAttributions_=n}},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},e.prototype.handleToggle_=function(){this.element.classList.toggle(yh),this.collapsed_?$a(this.collapseLabel_,this.label_):$a(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function(t){this.updateElement_(t.frameState)},e}(Cs),O0=w0,I0=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),R0=function(r){I0(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{element:document.createElement("div"),render:i.render,target:i.target})||this;var o=i.className!==void 0?i.className:"ol-rotate",a=i.label!==void 0?i.label:"\u21E7",l=i.compassClassName!==void 0?i.compassClassName:"ol-compass";n.label_=null,typeof a=="string"?(n.label_=document.createElement("span"),n.label_.className=l,n.label_.textContent=a):(n.label_=a,n.label_.classList.add(l));var u=i.tipLabel?i.tipLabel:"Reset rotation",h=document.createElement("button");h.className=o+"-reset",h.setAttribute("type","button"),h.title=u,h.appendChild(n.label_),h.addEventListener(Mt.CLICK,n.handleClick_.bind(n),!1);var c=o+" "+Ho+" "+Es,_=n.element;return _.className=c,_.appendChild(h),n.callResetNorth_=i.resetNorth?i.resetNorth:void 0,n.duration_=i.duration!==void 0?i.duration:250,n.autoHide_=i.autoHide!==void 0?i.autoHide:!0,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(_a),n}return e.prototype.handleClick_=function(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap(),n=t.getView();if(!!n){var i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:Xi}):n.setRotation(0))}},e.prototype.render=function(t){var n=t.frameState;if(!!n){var i=n.viewState.rotation;if(i!=this.rotation_){var o="rotate("+i+"rad)";if(this.autoHide_){var a=this.element.classList.contains(_a);!a&&i===0?this.element.classList.add(_a):a&&i!==0&&this.element.classList.remove(_a)}this.label_.style.transform=o}this.rotation_=i}},e}(Cs),S0=R0,P0=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),L0=function(r){P0(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{element:document.createElement("div"),target:i.target})||this;var o=i.className!==void 0?i.className:"ol-zoom",a=i.delta!==void 0?i.delta:1,l=i.zoomInClassName!==void 0?i.zoomInClassName:o+"-in",u=i.zoomOutClassName!==void 0?i.zoomOutClassName:o+"-out",h=i.zoomInLabel!==void 0?i.zoomInLabel:"+",c=i.zoomOutLabel!==void 0?i.zoomOutLabel:"\u2013",_=i.zoomInTipLabel!==void 0?i.zoomInTipLabel:"Zoom in",v=i.zoomOutTipLabel!==void 0?i.zoomOutTipLabel:"Zoom out",T=document.createElement("button");T.className=l,T.setAttribute("type","button"),T.title=_,T.appendChild(typeof h=="string"?document.createTextNode(h):h),T.addEventListener(Mt.CLICK,n.handleClick_.bind(n,a),!1);var E=document.createElement("button");E.className=u,E.setAttribute("type","button"),E.title=v,E.appendChild(typeof c=="string"?document.createTextNode(c):c),E.addEventListener(Mt.CLICK,n.handleClick_.bind(n,-a),!1);var w=o+" "+Ho+" "+Es,L=n.element;return L.className=w,L.appendChild(T),L.appendChild(E),n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleClick_=function(t,n){n.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var n=this.getMap(),i=n.getView();if(!!i){var o=i.getZoom();if(o!==void 0){var a=i.getConstrainedZoom(o+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:a,duration:this.duration_,easing:Xi})):i.setZoom(a)}}},e}(Cs),A0=L0,b0=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),xh=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],wh={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"},M0=function(r){b0(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{element:document.createElement("div"),target:i.target})||this,n.on,n.once,n.un,n.keys_=i.keys!==void 0?i.keys:!1,n.source_=i.source,n.isInFullscreen_=!1,n.boundHandleMapTargetChange_=n.handleMapTargetChange_.bind(n),n.cssClassName_=i.className!==void 0?i.className:"ol-full-screen",n.documentListeners_=[],n.activeClassName_=i.activeClassName!==void 0?i.activeClassName.split(" "):[n.cssClassName_+"-true"],n.inactiveClassName_=i.inactiveClassName!==void 0?i.inactiveClassName.split(" "):[n.cssClassName_+"-false"];var o=i.label!==void 0?i.label:"\u2922";n.labelNode_=typeof o=="string"?document.createTextNode(o):o;var a=i.labelActive!==void 0?i.labelActive:"\xD7";n.labelActiveNode_=typeof a=="string"?document.createTextNode(a):a;var l=i.tipLabel?i.tipLabel:"Toggle full-screen";return n.button_=document.createElement("button"),n.button_.title=l,n.button_.setAttribute("type","button"),n.button_.appendChild(n.labelNode_),n.button_.addEventListener(Mt.CLICK,n.handleClick_.bind(n),!1),n.setClassName_(n.button_,n.isInFullscreen_),n.element.className="".concat(n.cssClassName_," ").concat(Ho," ").concat(Es),n.element.appendChild(n.button_),n}return e.prototype.handleClick_=function(t){t.preventDefault(),this.handleFullScreen_()},e.prototype.handleFullScreen_=function(){var t=this.getMap();if(!!t){var n=t.getOwnerDocument();if(!!Oh(n))if(Ih(n))N0(n);else{var i=void 0;this.source_?i=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:i=t.getTargetElement(),this.keys_?D0(i):Id(i)}}},e.prototype.handleFullScreenChange_=function(){var t=this.getMap();if(!!t){var n=this.isInFullscreen_;this.isInFullscreen_=Ih(t.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?($a(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(wh.ENTERFULLSCREEN)):($a(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(wh.LEAVEFULLSCREEN)),t.updateSize())}},e.prototype.setClassName_=function(t,n){var i,o,a,l;n?((i=t.classList).remove.apply(i,this.inactiveClassName_),(o=t.classList).add.apply(o,this.activeClassName_)):((a=t.classList).remove.apply(a,this.activeClassName_),(l=t.classList).add.apply(l,this.inactiveClassName_))},e.prototype.setMap=function(t){var n=this.getMap();n&&n.removeChangeListener(Se.TARGET,this.boundHandleMapTargetChange_),r.prototype.setMap.call(this,t),this.handleMapTargetChange_(),t&&t.addChangeListener(Se.TARGET,this.boundHandleMapTargetChange_)},e.prototype.handleMapTargetChange_=function(){for(var t=this.documentListeners_,n=0,i=t.length;n<i;++n)ce(t[n]);t.length=0;var o=this.getMap();if(o){var a=o.getOwnerDocument();Oh(a)?this.element.classList.remove(_h):this.element.classList.add(_h);for(var n=0,i=xh.length;n<i;++n)t.push(zt(a,xh[n],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}},e}(Cs);function Oh(r){var e=r.body;return!!(e.webkitRequestFullscreen||e.msRequestFullscreen&&r.msFullscreenEnabled||e.requestFullscreen&&r.fullscreenEnabled)}function Ih(r){return!!(r.webkitIsFullScreen||r.msFullscreenElement||r.fullscreenElement)}function Id(r){r.requestFullscreen?r.requestFullscreen():r.msRequestFullscreen?r.msRequestFullscreen():r.webkitRequestFullscreen&&r.webkitRequestFullscreen()}function D0(r){r.webkitRequestFullscreen?r.webkitRequestFullscreen():Id(r)}function N0(r){r.exitFullscreen?r.exitFullscreen():r.msExitFullscreen?r.msExitFullscreen():r.webkitExitFullscreen&&r.webkitExitFullscreen()}var F0=M0;function Rd(r){var e=r||{},t=new ze,n=e.zoom!==void 0?e.zoom:!0;n&&t.push(new A0(e.zoomOptions));var i=e.rotate!==void 0?e.rotate:!0;i&&t.push(new S0(e.rotateOptions));var o=e.attribution!==void 0?e.attribution:!0;return o&&t.push(new O0(e.attributionOptions)),t}var Wl={ACTIVE:"active"},k0=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),G0=function(r){k0(e,r);function e(t){var n=r.call(this)||this;return n.on,n.once,n.un,t&&t.handleEvent&&(n.handleEvent=t.handleEvent),n.map_=null,n.setActive(!0),n}return e.prototype.getActive=function(){return this.get(Wl.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(Wl.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(Un);function j0(r,e,t){var n=r.getCenterInternal();if(n){var i=[n[0]+e[0],n[1]+e[1]];r.animateInternal({duration:t!==void 0?t:250,easing:Gy,center:r.getConstrainedCenter(i)})}}function Fu(r,e,t,n){var i=r.getZoom();if(i!==void 0){var o=r.getConstrainedZoom(i+e),a=r.getResolutionForZoom(o);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:a,anchor:t,duration:n!==void 0?n:250,easing:Xi})}}var Xo=G0,W0=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),B0=function(r){W0(e,r);function e(t){var n=r.call(this)||this,i=t||{};return n.delta_=i.delta?i.delta:1,n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleEvent=function(t){var n=!1;if(t.type==qt.DBLCLICK){var i=t.originalEvent,o=t.map,a=t.coordinate,l=i.shiftKey?-this.delta_:this.delta_,u=o.getView();Fu(u,l,a,this.duration_),i.preventDefault(),n=!0}return!n},e}(Xo),U0=B0,Y0=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),H0=function(r){Y0(e,r);function e(t){var n=this,i=t||{};return n=r.call(this,i)||this,i.handleDownEvent&&(n.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(n.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(n.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(n.handleUpEvent=i.handleUpEvent),i.stopDown&&(n.stopDown=i.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var n=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==qt.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==qt.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==qt.POINTERDOWN){var o=this.handleDownEvent(t);this.handlingDownUpSequence=o,n=this.stopDown(o)}else t.type==qt.POINTERMOVE&&this.handleMoveEvent(t);return!n},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(X0(t)){var n=t.originalEvent,i=n.pointerId.toString();t.type==qt.POINTERUP?delete this.trackedPointers_[i]:t.type==qt.POINTERDOWN?this.trackedPointers_[i]=n:i in this.trackedPointers_&&(this.trackedPointers_[i]=n),this.targetPointers=Bc(this.trackedPointers_)}},e}(Xo);function ku(r){for(var e=r.length,t=0,n=0,i=0;i<e;i++)t+=r[i].clientX,n+=r[i].clientY;return[t/e,n/e]}function X0(r){var e=r.type;return e===qt.POINTERDOWN||e===qt.POINTERDRAG||e===qt.POINTERUP}var di=H0;function Bl(r){var e=arguments;return function(t){for(var n=!0,i=0,o=e.length;i<o&&(n=n&&e[i](t),!!n);++i);return n}}var $0=function(r){var e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},z0=function(r){var e=r.map.getTargetElement(),t=r.map.getOwnerDocument().activeElement;return e.contains(t)},Sd=function(r){return r.map.getTargetElement().hasAttribute("tabindex")?z0(r):!0},Pd=oi,Ld=function(r){var e=r.originalEvent;return e.button==0&&!(By&&Uy&&e.ctrlKey)},Gu=function(r){var e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},ju=function(r){var e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Ad=function(r){var e=r.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"},Di=function(r){var e=r.originalEvent;return Ht(e!==void 0,56),e.pointerType=="mouse"},V0=function(r){var e=r.originalEvent;return Ht(e!==void 0,56),e.isPrimary&&e.button===0},K0=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),q0=function(r){K0(e,r);function e(t){var n=r.call(this,{stopDown:Wo})||this,i=t||{};n.kinetic_=i.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var o=i.condition?i.condition:Bl(Gu,V0);return n.condition_=i.onFocusOnly?Bl(Sd,o):o,n.noKinetic_=!1,n}return e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=ku(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var o=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],a=t.map,l=a.getView();Ey(o,l.getResolution()),Tu(o,l.getRotation()),l.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var n=t.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var o=this.kinetic_.getDistance(),a=this.kinetic_.getAngle(),l=i.getCenterInternal(),u=n.getPixelFromCoordinateInternal(l),h=n.getCoordinateFromPixelInternal([u[0]-o*Math.cos(a),u[1]-o*Math.sin(a)]);i.animateInternal({center:i.getConstrainedCenter(h),duration:500,easing:Xi})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var n=t.map,i=n.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},e}(di),Z0=q0,J0=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Q0=function(r){J0(e,r);function e(t){var n=this,i=t||{};return n=r.call(this,{stopDown:Wo})||this,n.condition_=i.condition?i.condition:$0,n.lastAngle_=void 0,n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleDragEvent=function(t){if(!!Di(t)){var n=t.map,i=n.getView();if(i.getConstraints().rotation!==Iu){var o=n.getSize(),a=t.pixel,l=Math.atan2(o[1]/2-a[1],a[0]-o[0]/2);if(this.lastAngle_!==void 0){var u=l-this.lastAngle_;i.adjustRotationInternal(-u)}this.lastAngle_=l}}},e.prototype.handleUpEvent=function(t){if(!Di(t))return!0;var n=t.map,i=n.getView();return i.endInteraction(this.duration_),!1},e.prototype.handleDownEvent=function(t){if(!Di(t))return!1;if(Ld(t)&&this.condition_(t)){var n=t.map;return n.getView().beginInteraction(),this.lastAngle_=void 0,!0}else return!1},e}(di),tT=Q0,eT=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),nT=function(r){eT(e,r);function e(t){var n=r.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+t,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,n=this.endPixel_,i="px",o=this.element_.style;o.left=Math.min(t[0],n[0])+i,o.top=Math.min(t[1],n[1])+i,o.width=Math.abs(n[0]-t[0])+i,o.height=Math.abs(n[1]-t[1])+i},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,n){this.startPixel_=t,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,n=this.endPixel_,i=[t,[t[0],n[1]],n,[n[0],t[1]]],o=i.map(this.map_.getCoordinateFromPixelInternal,this.map_);o[4]=o[0].slice(),this.geometry_?this.geometry_.setCoordinates([o]):this.geometry_=new bo([o])},e.prototype.getGeometry=function(){return this.geometry_},e}(du),rT=nT,bd=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ma={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},nl=function(r){bd(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.coordinate=n,o.mapBrowserEvent=i,o}return e}(Bn),iT=function(r){bd(e,r);function e(t){var n=r.call(this)||this;n.on,n.once,n.un;var i=t||{};return n.box_=new rT(i.className||"ol-dragbox"),n.minArea_=i.minArea!==void 0?i.minArea:64,i.onBoxEnd&&(n.onBoxEnd=i.onBoxEnd),n.startPixel_=null,n.condition_=i.condition?i.condition:Ld,n.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:n.defaultBoxEndCondition,n}return e.prototype.defaultBoxEndCondition=function(t,n,i){var o=i[0]-n[0],a=i[1]-n[1];return o*o+a*a>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new nl(ma.BOXDRAG,t.coordinate,t))},e.prototype.handleUpEvent=function(t){this.box_.setMap(null);var n=this.boxEndCondition_(t,this.startPixel_,t.pixel);return n&&this.onBoxEnd(t),this.dispatchEvent(new nl(n?ma.BOXEND:ma.BOXCANCEL,t.coordinate,t)),!1},e.prototype.handleDownEvent=function(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new nl(ma.BOXSTART,t.coordinate,t)),!0):!1},e.prototype.onBoxEnd=function(t){},e}(di),oT=iT,aT=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),sT=function(r){aT(e,r);function e(t){var n=this,i=t||{},o=i.condition?i.condition:ju;return n=r.call(this,{condition:o,className:i.className||"ol-dragzoom",minArea:i.minArea})||this,n.duration_=i.duration!==void 0?i.duration:200,n.out_=i.out!==void 0?i.out:!1,n}return e.prototype.onBoxEnd=function(t){var n=this.getMap(),i=n.getView(),o=this.getGeometry();if(this.out_){var a=i.rotatedExtentForGeometry(o),l=i.getResolutionForExtentInternal(a),u=i.getResolution()/l;o=o.clone(),o.scale(u*u)}i.fitInternal(o,{duration:this.duration_,easing:Xi})},e}(oT),lT=sT,zr={LEFT:37,UP:38,RIGHT:39,DOWN:40},uT=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),fT=function(r){uT(e,r);function e(t){var n=r.call(this)||this,i=t||{};return n.defaultCondition_=function(o){return Gu(o)&&Ad(o)},n.condition_=i.condition!==void 0?i.condition:n.defaultCondition_,n.duration_=i.duration!==void 0?i.duration:100,n.pixelDelta_=i.pixelDelta!==void 0?i.pixelDelta:128,n}return e.prototype.handleEvent=function(t){var n=!1;if(t.type==Mt.KEYDOWN){var i=t.originalEvent,o=i.keyCode;if(this.condition_(t)&&(o==zr.DOWN||o==zr.LEFT||o==zr.RIGHT||o==zr.UP)){var a=t.map,l=a.getView(),u=l.getResolution()*this.pixelDelta_,h=0,c=0;o==zr.DOWN?c=-u:o==zr.LEFT?h=-u:o==zr.RIGHT?h=u:c=u;var _=[h,c];Tu(_,l.getRotation()),j0(l,_,this.duration_),i.preventDefault(),n=!0}}return!n},e}(Xo),hT=fT,cT=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),dT=function(r){cT(e,r);function e(t){var n=r.call(this)||this,i=t||{};return n.condition_=i.condition?i.condition:Ad,n.delta_=i.delta?i.delta:1,n.duration_=i.duration!==void 0?i.duration:100,n}return e.prototype.handleEvent=function(t){var n=!1;if(t.type==Mt.KEYDOWN||t.type==Mt.KEYPRESS){var i=t.originalEvent,o=i.charCode;if(this.condition_(t)&&(o=="+".charCodeAt(0)||o=="-".charCodeAt(0))){var a=t.map,l=o=="+".charCodeAt(0)?this.delta_:-this.delta_,u=a.getView();Fu(u,l,void 0,this.duration_),i.preventDefault(),n=!0}}return!n},e}(Xo),pT=dT,gT=function(){function r(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return r.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},r.prototype.update=function(e,t){this.points_.push(e,t,Date.now())},r.prototype.end=function(){if(this.points_.length<6)return!1;var e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;for(var n=t-3;n>0&&this.points_[n+2]>e;)n-=3;var i=this.points_[t+2]-this.points_[n+2];if(i<1e3/60)return!1;var o=this.points_[t]-this.points_[n],a=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(a,o),this.initialVelocity_=Math.sqrt(o*o+a*a)/i,this.initialVelocity_>this.minVelocity_},r.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},r.prototype.getAngle=function(){return this.angle_},r}(),vT=gT,_T=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),rl={TRACKPAD:"trackpad",WHEEL:"wheel"},yT=function(r){_T(e,r);function e(t){var n=this,i=t||{};n=r.call(this,i)||this,n.totalDelta_=0,n.lastDelta_=0,n.maxDelta_=i.maxDelta!==void 0?i.maxDelta:1,n.duration_=i.duration!==void 0?i.duration:250,n.timeout_=i.timeout!==void 0?i.timeout:80,n.useAnchor_=i.useAnchor!==void 0?i.useAnchor:!0,n.constrainResolution_=i.constrainResolution!==void 0?i.constrainResolution:!1;var o=i.condition?i.condition:Pd;return n.condition_=i.onFocusOnly?Bl(Sd,o):o,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var t=this.getMap().getView();t.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var n=t.type;if(n!==Mt.WHEEL)return!0;var i=t.map,o=t.originalEvent;o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);var a;if(t.type==Mt.WHEEL&&(a=o.deltaY,jy&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(a/=ed),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(a*=40)),a===0)return!1;this.lastDelta_=a;var l=Date.now();this.startTime_===void 0&&(this.startTime_=l),(!this.mode_||l-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(a)<4?rl.TRACKPAD:rl.WHEEL);var u=i.getView();if(this.mode_===rl.TRACKPAD&&!(u.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(u.getAnimating()&&u.cancelAnimations(),u.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),u.adjustZoom(-a/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=l,!1;this.totalDelta_+=a;var h=Math.max(this.timeout_-(l-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),h),!1},e.prototype.handleWheelZoom_=function(t){var n=t.getView();n.getAnimating()&&n.cancelAnimations();var i=-Ce(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Fu(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(Xo),mT=yT,TT=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ET=function(r){TT(e,r);function e(t){var n=this,i=t||{},o=i;return o.stopDown||(o.stopDown=Wo),n=r.call(this,o)||this,n.anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=i.threshold!==void 0?i.threshold:.3,n.duration_=i.duration!==void 0?i.duration:250,n}return e.prototype.handleDragEvent=function(t){var n=0,i=this.targetPointers[0],o=this.targetPointers[1],a=Math.atan2(o.clientY-i.clientY,o.clientX-i.clientX);if(this.lastAngle_!==void 0){var l=a-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=l}this.lastAngle_=a;var u=t.map,h=u.getView();if(h.getConstraints().rotation!==Iu){var c=u.getViewport().getBoundingClientRect(),_=ku(this.targetPointers);_[0]-=c.left,_[1]-=c.top,this.anchor_=u.getCoordinateFromPixelInternal(_),this.rotating_&&(u.render(),h.adjustRotationInternal(n,this.anchor_))}},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var n=t.map,i=n.getView();return i.endInteraction(this.duration_),!1}else return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},e}(di),CT=ET,xT=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),wT=function(r){xT(e,r);function e(t){var n=this,i=t||{},o=i;return o.stopDown||(o.stopDown=Wo),n=r.call(this,o)||this,n.anchor_=null,n.duration_=i.duration!==void 0?i.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return e.prototype.handleDragEvent=function(t){var n=1,i=this.targetPointers[0],o=this.targetPointers[1],a=i.clientX-o.clientX,l=i.clientY-o.clientY,u=Math.sqrt(a*a+l*l);this.lastDistance_!==void 0&&(n=this.lastDistance_/u),this.lastDistance_=u;var h=t.map,c=h.getView();n!=1&&(this.lastScaleDelta_=n);var _=h.getViewport().getBoundingClientRect(),v=ku(this.targetPointers);v[0]-=_.left,v[1]-=_.top,this.anchor_=h.getCoordinateFromPixelInternal(v),h.render(),c.adjustResolutionInternal(n,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var n=t.map,i=n.getView(),o=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,o),!1}else return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},e}(di),OT=wT,oo={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"},IT=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),RT=function(r){IT(e,r);function e(t){var n=this,i=t||{};return n=r.call(this,i)||this,n.condition_=i.condition?i.condition:ju,n.lastAngle_=void 0,n.lastMagnitude_=void 0,n.lastScaleDelta_=0,n.duration_=i.duration!==void 0?i.duration:400,n}return e.prototype.handleDragEvent=function(t){if(!!Di(t)){var n=t.map,i=n.getSize(),o=t.pixel,a=o[0]-i[0]/2,l=i[1]/2-o[1],u=Math.atan2(l,a),h=Math.sqrt(a*a+l*l),c=n.getView();if(this.lastAngle_!==void 0){var _=this.lastAngle_-u;c.adjustRotationInternal(_)}this.lastAngle_=u,this.lastMagnitude_!==void 0&&c.adjustResolutionInternal(this.lastMagnitude_/h),this.lastMagnitude_!==void 0&&(this.lastScaleDelta_=this.lastMagnitude_/h),this.lastMagnitude_=h}},e.prototype.handleUpEvent=function(t){if(!Di(t))return!0;var n=t.map,i=n.getView(),o=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,o),this.lastScaleDelta_=0,!1},e.prototype.handleDownEvent=function(t){return Di(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0):!1},e}(di),ST=RT,PT=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Md=function(r){PT(e,r);function e(t,n,i){var o=r.call(this)||this;if(i!==void 0&&n===void 0)o.setFlatCoordinates(i,t);else{var a=n||0;o.setCenterAndRadius(t,a,i)}return o}return e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){var a=this.flatCoordinates,l=t-a[0],u=n-a[1],h=l*l+u*u;if(h<o){if(h===0)for(var c=0;c<this.stride;++c)i[c]=a[c];else{var _=this.getRadius()/Math.sqrt(h);i[0]=a[0]+_*l,i[1]=a[1]+_*u;for(var c=2;c<this.stride;++c)i[c]=a[c]}return i.length=this.stride,h}else return o},e.prototype.containsXY=function(t,n){var i=this.flatCoordinates,o=t-i[0],a=n-i[1];return o*o+a*a<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var n=this.flatCoordinates,i=n[this.stride]-n[0];return jn(n[0]-i,n[1]-i,n[0]+i,n[1]+i,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+n*n},e.prototype.getType=function(){return ft.CIRCLE},e.prototype.intersectsExtent=function(t){var n=this.getExtent();if($e(t,n)){var i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||t[1]<=i[1]&&t[3]>=i[1]?!0:yu(t,this.intersectsCoordinate.bind(this))}return!1},e.prototype.setCenter=function(t){var n=this.stride,i=this.flatCoordinates[n]-this.flatCoordinates[0],o=t.slice();o[n]=o[0]+i;for(var a=1;a<n;++a)o[n+a]=t[a];this.setFlatCoordinates(this.layout,o),this.changed()},e.prototype.setCenterAndRadius=function(t,n,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var o=this.flatCoordinates,a=od(o,0,t,this.stride);o[a++]=o[0]+n;for(var l=1,u=this.stride;l<u;++l)o[a++]=o[l];o.length=a,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,n){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,n){var i=this.getCenter(),o=this.getStride();this.setCenter(Su(i,0,i.length,o,t,n,i)),this.changed()},e.prototype.translate=function(t,n){var i=this.getCenter(),o=this.getStride();this.setCenter(id(i,0,i.length,o,t,n,i)),this.changed()},e}(Lr);Md.prototype.transform;var LT=Md,AT=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bT=function(r){AT(e,r);function e(t){var n=r.call(this)||this;if(n.on,n.once,n.un,n.id_=void 0,n.geometryName_="geometry",n.style_=null,n.styleFunction_=void 0,n.geometryChangeKey_=null,n.addChangeListener(n.geometryName_,n.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){var i=t;n.setGeometry(i)}else{var o=t;n.setProperties(o)}return n}return e.prototype.clone=function(){var t=new e(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());var n=this.getGeometry();n&&t.setGeometry(n.clone());var i=this.getStyle();return i&&t.setStyle(i),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(ce(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=zt(t,Mt.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?MT(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(Un);function MT(r){if(typeof r=="function")return r;var e;if(Array.isArray(r))e=r;else{Ht(typeof r.getZIndex=="function",41);var t=r;e=[t]}return function(){return e}}var ao=bT;function Dd(r,e,t,n,i,o,a){var l,u,h=(t-e)/n;if(h===1)l=e;else if(h===2)l=e,u=i;else if(h!==0){for(var c=r[e],_=r[e+1],v=0,T=[0],E=e+n;E<t;E+=n){var w=r[E],L=r[E+1];v+=Math.sqrt((w-c)*(w-c)+(L-_)*(L-_)),T.push(v),c=w,_=L}var P=i*v,F=k_(T,P);F<0?(u=(P-T[-F-2])/(T[-F-1]-T[-F-2]),l=e+(-F-2)*n):l=e+F*n}for(var D=a>1?a:2,k=o||new Array(D),E=0;E<D;++E)k[E]=l===void 0?NaN:u===void 0?r[l+E]:Qn(r[l+E],r[l+n+E],u);return k}function Ul(r,e,t,n,i,o){if(t==e)return null;var a;if(i<r[e+n-1])return o?(a=r.slice(e,e+n),a[n-1]=i,a):null;if(r[t-1]<i)return o?(a=r.slice(t-n,t),a[n-1]=i,a):null;if(i==r[e+n-1])return r.slice(e,e+n);for(var l=e/n,u=t/n;l<u;){var h=l+u>>1;i<r[(h+1)*n-1]?u=h:l=h+1}var c=r[l*n-1];if(i==c)return r.slice((l-1)*n,(l-1)*n+n);var _=r[(l+1)*n-1],v=(i-c)/(_-c);a=[];for(var T=0;T<n-1;++T)a.push(Qn(r[(l-1)*n+T],r[l*n+T],v));return a.push(i),a}function DT(r,e,t,n,i,o,a){if(a)return Ul(r,e,t[t.length-1],n,i,o);var l;if(i<r[n-1])return o?(l=r.slice(0,n),l[n-1]=i,l):null;if(r[r.length-1]<i)return o?(l=r.slice(r.length-n),l[n-1]=i,l):null;for(var u=0,h=t.length;u<h;++u){var c=t[u];if(e!=c){if(i<r[e+n-1])return null;if(i<=r[c-1])return Ul(r,e,c,n,i,!1);e=c}}return null}function Nd(r,e,t,n){for(var i=r[e],o=r[e+1],a=0,l=e+n;l<t;l+=n){var u=r[l],h=r[l+1];a+=Math.sqrt((u-i)*(u-i)+(h-o)*(h-o)),i=u,o=h}return a}var NT=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),FT=function(r){NT(e,r);function e(t,n){var i=r.call(this)||this;return i.flatMidpoint_=null,i.flatMidpointRevision_=-1,i.maxDelta_=-1,i.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?i.setFlatCoordinates(n,t):i.setCoordinates(t,n),i}return e.prototype.appendCoordinate=function(t){this.flatCoordinates?er(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){return o<Hi(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Pu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Au(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,n,i,o))},e.prototype.forEachSegment=function(t){return fd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,n){if(this.layout!=me.XYM&&this.layout!=me.XYZM)return null;var i=n!==void 0?n:!1;return Ul(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return Er(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,n){return Dd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,this.stride)},e.prototype.getLength=function(){return Nd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=Du(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,me.XY)},e.prototype.getType=function(){return ft.LINE_STRING},e.prototype.intersectsExtent=function(t){return ms(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ys(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Lr),xo=FT,kT=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),GT=function(r){kT(e,r);function e(t,n,i){var o=r.call(this)||this;if(o.ends_=[],o.maxDelta_=-1,o.maxDeltaRevision_=-1,Array.isArray(t[0]))o.setCoordinates(t,n);else if(n!==void 0&&i)o.setFlatCoordinates(n,t),o.ends_=i;else{for(var a=o.getLayout(),l=t,u=[],h=[],c=0,_=l.length;c<_;++c){var v=l[c];c===0&&(a=v.getLayout()),er(u,v.getFlatCoordinates()),h.push(u.length)}o.setFlatCoordinates(a,u),o.ends_=h}return o}return e.prototype.appendLineString=function(t){this.flatCoordinates?er(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){return o<Hi(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Lu(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),bu(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,n,i,o))},e.prototype.getCoordinateAtM=function(t,n,i){if(this.layout!=me.XYM&&this.layout!=me.XYZM||this.flatCoordinates.length===0)return null;var o=n!==void 0?n:!1,a=i!==void 0?i:!1;return DT(this.flatCoordinates,0,this.ends_,this.stride,t,o,a)},e.prototype.getCoordinates=function(){return Ao(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new xo(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,n=this.ends_,i=this.layout,o=[],a=0,l=0,u=n.length;l<u;++l){var h=n[l],c=new xo(t.slice(a,h),i);o.push(c),a=h}return o},e.prototype.getFlatMidpoints=function(){for(var t=[],n=this.flatCoordinates,i=0,o=this.ends_,a=this.stride,l=0,u=o.length;l<u;++l){var h=o[l],c=Dd(n,i,h,a,.5);er(t,c),i=h}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=om(this.flatCoordinates,0,this.ends_,this.stride,t,n,0,i),new e(n,me.XY,i)},e.prototype.getType=function(){return ft.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return vm(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Mu(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()},e}(Lr),jT=GT,WT=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),BT=function(r){WT(e,r);function e(t,n){var i=r.call(this)||this;return n&&!Array.isArray(t[0])?i.setFlatCoordinates(n,t):i.setCoordinates(t,n),i}return e.prototype.appendPoint=function(t){this.flatCoordinates?er(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,n,i,o){if(o<Hi(this.getExtent(),t,n))return o;for(var a=this.flatCoordinates,l=this.stride,u=0,h=a.length;u<h;u+=l){var c=ai(t,n,a[u],a[u+1]);if(c<o){o=c;for(var _=0;_<l;++_)i[_]=a[u+_];i.length=l}}return o},e.prototype.getCoordinates=function(){return Er(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var n=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||n<=t?null:new Mi(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,n=this.layout,i=this.stride,o=[],a=0,l=t.length;a<l;a+=i){var u=new Mi(t.slice(a,a+i),n);o.push(u)}return o},e.prototype.getType=function(){return ft.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var n=this.flatCoordinates,i=this.stride,o=0,a=n.length;o<a;o+=i){var l=n[o],u=n[o+1];if(_u(t,l,u))return!0}return!1},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ys(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Lr),Fd=BT;function UT(r,e,t,n){for(var i=[],o=pn(),a=0,l=t.length;a<l;++a){var u=t[a];o=Vc(r,e,u[0],n),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=u[u.length-1]}return i}var YT=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),HT=function(r){YT(e,r);function e(t,n,i){var o=r.call(this)||this;if(o.endss_=[],o.flatInteriorPointsRevision_=-1,o.flatInteriorPoints_=null,o.maxDelta_=-1,o.maxDeltaRevision_=-1,o.orientedRevision_=-1,o.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){for(var a=o.getLayout(),l=t,u=[],h=[],c=0,_=l.length;c<_;++c){var v=l[c];c===0&&(a=v.getLayout());for(var T=u.length,E=v.getEnds(),w=0,L=E.length;w<L;++w)E[w]+=T;er(u,v.getFlatCoordinates()),h.push(E)}n=a,t=u,i=h}return n!==void 0&&i?(o.setFlatCoordinates(n,t),o.endss_=i):o.setCoordinates(t,n),o}return e.prototype.appendPolygon=function(t){var n;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),n=t.getEnds().slice(),this.endss_.push();else{var i=this.flatCoordinates.length;er(this.flatCoordinates,t.getFlatCoordinates()),n=t.getEnds().slice();for(var o=0,a=n.length;o<a;++o)n[o]+=i}this.endss_.push(n),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,n=new Array(t),i=0;i<t;++i)n[i]=this.endss_[i].slice();var o=new e(this.flatCoordinates.slice(),this.layout,n);return o.applyProperties(this),o},e.prototype.closestPointXY=function(t,n,i,o){return o<Hi(this.getExtent(),t,n)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(nm(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),rm(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,n,i,o))},e.prototype.containsXY=function(t,n){return pm(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,n)},e.prototype.getArea=function(){return lm(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),dh(n,0,this.endss_,this.stride,t)):n=this.flatCoordinates,Dl(n,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=UT(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=gm(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new Fd(this.getFlatInteriorPoints().slice(),me.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Tm(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=dh(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=sm(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),n,0,i),new e(n,me.XY,i)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var n;if(t===0)n=0;else{var i=this.endss_[t-1];n=i[i.length-1]}var o=this.endss_[t].slice(),a=o[o.length-1];if(n!==0)for(var l=0,u=o.length;l<u;++l)o[l]-=n;return new bo(this.flatCoordinates.slice(n,a),this.layout,o)},e.prototype.getPolygons=function(){for(var t=this.layout,n=this.flatCoordinates,i=this.endss_,o=[],a=0,l=0,u=i.length;l<u;++l){var h=i[l].slice(),c=h[h.length-1];if(a!==0)for(var _=0,v=h.length;_<v;++_)h[_]-=a;var T=new bo(n.slice(a,c),t,h);o.push(T),a=c}return o},e.prototype.getType=function(){return ft.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return ym(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,n){this.setLayout(n,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=im(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{var o=i[i.length-1];this.flatCoordinates.length=o.length===0?0:o[o.length-1]}this.changed()},e}(Lr),XT=HT;function $T(r,e,t,n,i){kd(r,e,t||0,n||r.length-1,i||zT)}function kd(r,e,t,n,i){for(;n>t;){if(n-t>600){var o=n-t+1,a=e-t+1,l=Math.log(o),u=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*u*(o-u)/o)*(a-o/2<0?-1:1),c=Math.max(t,Math.floor(e-a*u/o+h)),_=Math.min(n,Math.floor(e+(o-a)*u/o+h));kd(r,e,c,_,i)}var v=r[e],T=t,E=n;for(so(r,t,e),i(r[n],v)>0&&so(r,t,n);T<E;){for(so(r,T,E),T++,E--;i(r[T],v)<0;)T++;for(;i(r[E],v)>0;)E--}i(r[t],v)===0?so(r,t,E):(E++,so(r,E,n)),E<=e&&(t=E+1),e<=E&&(n=E-1)}}function so(r,e,t){var n=r[e];r[e]=r[t],r[t]=n}function zT(r,e){return r<e?-1:r>e?1:0}class Gd{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const n=[];if(!Ea(e,t))return n;const i=this.toBBox,o=[];for(;t;){for(let a=0;a<t.children.length;a++){const l=t.children[a],u=t.leaf?i(l):l;Ea(e,u)&&(t.leaf?n.push(l):ol(e,u)?this._all(l,n):o.push(l))}t=o.pop()}return n}collides(e){let t=this.data;if(!Ea(e,t))return!1;const n=[];for(;t;){for(let i=0;i<t.children.length;i++){const o=t.children[i],a=t.leaf?this.toBBox(o):o;if(Ea(e,a)){if(t.leaf||ol(e,a))return!0;n.push(o)}}t=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const n=this.data;this.data=t,t=n}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=wi([]),this}remove(e,t){if(!e)return this;let n=this.data;const i=this.toBBox(e),o=[],a=[];let l,u,h;for(;n||o.length;){if(n||(n=o.pop(),u=o[o.length-1],l=a.pop(),h=!0),n.leaf){const c=VT(e,n.children,t);if(c!==-1)return n.children.splice(c,1),o.push(n),this._condense(o),this}!h&&!n.leaf&&ol(n,i)?(o.push(n),a.push(l),l=0,u=n,n=n.children[0]):u?(l++,n=u.children[l],h=!1):n=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,i){const o=n-t+1;let a=this._maxEntries,l;if(o<=a)return l=wi(e.slice(t,n+1)),vi(l,this.toBBox),l;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),l=wi([]),l.leaf=!1,l.height=i;const u=Math.ceil(o/a),h=u*Math.ceil(Math.sqrt(a));Rh(e,t,n,h,this.compareMinX);for(let c=t;c<=n;c+=h){const _=Math.min(c+h-1,n);Rh(e,c,_,u,this.compareMinY);for(let v=c;v<=_;v+=u){const T=Math.min(v+u-1,_);l.children.push(this._build(e,v,T,i-1))}}return vi(l,this.toBBox),l}_chooseSubtree(e,t,n,i){for(;i.push(t),!(t.leaf||i.length-1===n);){let o=1/0,a=1/0,l;for(let u=0;u<t.children.length;u++){const h=t.children[u],c=il(h),_=ZT(e,h)-c;_<a?(a=_,o=c<o?c:o,l=h):_===a&&c<o&&(o=c,l=h)}t=l||t.children[0]}return t}_insert(e,t,n){const i=n?e:this.toBBox(e),o=[],a=this._chooseSubtree(i,this.data,t,o);for(a.children.push(e),po(a,i);t>=0&&o[t].children.length>this._maxEntries;)this._split(o,t),t--;this._adjustParentBBoxes(i,o,t)}_split(e,t){const n=e[t],i=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,i);const a=this._chooseSplitIndex(n,o,i),l=wi(n.children.splice(a,n.children.length-a));l.height=n.height,l.leaf=n.leaf,vi(n,this.toBBox),vi(l,this.toBBox),t?e[t-1].children.push(l):this._splitRoot(n,l)}_splitRoot(e,t){this.data=wi([e,t]),this.data.height=e.height+1,this.data.leaf=!1,vi(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let i,o=1/0,a=1/0;for(let l=t;l<=n-t;l++){const u=co(e,0,l,this.toBBox),h=co(e,l,n,this.toBBox),c=JT(u,h),_=il(u)+il(h);c<o?(o=c,i=l,a=_<a?_:a):c===o&&_<a&&(a=_,i=l)}return i||n-t}_chooseSplitAxis(e,t,n){const i=e.leaf?this.compareMinX:KT,o=e.leaf?this.compareMinY:qT,a=this._allDistMargin(e,t,n,i),l=this._allDistMargin(e,t,n,o);a<l&&e.children.sort(i)}_allDistMargin(e,t,n,i){e.children.sort(i);const o=this.toBBox,a=co(e,0,t,o),l=co(e,n-t,n,o);let u=Ta(a)+Ta(l);for(let h=t;h<n-t;h++){const c=e.children[h];po(a,e.leaf?o(c):c),u+=Ta(a)}for(let h=n-t-1;h>=t;h--){const c=e.children[h];po(l,e.leaf?o(c):c),u+=Ta(l)}return u}_adjustParentBBoxes(e,t,n){for(let i=n;i>=0;i--)po(t[i],e)}_condense(e){for(let t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():vi(e[t],this.toBBox)}}function VT(r,e,t){if(!t)return e.indexOf(r);for(let n=0;n<e.length;n++)if(t(r,e[n]))return n;return-1}function vi(r,e){co(r,0,r.children.length,e,r)}function co(r,e,t,n,i){i||(i=wi(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let o=e;o<t;o++){const a=r.children[o];po(i,r.leaf?n(a):a)}return i}function po(r,e){return r.minX=Math.min(r.minX,e.minX),r.minY=Math.min(r.minY,e.minY),r.maxX=Math.max(r.maxX,e.maxX),r.maxY=Math.max(r.maxY,e.maxY),r}function KT(r,e){return r.minX-e.minX}function qT(r,e){return r.minY-e.minY}function il(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function Ta(r){return r.maxX-r.minX+(r.maxY-r.minY)}function ZT(r,e){return(Math.max(e.maxX,r.maxX)-Math.min(e.minX,r.minX))*(Math.max(e.maxY,r.maxY)-Math.min(e.minY,r.minY))}function JT(r,e){const t=Math.max(r.minX,e.minX),n=Math.max(r.minY,e.minY),i=Math.min(r.maxX,e.maxX),o=Math.min(r.maxY,e.maxY);return Math.max(0,i-t)*Math.max(0,o-n)}function ol(r,e){return r.minX<=e.minX&&r.minY<=e.minY&&e.maxX<=r.maxX&&e.maxY<=r.maxY}function Ea(r,e){return e.minX<=r.maxX&&e.minY<=r.maxY&&e.maxX>=r.minX&&e.maxY>=r.minY}function wi(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Rh(r,e,t,n,i){const o=[e,t];for(;o.length;){if(t=o.pop(),e=o.pop(),t-e<=n)continue;const a=e+Math.ceil((t-e)/n/2)*n;$T(r,a,e,t,i),o.push(e,a,a,t)}}var he={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},QT=function(){function r(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=xn(e.scale),this.displacement_=e.displacement}return r.prototype.clone=function(){var e=this.getScale();return new r({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},r.prototype.getOpacity=function(){return this.opacity_},r.prototype.getRotateWithView=function(){return this.rotateWithView_},r.prototype.getRotation=function(){return this.rotation_},r.prototype.getScale=function(){return this.scale_},r.prototype.getScaleArray=function(){return this.scaleArray_},r.prototype.getDisplacement=function(){return this.displacement_},r.prototype.getAnchor=function(){return Yt()},r.prototype.getImage=function(e){return Yt()},r.prototype.getHitDetectionImage=function(){return Yt()},r.prototype.getPixelRatio=function(e){return 1},r.prototype.getImageState=function(){return Yt()},r.prototype.getImageSize=function(){return Yt()},r.prototype.getOrigin=function(){return Yt()},r.prototype.getSize=function(){return Yt()},r.prototype.setDisplacement=function(e){this.displacement_=e},r.prototype.setOpacity=function(e){this.opacity_=e},r.prototype.setRotateWithView=function(e){this.rotateWithView_=e},r.prototype.setRotation=function(e){this.rotation_=e},r.prototype.setScale=function(e){this.scale_=e,this.scaleArray_=xn(e)},r.prototype.listenImageChange=function(e){Yt()},r.prototype.load=function(){Yt()},r.prototype.unlistenImageChange=function(e){Yt()},r}(),jd=QT;function Nn(r){return Array.isArray(r)?gd(r):r}var tE=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),eE=function(r){tE(e,r);function e(t){var n=this,i=t.rotateWithView!==void 0?t.rotateWithView:!1;return n=r.call(this,{opacity:1,rotateWithView:i,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0]})||this,n.canvas_=void 0,n.hitDetectionCanvas_=null,n.fill_=t.fill!==void 0?t.fill:null,n.origin_=[0,0],n.points_=t.points,n.radius_=t.radius!==void 0?t.radius:t.radius1,n.radius2_=t.radius2,n.angle_=t.angle!==void 0?t.angle:0,n.stroke_=t.stroke!==void 0?t.stroke:null,n.size_=null,n.renderOptions_=null,n.render(),n}return e.prototype.clone=function(){var t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice()});return n.setOpacity(this.getOpacity()),n},e.prototype.getAnchor=function(){var t=this.size_;if(!t)return null;var n=this.getDisplacement();return[t[0]/2-n[0],t[1]/2+n[1]]},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_},e.prototype.getImage=function(t){var n=this.canvas_[t];if(!n){var i=this.renderOptions_,o=gn(i.size*t,i.size*t);this.draw_(i,o,t),n=o.canvas,this.canvas_[t]=n}return n},e.prototype.getPixelRatio=function(t){return t},e.prototype.getImageSize=function(){return this.size_},e.prototype.getImageState=function(){return he.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.calculateLineJoinSize_=function(t,n,i){if(n===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return n;var o=this.radius_,a=this.radius2_===void 0?o:this.radius2_;if(o<a){var l=o;o=a,a=l}var u=this.radius2_===void 0?this.points_:this.points_*2,h=2*Math.PI/u,c=a*Math.sin(h),_=Math.sqrt(a*a-c*c),v=o-_,T=Math.sqrt(c*c+v*v),E=T/c;if(t==="miter"&&E<=i)return E*n;var w=n/2/E,L=n/2*(v/T),P=Math.sqrt((o+w)*(o+w)+L*L),F=P-o;if(this.radius2_===void 0||t==="bevel")return F*2;var D=o*Math.sin(h),k=Math.sqrt(o*o-D*D),$=a-k,p=Math.sqrt(D*D+$*$),tt=p/D;if(tt<=i){var Y=tt*n/2-a-o;return 2*Math.max(F,Y)}return F*2},e.prototype.createRenderOptions=function(){var t=Gi,n=0,i=null,o=0,a,l=0;this.stroke_&&(a=this.stroke_.getColor(),a===null&&(a=Fo),a=Nn(a),l=this.stroke_.getWidth(),l===void 0&&(l=Go),i=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),t===void 0&&(t=Gi),n=this.stroke_.getMiterLimit(),n===void 0&&(n=No));var u=this.calculateLineJoinSize_(t,l,n),h=Math.max(this.radius_,this.radius2_||0),c=Math.ceil(2*h+u);return{strokeStyle:a,strokeWidth:l,size:c,lineDash:i,lineDashOffset:o,lineJoin:t,miterLimit:n}},e.prototype.render=function(){this.renderOptions_=this.createRenderOptions();var t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]},e.prototype.draw_=function(t,n,i){if(n.scale(i,i),n.translate(t.size/2,t.size/2),this.createPath_(n),this.fill_){var o=this.fill_.getColor();o===null&&(o=nr),n.fillStyle=Nn(o),n.fill()}this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,n.setLineDash&&t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},e.prototype.createHitDetectionCanvas_=function(t){if(this.fill_){var n=this.fill_.getColor(),i=0;if(typeof n=="string"&&(n=Ya(n)),n===null?i=1:Array.isArray(n)&&(i=n.length===4?n[3]:1),i===0){var o=gn(t.size,t.size);this.hitDetectionCanvas_=o.canvas,this.drawHitDetectionCanvas_(t,o)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))},e.prototype.createPath_=function(t){var n=this.points_,i=this.radius_;if(n===1/0)t.arc(0,0,i,0,2*Math.PI);else{var o=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(n*=2);for(var a=this.angle_-Math.PI/2,l=2*Math.PI/n,u=0;u<n;u++){var h=a+u*l,c=u%2===0?i:o;t.lineTo(c*Math.cos(h),c*Math.sin(h))}t.closePath()}},e.prototype.drawHitDetectionCanvas_=function(t,n){n.translate(t.size/2,t.size/2),this.createPath_(n),n.fillStyle=nr,n.fill(),this.stroke_&&(n.strokeStyle=t.strokeStyle,n.lineWidth=t.strokeWidth,t.lineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit,n.stroke())},e}(jd),nE=eE,rE=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),iE=function(r){rE(e,r);function e(t){var n=t||{};return r.call(this,{points:1/0,fill:n.fill,radius:n.radius,stroke:n.stroke,scale:n.scale!==void 0?n.scale:1,rotation:n.rotation!==void 0?n.rotation:0,rotateWithView:n.rotateWithView!==void 0?n.rotateWithView:!1,displacement:n.displacement!==void 0?n.displacement:[0,0]})||this}return e.prototype.clone=function(){var t=this.getScale(),n=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return n.setOpacity(this.getOpacity()),n},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(nE),Wd=iE,oE=function(){function r(e){var t=e||{};this.color_=t.color!==void 0?t.color:null}return r.prototype.clone=function(){var e=this.getColor();return new r({color:Array.isArray(e)?e.slice():e||void 0})},r.prototype.getColor=function(){return this.color_},r.prototype.setColor=function(e){this.color_=e},r}(),Yl=oE,aE=function(){function r(e){var t=e||{};this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}return r.prototype.clone=function(){var e=this.getColor();return new r({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},r.prototype.getColor=function(){return this.color_},r.prototype.getLineCap=function(){return this.lineCap_},r.prototype.getLineDash=function(){return this.lineDash_},r.prototype.getLineDashOffset=function(){return this.lineDashOffset_},r.prototype.getLineJoin=function(){return this.lineJoin_},r.prototype.getMiterLimit=function(){return this.miterLimit_},r.prototype.getWidth=function(){return this.width_},r.prototype.setColor=function(e){this.color_=e},r.prototype.setLineCap=function(e){this.lineCap_=e},r.prototype.setLineDash=function(e){this.lineDash_=e},r.prototype.setLineDashOffset=function(e){this.lineDashOffset_=e},r.prototype.setLineJoin=function(e){this.lineJoin_=e},r.prototype.setMiterLimit=function(e){this.miterLimit_=e},r.prototype.setWidth=function(e){this.width_=e},r}(),Aa=aE,go=function(){function r(e){var t=e||{};this.geometry_=null,this.geometryFunction_=Sh,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}return r.prototype.clone=function(){var e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new r({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},r.prototype.getRenderer=function(){return this.renderer_},r.prototype.setRenderer=function(e){this.renderer_=e},r.prototype.setHitDetectionRenderer=function(e){this.hitDetectionRenderer_=e},r.prototype.getHitDetectionRenderer=function(){return this.hitDetectionRenderer_},r.prototype.getGeometry=function(){return this.geometry_},r.prototype.getGeometryFunction=function(){return this.geometryFunction_},r.prototype.getFill=function(){return this.fill_},r.prototype.setFill=function(e){this.fill_=e},r.prototype.getImage=function(){return this.image_},r.prototype.setImage=function(e){this.image_=e},r.prototype.getStroke=function(){return this.stroke_},r.prototype.setStroke=function(e){this.stroke_=e},r.prototype.getText=function(){return this.text_},r.prototype.setText=function(e){this.text_=e},r.prototype.getZIndex=function(){return this.zIndex_},r.prototype.setGeometry=function(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=Sh,this.geometry_=e},r.prototype.setZIndex=function(e){this.zIndex_=e},r}();function sE(r){var e;if(typeof r=="function")e=r;else{var t;if(Array.isArray(r))t=r;else{Ht(typeof r.getZIndex=="function",41);var n=r;t=[n]}e=function(){return t}}return e}var al=null;function lE(r,e){if(!al){var t=new Yl({color:"rgba(255,255,255,0.4)"}),n=new Aa({color:"#3399CC",width:1.25});al=[new go({image:new Wd({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return al}function uE(){var r={},e=[255,255,255,1],t=[0,153,255,1],n=3;return r[ft.POLYGON]=[new go({fill:new Yl({color:[255,255,255,.5]})})],r[ft.MULTI_POLYGON]=r[ft.POLYGON],r[ft.LINE_STRING]=[new go({stroke:new Aa({color:e,width:n+2})}),new go({stroke:new Aa({color:t,width:n})})],r[ft.MULTI_LINE_STRING]=r[ft.LINE_STRING],r[ft.CIRCLE]=r[ft.POLYGON].concat(r[ft.LINE_STRING]),r[ft.POINT]=[new go({image:new Wd({radius:n*2,fill:new Yl({color:t}),stroke:new Aa({color:e,width:n/2})}),zIndex:1/0})],r[ft.MULTI_POINT]=r[ft.POINT],r[ft.GEOMETRY_COLLECTION]=r[ft.POLYGON].concat(r[ft.LINE_STRING],r[ft.POINT]),r}function Sh(r){return r.getGeometry()}var fE=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ph={RENDER_ORDER:"renderOrder"},hE=function(r){fE(e,r);function e(t){var n=this,i=t||{},o=Ae({},i);return delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,n=r.call(this,o)||this,n.declutter_=i.declutter!==void 0?i.declutter:!1,n.renderBuffer_=i.renderBuffer!==void 0?i.renderBuffer:100,n.style_=null,n.styleFunction_=void 0,n.setStyle(i.style),n.updateWhileAnimating_=i.updateWhileAnimating!==void 0?i.updateWhileAnimating:!1,n.updateWhileInteracting_=i.updateWhileInteracting!==void 0?i.updateWhileInteracting:!1,n}return e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(t){return r.prototype.getFeatures.call(this,t)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(Ph.RENDER_ORDER)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.renderDeclutter=function(t){t.declutterTree||(t.declutterTree=new Gd(9)),this.getRenderer().renderDeclutter(t)},e.prototype.setRenderOrder=function(t){this.set(Ph.RENDER_ORDER,t)},e.prototype.setStyle=function(t){this.style_=t!==void 0?t:lE,this.styleFunction_=t===null?void 0:sE(this.style_),this.changed()},e}(Ts),cE=hE,$o={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Ca=[$o.FILL],Cr=[$o.STROKE],ni=[$o.BEGIN_PATH],Lh=[$o.CLOSE_PATH],Rt=$o,dE=function(){function r(){}return r.prototype.drawCustom=function(e,t,n,i){},r.prototype.drawGeometry=function(e){},r.prototype.setStyle=function(e){},r.prototype.drawCircle=function(e,t){},r.prototype.drawFeature=function(e,t){},r.prototype.drawGeometryCollection=function(e,t){},r.prototype.drawLineString=function(e,t){},r.prototype.drawMultiLineString=function(e,t){},r.prototype.drawMultiPoint=function(e,t){},r.prototype.drawMultiPolygon=function(e,t){},r.prototype.drawPoint=function(e,t){},r.prototype.drawPolygon=function(e,t){},r.prototype.drawText=function(e,t){},r.prototype.setFillStrokeStyle=function(e,t){},r.prototype.setImageStyle=function(e,t){},r.prototype.setTextStyle=function(e,t){},r}(),Bd=dE,pE=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),gE=function(r){pE(e,r);function e(t,n,i,o){var a=r.call(this)||this;return a.tolerance=t,a.maxExtent=n,a.pixelRatio=o,a.maxLineWidth=0,a.resolution=i,a.beginGeometryInstruction1_=null,a.beginGeometryInstruction2_=null,a.bufferedMaxExtent_=null,a.instructions=[],a.coordinates=[],a.tmpCoordinate_=[],a.hitDetectionInstructions=[],a.state={},a}return e.prototype.applyPixelRatio=function(t){var n=this.pixelRatio;return n==1?t:t.map(function(i){return i*n})},e.prototype.appendFlatPointCoordinates=function(t,n){for(var i=this.getBufferedMaxExtent(),o=this.tmpCoordinate_,a=this.coordinates,l=a.length,u=0,h=t.length;u<h;u+=n)o[0]=t[u],o[1]=t[u+1],Yo(i,o)&&(a[l++]=o[0],a[l++]=o[1]);return l},e.prototype.appendFlatLineCoordinates=function(t,n,i,o,a,l){var u=this.coordinates,h=u.length,c=this.getBufferedMaxExtent();l&&(n+=o);var _=t[n],v=t[n+1],T=this.tmpCoordinate_,E=!0,w,L,P;for(w=n+o;w<i;w+=o)T[0]=t[w],T[1]=t[w+1],P=Pl(c,T),P!==L?(E&&(u[h++]=_,u[h++]=v,E=!1),u[h++]=T[0],u[h++]=T[1]):P===Pe.INTERSECTING?(u[h++]=T[0],u[h++]=T[1],E=!1):E=!0,_=T[0],v=T[1],L=P;return(a&&E||w===n+o)&&(u[h++]=_,u[h++]=v),h},e.prototype.drawCustomCoordinates_=function(t,n,i,o,a){for(var l=0,u=i.length;l<u;++l){var h=i[l],c=this.appendFlatLineCoordinates(t,n,h,o,!1,!1);a.push(c),n=h}return n},e.prototype.drawCustom=function(t,n,i,o){this.beginGeometry(t,n);var a=t.getType(),l=t.getStride(),u=this.coordinates.length,h,c,_,v,T;switch(a){case ft.MULTI_POLYGON:h=t.getOrientedFlatCoordinates(),v=[];var E=t.getEndss();T=0;for(var w=0,L=E.length;w<L;++w){var P=[];T=this.drawCustomCoordinates_(h,T,E[w],l,P),v.push(P)}this.instructions.push([Rt.CUSTOM,u,v,t,i,Dl]),this.hitDetectionInstructions.push([Rt.CUSTOM,u,v,t,o||i,Dl]);break;case ft.POLYGON:case ft.MULTI_LINE_STRING:_=[],h=a==ft.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),T=this.drawCustomCoordinates_(h,0,t.getEnds(),l,_),this.instructions.push([Rt.CUSTOM,u,_,t,i,Ao]),this.hitDetectionInstructions.push([Rt.CUSTOM,u,_,t,o||i,Ao]);break;case ft.LINE_STRING:case ft.CIRCLE:h=t.getFlatCoordinates(),c=this.appendFlatLineCoordinates(h,0,h.length,l,!1,!1),this.instructions.push([Rt.CUSTOM,u,c,t,i,Er]),this.hitDetectionInstructions.push([Rt.CUSTOM,u,c,t,o||i,Er]);break;case ft.MULTI_POINT:h=t.getFlatCoordinates(),c=this.appendFlatPointCoordinates(h,l),c>u&&(this.instructions.push([Rt.CUSTOM,u,c,t,i,Er]),this.hitDetectionInstructions.push([Rt.CUSTOM,u,c,t,o||i,Er]));break;case ft.POINT:h=t.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),c=this.coordinates.length,this.instructions.push([Rt.CUSTOM,u,c,t,i]),this.hitDetectionInstructions.push([Rt.CUSTOM,u,c,t,o||i]);break}this.endGeometry(n)},e.prototype.beginGeometry=function(t,n){this.beginGeometryInstruction1_=[Rt.BEGIN_GEOMETRY,n,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Rt.BEGIN_GEOMETRY,n,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t=this.hitDetectionInstructions;t.reverse();var n,i=t.length,o,a,l=-1;for(n=0;n<i;++n)o=t[n],a=o[0],a==Rt.END_GEOMETRY?l=n:a==Rt.BEGIN_GEOMETRY&&(o[2]=n,G_(this.hitDetectionInstructions,l,n),l=-1)},e.prototype.setFillStrokeStyle=function(t,n){var i=this.state;if(t){var o=t.getColor();i.fillStyle=Nn(o||nr)}else i.fillStyle=void 0;if(n){var a=n.getColor();i.strokeStyle=Nn(a||Fo);var l=n.getLineCap();i.lineCap=l!==void 0?l:za;var u=n.getLineDash();i.lineDash=u?u.slice():Mo;var h=n.getLineDashOffset();i.lineDashOffset=h||Do;var c=n.getLineJoin();i.lineJoin=c!==void 0?c:Gi;var _=n.getWidth();i.lineWidth=_!==void 0?_:Go;var v=n.getMiterLimit();i.miterLimit=v!==void 0?v:No,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t){var n=t.fillStyle,i=[Rt.SET_FILL_STYLE,n];return typeof n!="string"&&i.push(!0),i},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[Rt.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,n){var i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(n.call(this,t)),t.currentFillStyle=i)},e.prototype.updateStrokeStyle=function(t,n){var i=t.strokeStyle,o=t.lineCap,a=t.lineDash,l=t.lineDashOffset,u=t.lineJoin,h=t.lineWidth,c=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=o||a!=t.currentLineDash&&!hi(t.currentLineDash,a)||t.currentLineDashOffset!=l||t.currentLineJoin!=u||t.currentLineWidth!=h||t.currentMiterLimit!=c)&&(i!==void 0&&n.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=o,t.currentLineDash=a,t.currentLineDashOffset=l,t.currentLineJoin=u,t.currentLineWidth=h,t.currentMiterLimit=c)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var n=[Rt.END_GEOMETRY,t];this.instructions.push(n),this.hitDetectionInstructions.push(n)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=zc(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;vu(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(Bd),zo=gE,vE=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_E=function(r){vE(e,r);function e(t,n,i,o){var a=r.call(this,t,n,i,o)||this;return a.hitDetectionImage_=null,a.image_=null,a.imagePixelRatio_=void 0,a.anchorX_=void 0,a.anchorY_=void 0,a.height_=void 0,a.opacity_=void 0,a.originX_=void 0,a.originY_=void 0,a.rotateWithView_=void 0,a.rotation_=void 0,a.scale_=void 0,a.width_=void 0,a.declutterImageWithText_=void 0,a}return e.prototype.drawPoint=function(t,n){if(!!this.image_){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),o=t.getStride(),a=this.coordinates.length,l=this.appendFlatPointCoordinates(i,o);this.instructions.push([Rt.DRAW_IMAGE,a,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([Rt.DRAW_IMAGE,a,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(n)}},e.prototype.drawMultiPoint=function(t,n){if(!!this.image_){this.beginGeometry(t,n);var i=t.getFlatCoordinates(),o=t.getStride(),a=this.coordinates.length,l=this.appendFlatPointCoordinates(i,o);this.instructions.push([Rt.DRAW_IMAGE,a,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterImageWithText_]),this.hitDetectionInstructions.push([Rt.DRAW_IMAGE,a,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterImageWithText_]),this.endGeometry(n)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,r.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,n){var i=t.getAnchor(),o=t.getSize(),a=t.getHitDetectionImage(),l=t.getImage(this.pixelRatio),u=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=a,this.image_=l,this.height_=o[1],this.opacity_=t.getOpacity(),this.originX_=u[0]*this.imagePixelRatio_,this.originY_=u[1]*this.imagePixelRatio_,this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=o[0],this.declutterImageWithText_=n},e}(zo),yE=_E,mE=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),TE=function(r){mE(e,r);function e(t,n,i,o){return r.call(this,t,n,i,o)||this}return e.prototype.drawFlatCoordinates_=function(t,n,i,o){var a=this.coordinates.length,l=this.appendFlatLineCoordinates(t,n,i,o,!1,!1),u=[Rt.MOVE_TO_LINE_TO,a,l];return this.instructions.push(u),this.hitDetectionInstructions.push(u),i},e.prototype.drawLineString=function(t,n){var i=this.state,o=i.strokeStyle,a=i.lineWidth;if(!(o===void 0||a===void 0)){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([Rt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Mo,Do],ni);var l=t.getFlatCoordinates(),u=t.getStride();this.drawFlatCoordinates_(l,0,l.length,u),this.hitDetectionInstructions.push(Cr),this.endGeometry(n)}},e.prototype.drawMultiLineString=function(t,n){var i=this.state,o=i.strokeStyle,a=i.lineWidth;if(!(o===void 0||a===void 0)){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,n),this.hitDetectionInstructions.push([Rt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],ni);for(var l=t.getEnds(),u=t.getFlatCoordinates(),h=t.getStride(),c=0,_=0,v=l.length;_<v;++_)c=this.drawFlatCoordinates_(u,c,l[_],h);this.hitDetectionInstructions.push(Cr),this.endGeometry(n)}},e.prototype.finish=function(){var t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Cr),this.reverseHitDetectionInstructions(),this.state=null,r.prototype.finish.call(this)},e.prototype.applyStroke=function(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Cr),t.lastStroke=this.coordinates.length),t.lastStroke=0,r.prototype.applyStroke.call(this,t),this.instructions.push(ni)},e}(zo),EE=TE,CE=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),xE=function(r){CE(e,r);function e(t,n,i,o){return r.call(this,t,n,i,o)||this}return e.prototype.drawFlatCoordinatess_=function(t,n,i,o){var a=this.state,l=a.fillStyle!==void 0,u=a.strokeStyle!==void 0,h=i.length;this.instructions.push(ni),this.hitDetectionInstructions.push(ni);for(var c=0;c<h;++c){var _=i[c],v=this.coordinates.length,T=this.appendFlatLineCoordinates(t,n,_,o,!0,!u),E=[Rt.MOVE_TO_LINE_TO,v,T];this.instructions.push(E),this.hitDetectionInstructions.push(E),u&&(this.instructions.push(Lh),this.hitDetectionInstructions.push(Lh)),n=_}return l&&(this.instructions.push(Ca),this.hitDetectionInstructions.push(Ca)),u&&(this.instructions.push(Cr),this.hitDetectionInstructions.push(Cr)),n},e.prototype.drawCircle=function(t,n){var i=this.state,o=i.fillStyle,a=i.strokeStyle;if(!(o===void 0&&a===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Rt.SET_FILL_STYLE,nr]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Rt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var l=t.getFlatCoordinates(),u=t.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(l,0,l.length,u,!1,!1);var c=[Rt.CIRCLE,h];this.instructions.push(ni,c),this.hitDetectionInstructions.push(ni,c),i.fillStyle!==void 0&&(this.instructions.push(Ca),this.hitDetectionInstructions.push(Ca)),i.strokeStyle!==void 0&&(this.instructions.push(Cr),this.hitDetectionInstructions.push(Cr)),this.endGeometry(n)}},e.prototype.drawPolygon=function(t,n){var i=this.state,o=i.fillStyle,a=i.strokeStyle;if(!(o===void 0&&a===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Rt.SET_FILL_STYLE,nr]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Rt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var l=t.getEnds(),u=t.getOrientedFlatCoordinates(),h=t.getStride();this.drawFlatCoordinatess_(u,0,l,h),this.endGeometry(n)}},e.prototype.drawMultiPolygon=function(t,n){var i=this.state,o=i.fillStyle,a=i.strokeStyle;if(!(o===void 0&&a===void 0)){this.setFillStrokeStyles_(),this.beginGeometry(t,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Rt.SET_FILL_STYLE,nr]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Rt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var l=t.getEndss(),u=t.getOrientedFlatCoordinates(),h=t.getStride(),c=0,_=0,v=l.length;_<v;++_)c=this.drawFlatCoordinatess_(u,c,l[_],h);this.endGeometry(n)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(t!==0)for(var n=this.coordinates,i=0,o=n.length;i<o;++i)n[i]=Kr(n[i],t);return r.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state,n=t.fillStyle;n!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)},e}(zo),Ah=xE,wE={POINT:"point",LINE:"line"};function OE(r,e,t,n,i){var o=t,a=t,l=0,u=0,h=t,c,_,v,T,E,w,L,P,F,D;for(_=t;_<n;_+=i){var k=e[_],$=e[_+1];E!==void 0&&(F=k-E,D=$-w,T=Math.sqrt(F*F+D*D),L!==void 0&&(u+=v,c=Math.acos((L*F+P*D)/(v*T)),c>r&&(u>l&&(l=u,o=h,a=_),u=0,h=_-i)),v=T,L=F,P=D),E=k,w=$}return u+=T,u>l?[h,_]:[o,a]}var IE=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Za={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},RE=function(r){IE(e,r);function e(t,n,i,o){var a=r.call(this,t,n,i,o)||this;return a.labels_=null,a.text_="",a.textOffsetX_=0,a.textOffsetY_=0,a.textRotateWithView_=void 0,a.textRotation_=0,a.textFillState_=null,a.fillStates={},a.textStrokeState_=null,a.strokeStates={},a.textState_={},a.textStates={},a.textKey_="",a.fillKey_="",a.strokeKey_="",a.declutterImageWithText_=void 0,a}return e.prototype.finish=function(){var t=r.prototype.finish.call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t},e.prototype.drawText=function(t,n){var i=this.textFillState_,o=this.textStrokeState_,a=this.textState_;if(!(this.text_===""||!a||!i&&!o)){var l=this.coordinates,u=l.length,h=t.getType(),c=null,_=t.getStride();if(a.placement===wE.LINE&&(h==ft.LINE_STRING||h==ft.MULTI_LINE_STRING||h==ft.POLYGON||h==ft.MULTI_POLYGON)){if(!$e(this.getBufferedMaxExtent(),t.getExtent()))return;var v=void 0;if(c=t.getFlatCoordinates(),h==ft.LINE_STRING)v=[c.length];else if(h==ft.MULTI_LINE_STRING)v=t.getEnds();else if(h==ft.POLYGON)v=t.getEnds().slice(0,1);else if(h==ft.MULTI_POLYGON){var T=t.getEndss();v=[];for(var E=0,w=T.length;E<w;++E)v.push(T[E][0])}this.beginGeometry(t,n);for(var L=a.textAlign,P=0,F=void 0,D=0,k=v.length;D<k;++D){if(L==null){var $=OE(a.maxAngle,c,P,v[D],_);P=$[0],F=$[1]}else F=v[D];for(var E=P;E<F;E+=_)l.push(c[E],c[E+1]);var p=l.length;P=v[D],this.drawChars_(u,p),u=p}this.endGeometry(n)}else{var tt=a.overflow?null:[];switch(h){case ft.POINT:case ft.MULTI_POINT:c=t.getFlatCoordinates();break;case ft.LINE_STRING:c=t.getFlatMidpoint();break;case ft.CIRCLE:c=t.getCenter();break;case ft.MULTI_LINE_STRING:c=t.getFlatMidpoints(),_=2;break;case ft.POLYGON:c=t.getFlatInteriorPoint(),a.overflow||tt.push(c[2]/this.resolution),_=3;break;case ft.MULTI_POLYGON:var Y=t.getFlatInteriorPoints();c=[];for(var E=0,w=Y.length;E<w;E+=3)a.overflow||tt.push(Y[E+2]/this.resolution),c.push(Y[E],Y[E+1]);if(c.length===0)return;_=2;break}var p=this.appendFlatPointCoordinates(c,_);if(p===u)return;if(tt&&(p-u)/2!==c.length/_){var J=u/2;tt=tt.filter(function(gt,Ot){var Gt=l[(J+Ot)*2]===c[Ot*_]&&l[(J+Ot)*2+1]===c[Ot*_+1];return Gt||--J,Gt})}this.saveTextStates_(),(a.backgroundFill||a.backgroundStroke)&&(this.setFillStrokeStyle(a.backgroundFill,a.backgroundStroke),a.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),a.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,n);var st=a.padding;if(st!=ei&&(a.scale[0]<0||a.scale[1]<0)){var ct=a.padding[0],at=a.padding[1],_t=a.padding[2],Pt=a.padding[3];a.scale[0]<0&&(at=-at,Pt=-Pt),a.scale[1]<0&&(ct=-ct,_t=-_t),st=[ct,at,_t,Pt]}var vt=this.pixelRatio;this.instructions.push([Rt.DRAW_IMAGE,u,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterImageWithText_,st==ei?ei:st.map(function(gt){return gt*vt}),!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,tt]);var dt=1/vt;this.hitDetectionInstructions.push([Rt.DRAW_IMAGE,u,p,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[dt,dt],NaN,this.declutterImageWithText_,st,!!a.backgroundFill,!!a.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,tt]),this.endGeometry(n)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,n=this.textState_,i=this.textFillState_,o=this.strokeKey_;t&&(o in this.strokeStates||(this.strokeStates[o]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var a=this.textKey_;a in this.textStates||(this.textStates[a]={font:n.font,textAlign:n.textAlign||ko,textBaseline:n.textBaseline||Va,scale:n.scale});var l=this.fillKey_;i&&(l in this.fillStates||(this.fillStates[l]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(t,n){var i=this.textStrokeState_,o=this.textState_,a=this.strokeKey_,l=this.textKey_,u=this.fillKey_;this.saveTextStates_();var h=this.pixelRatio,c=Za[o.textBaseline],_=this.textOffsetY_*h,v=this.text_,T=i?i.lineWidth*Math.abs(o.scale[0])/2:0;this.instructions.push([Rt.DRAW_CHARS,t,n,c,o.overflow,u,o.maxAngle,h,_,a,T*h,v,l,1]),this.hitDetectionInstructions.push([Rt.DRAW_CHARS,t,n,c,o.overflow,u,o.maxAngle,1,_,a,T,v,l,1/h])},e.prototype.setTextStyle=function(t,n){var i,o,a;if(!t)this.text_="";else{var l=t.getFill();l?(o=this.textFillState_,o||(o={},this.textFillState_=o),o.fillStyle=Nn(l.getColor()||nr)):(o=null,this.textFillState_=o);var u=t.getStroke();if(!u)a=null,this.textStrokeState_=a;else{a=this.textStrokeState_,a||(a={},this.textStrokeState_=a);var h=u.getLineDash(),c=u.getLineDashOffset(),_=u.getWidth(),v=u.getMiterLimit();a.lineCap=u.getLineCap()||za,a.lineDash=h?h.slice():Mo,a.lineDashOffset=c===void 0?Do:c,a.lineJoin=u.getLineJoin()||Gi,a.lineWidth=_===void 0?Go:_,a.miterLimit=v===void 0?No:v,a.strokeStyle=Nn(u.getColor()||Fo)}i=this.textState_;var T=t.getFont()||Td;zm(T);var E=t.getScaleArray();i.overflow=t.getOverflow(),i.font=T,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||Va,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||ei,i.scale=E===void 0?[1,1]:E;var w=t.getOffsetX(),L=t.getOffsetY(),P=t.getRotateWithView(),F=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=w===void 0?0:w,this.textOffsetY_=L===void 0?0:L,this.textRotateWithView_=P===void 0?!1:P,this.textRotation_=F===void 0?0:F,this.strokeKey_=a?(typeof a.strokeStyle=="string"?a.strokeStyle:Zt(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.textBaseline||"?"),this.fillKey_=o?typeof o.fillStyle=="string"?o.fillStyle:"|"+Zt(o.fillStyle):""}this.declutterImageWithText_=n},e}(zo),SE=RE,PE={Circle:Ah,Default:zo,Image:yE,LineString:EE,Polygon:Ah,Text:SE},LE=function(){function r(e,t,n,i){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}return r.prototype.finish=function(){var e={};for(var t in this.buildersByZIndex_){e[t]=e[t]||{};var n=this.buildersByZIndex_[t];for(var i in n){var o=n[i].finish();e[t][i]=o}}return e},r.prototype.getBuilder=function(e,t){var n=e!==void 0?e.toString():"0",i=this.buildersByZIndex_[n];i===void 0&&(i={},this.buildersByZIndex_[n]=i);var o=i[t];if(o===void 0){var a=PE[t];o=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=o}return o},r}(),bh=LE,AE=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),bE=function(r){AE(e,r);function e(t){var n=r.call(this)||this;return n.ready=!0,n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=t,n.declutterExecutorGroup=null,n}return e.prototype.getFeatures=function(t){return Yt()},e.prototype.getData=function(t){return null},e.prototype.prepareFrame=function(t){return Yt()},e.prototype.renderFrame=function(t,n){return Yt()},e.prototype.loadedTileCallback=function(t,n,i){t[n]||(t[n]={}),t[n][i.tileCoord.toString()]=i},e.prototype.createLoadedTileFinder=function(t,n,i){return function(o,a){var l=this.loadedTileCallback.bind(this,i,o);return t.forEachLoadedTile(n,o,a,l)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,n,i,o,a){},e.prototype.getDataAtPixel=function(t,n,i){return null},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){var n=t.target;n.getState()===he.LOADED&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var n=t.getState();return n!=he.LOADED&&n!=he.ERROR&&t.addEventListener(Mt.CHANGE,this.boundHandleImageChange_),n==he.IDLE&&(t.load(),n=t.getState()),n==he.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==fi.READY&&t.changed()},e.prototype.disposeInternal=function(){delete this.layer_,r.prototype.disposeInternal.call(this)},e}(Uc),ME=bE,DE=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),vo=null;function NE(){var r=document.createElement("canvas");r.width=1,r.height=1,vo=r.getContext("2d")}var FE=function(r){DE(e,r);function e(t){var n=r.call(this,t)||this;return n.container=null,n.renderedResolution,n.tempTransform=Fn(),n.pixelTransform=Fn(),n.inversePixelTransform=Fn(),n.context=null,n.containerReused=!1,n.pixelContext_=null,n.frameState=null,n}return e.prototype.getImageData=function(t,n,i){vo||NE(),vo.clearRect(0,0,1,1);var o;try{vo.drawImage(t,n,i,1,1,0,0,1,1),o=vo.getImageData(0,0,1,1).data}catch{return null}return o},e.prototype.getBackground=function(t){var n=this.getLayer(),i=n.getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0},e.prototype.useContainer=function(t,n,i,o){var a=this.getLayer().getClassName(),l,u;if(t&&t.className===a&&t.style.opacity===""&&i===1&&(!o||t.style.backgroundColor&&hi(Ya(t.style.backgroundColor),Ya(o)))){var h=t.firstElementChild;h instanceof HTMLCanvasElement&&(u=h.getContext("2d"))}if(u&&u.canvas.style.transform===n?(this.container=t,this.context=u,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){l=document.createElement("div"),l.className=a;var c=l.style;c.position="absolute",c.width="100%",c.height="100%",o&&(c.backgroundColor=o),u=gn();var h=u.canvas;l.appendChild(h),c=h.style,c.position="absolute",c.left="0",c.transformOrigin="top left",this.container=l,this.context=u}},e.prototype.clipUnrotated=function(t,n,i){var o=ci(i),a=vs(i),l=gs(i),u=ps(i);Ee(n.coordinateToPixelTransform,o),Ee(n.coordinateToPixelTransform,a),Ee(n.coordinateToPixelTransform,l),Ee(n.coordinateToPixelTransform,u);var h=this.inversePixelTransform;Ee(h,o),Ee(h,a),Ee(h,l),Ee(h,u),t.save(),t.beginPath(),t.moveTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(l[0]),Math.round(l[1])),t.lineTo(Math.round(u[0]),Math.round(u[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,n,i){var o=this.getLayer();if(o.hasListener(t)){var a=new _d(t,this.inversePixelTransform,i,n);o.dispatchEvent(a)}},e.prototype.preRender=function(t,n){this.frameState=n,this.dispatchRenderEvent_(Ir.PRERENDER,t,n)},e.prototype.postRender=function(t,n){this.dispatchRenderEvent_(Ir.POSTRENDER,t,n)},e.prototype.getRenderTransform=function(t,n,i,o,a,l,u){var h=a/2,c=l/2,_=o/n,v=-_,T=-t[0]+u,E=-t[1];return ir(this.tempTransform,h,c,_,v,-i,T,E)},e.prototype.getDataAtPixel=function(t,n,i){var o=Ee(this.inversePixelTransform,t.slice()),a=this.context,l=this.getLayer(),u=l.getExtent();if(u){var h=Ee(n.pixelToCoordinateTransform,t.slice());if(!Yo(u,h))return null}var c=Math.round(o[0]),_=Math.round(o[1]),v=this.pixelContext_;if(!v){var T=document.createElement("canvas");T.width=1,T.height=1,v=T.getContext("2d"),this.pixelContext_=v}v.clearRect(0,0,1,1);var E;try{v.drawImage(a.canvas,c,_,1,1,0,0,1,1),E=v.getImageData(0,0,1,1).data}catch(w){return w.name==="SecurityError"?(this.pixelContext_=null,new Uint8Array):E}return E[3]===0?null:E},e.prototype.disposeInternal=function(){delete this.frameState,r.prototype.disposeInternal.call(this)},e}(ME),Ud=FE,_e={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};function kE(r,e,t,n,i,o,a,l,u,h,c,_){var v=r[e],T=r[e+1],E=0,w=0,L=0,P=0;function F(){E=v,w=T,e+=n,v=r[e],T=r[e+1],P+=L,L=Math.sqrt((v-E)*(v-E)+(T-w)*(T-w))}do F();while(e<t-n&&P+L<o);for(var D=L===0?0:(o-P)/L,k=Qn(E,v,D),$=Qn(w,T,D),p=e-n,tt=P,Y=o+l*u(h,i,c);e<t-n&&P+L<Y;)F();D=L===0?0:(Y-P)/L;var J=Qn(E,v,D),st=Qn(w,T,D),ct;if(_){var at=[k,$,J,st];Su(at,0,4,2,_,at,at),ct=at[0]>at[2]}else ct=k>J;var _t=Math.PI,Pt=[],vt=p+n===e;e=p,L=0,P=tt,v=r[e],T=r[e+1];var dt;if(vt){F(),dt=Math.atan2(T-w,v-E),ct&&(dt+=dt>0?-_t:_t);var rt=(J+k)/2,gt=(st+$)/2;return Pt[0]=[rt,gt,(Y-o)/2,dt,i],Pt}for(var Ot=0,Gt=i.length;Ot<Gt;){F();var Dt=Math.atan2(T-w,v-E);if(ct&&(Dt+=Dt>0?-_t:_t),dt!==void 0){var Z=Dt-dt;if(Z+=Z>_t?-2*_t:Z<-_t?2*_t:0,Math.abs(Z)>a)return null}dt=Dt;for(var Bt=Ot,St=0;Ot<Gt;++Ot){var de=ct?Gt-Ot-1:Ot,Me=l*u(h,i[de],c);if(e+n<t&&P+L<o+St+Me/2)break;St+=Me}if(Ot!==Bt){var oe=ct?i.substring(Gt-Bt,Gt-Ot):i.substring(Bt,Ot);D=L===0?0:(o+St/2-P)/L;var rt=Qn(E,v,D),gt=Qn(w,T,D);Pt.push([rt,gt,St/2,Dt,oe]),o+=St}}return Pt}var _i=pn(),hr=[],Vn=[],Kn=[],cr=[];function Mh(r){return r[3].declutterBox}var GE=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Dh(r,e){return(e==="start"||e==="end")&&!GE.test(r)&&(e=e==="start"?"left":"right"),Za[e]}function jE(r,e,t){return t>0&&r.push(`
`,""),r.push(e,""),r}var WE=function(){function r(e,t,n,i){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Fn(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={}}return r.prototype.createLabel=function(e,t,n,i){var o=e+t+n+i;if(this.labels_[o])return this.labels_[o];var a=i?this.strokeStates[i]:null,l=n?this.fillStates[n]:null,u=this.textStates[t],h=this.pixelRatio,c=[u.scale[0]*h,u.scale[1]*h],_=Array.isArray(e),v=Dh(_?e[0]:e,u.textAlign||ko),T=i&&a.lineWidth?a.lineWidth:0,E=_?e:e.split(`
`).reduce(jE,[]),w=Km(u,E),L=w.width,P=w.height,F=w.widths,D=w.heights,k=w.lineWidths,$=L+T,p=[],tt=($+2)*c[0],Y=(P+T)*c[1],J={width:tt<0?Math.floor(tt):Math.ceil(tt),height:Y<0?Math.floor(Y):Math.ceil(Y),contextInstructions:p};if((c[0]!=1||c[1]!=1)&&p.push("scale",c),i){p.push("strokeStyle",a.strokeStyle),p.push("lineWidth",T),p.push("lineCap",a.lineCap),p.push("lineJoin",a.lineJoin),p.push("miterLimit",a.miterLimit);var st=_s?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D;st.prototype.setLineDash&&(p.push("setLineDash",[a.lineDash]),p.push("lineDashOffset",a.lineDashOffset))}n&&p.push("fillStyle",l.fillStyle),p.push("textBaseline","middle"),p.push("textAlign","center");for(var ct=.5-v,at=v*$+ct*T,_t=[],Pt=[],vt=0,dt=0,rt=0,gt=0,Ot,Gt=0,Dt=E.length;Gt<Dt;Gt+=2){var Z=E[Gt];if(Z===`
`){dt+=vt,vt=0,at=v*$+ct*T,++gt;continue}var Bt=E[Gt+1]||u.font;Bt!==Ot&&(i&&_t.push("font",Bt),n&&Pt.push("font",Bt),Ot=Bt),vt=Math.max(vt,D[rt]);var St=[Z,at+ct*F[rt]+v*(F[rt]-k[gt]),.5*(T+vt)+dt];at+=F[rt],i&&_t.push("strokeText",St),n&&Pt.push("fillText",St),++rt}return Array.prototype.push.apply(p,_t),Array.prototype.push.apply(p,Pt),this.labels_[o]=J,J},r.prototype.replayTextBackground_=function(e,t,n,i,o,a,l){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,i),e.lineTo.apply(e,o),e.lineTo.apply(e,t),a&&(this.alignFill_=a[2],this.fill_(e)),l&&(this.setStrokeStyle_(e,l),e.stroke())},r.prototype.calculateImageOrLabelDimensions_=function(e,t,n,i,o,a,l,u,h,c,_,v,T,E,w,L){l*=v[0],u*=v[1];var P=n-l,F=i-u,D=o+h>e?e-h:o,k=a+c>t?t-c:a,$=E[3]+D*v[0]+E[1],p=E[0]+k*v[1]+E[2],tt=P-E[3],Y=F-E[0];(w||_!==0)&&(hr[0]=tt,cr[0]=tt,hr[1]=Y,Vn[1]=Y,Vn[0]=tt+$,Kn[0]=Vn[0],Kn[1]=Y+p,cr[1]=Kn[1]);var J;return _!==0?(J=ir(Fn(),n,i,1,1,_,-n,-i),Ee(J,hr),Ee(J,Vn),Ee(J,Kn),Ee(J,cr),jn(Math.min(hr[0],Vn[0],Kn[0],cr[0]),Math.min(hr[1],Vn[1],Kn[1],cr[1]),Math.max(hr[0],Vn[0],Kn[0],cr[0]),Math.max(hr[1],Vn[1],Kn[1],cr[1]),_i)):jn(Math.min(tt,tt+$),Math.min(Y,Y+p),Math.max(tt,tt+$),Math.max(Y,Y+p),_i),T&&(P=Math.round(P),F=Math.round(F)),{drawImageX:P,drawImageY:F,drawImageW:D,drawImageH:k,originX:h,originY:c,declutterBox:{minX:_i[0],minY:_i[1],maxX:_i[2],maxY:_i[3],value:L},canvasTransform:J,scale:v}},r.prototype.replayImageOrLabel_=function(e,t,n,i,o,a,l){var u=!!(a||l),h=i.declutterBox,c=e.canvas,_=l?l[2]*i.scale[0]/2:0,v=h.minX-_<=c.width/t&&h.maxX+_>=0&&h.minY-_<=c.height/t&&h.maxY+_>=0;return v&&(u&&this.replayTextBackground_(e,hr,Vn,Kn,cr,a,l),qm(e,i.canvasTransform,o,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0},r.prototype.fill_=function(e){if(this.alignFill_){var t=Ee(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;e.save(),e.translate(t[0]%n,t[1]%n),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()},r.prototype.setStrokeStyle_=function(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.setLineDash&&(e.lineDashOffset=t[7],e.setLineDash(t[6]))},r.prototype.drawLabelWithPointPlacement_=function(e,t,n,i){var o=this.textStates[t],a=this.createLabel(e,t,i,n),l=this.strokeStates[n],u=this.pixelRatio,h=Dh(Array.isArray(e)?e[0]:e,o.textAlign||ko),c=Za[o.textBaseline||Va],_=l&&l.lineWidth?l.lineWidth:0,v=a.width/u-2*o.scale[0],T=h*v+2*(.5-h)*_,E=c*a.height/u+2*(.5-c)*_;return{label:a,anchorX:T,anchorY:E}},r.prototype.execute_=function(e,t,n,i,o,a,l,u){var h;this.pixelCoordinates_&&hi(n,this.renderedTransform_)?h=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),h=si(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),Xy(this.renderedTransform_,n));for(var c=0,_=i.length,v=0,T,E,w,L,P,F,D,k,$,p,tt,Y,J=0,st=0,ct=null,at=null,_t=this.coordinateCache_,Pt=this.viewRotation_,vt=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,dt={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Pt},rt=this.instructions!=i||this.overlaps?0:200,gt,Ot,Gt,Dt;c<_;){var Z=i[c],Bt=Z[0];switch(Bt){case Rt.BEGIN_GEOMETRY:gt=Z[1],Dt=Z[3],gt.getGeometry()?l!==void 0&&!$e(l,Dt.getExtent())?c=Z[2]+1:++c:c=Z[2];break;case Rt.BEGIN_PATH:J>rt&&(this.fill_(e),J=0),st>rt&&(e.stroke(),st=0),!J&&!st&&(e.beginPath(),L=NaN,P=NaN),++c;break;case Rt.CIRCLE:v=Z[1];var St=h[v],de=h[v+1],Me=h[v+2],oe=h[v+3],pe=Me-St,ue=oe-de,Ue=Math.sqrt(pe*pe+ue*ue);e.moveTo(St+Ue,de),e.arc(St,de,Ue,0,2*Math.PI,!0),++c;break;case Rt.CLOSE_PATH:e.closePath(),++c;break;case Rt.CUSTOM:v=Z[1],T=Z[2];var Fe=Z[3],Pn=Z[4],O=Z.length==6?Z[5]:void 0;dt.geometry=Fe,dt.feature=gt,c in _t||(_t[c]=[]);var b=_t[c];O?O(h,v,T,2,b):(b[0]=h[v],b[1]=h[v+1],b.length=2),Pn(b,dt),++c;break;case Rt.DRAW_IMAGE:v=Z[1],T=Z[2],k=Z[3],E=Z[4],w=Z[5];var B=Z[6],G=Z[7],H=Z[8],et=Z[9],ot=Z[10],Q=Z[11],nt=Z[12],V=Z[13],ht=Z[14];if(!k&&Z.length>=19){$=Z[18],p=Z[19],tt=Z[20],Y=Z[21];var lt=this.drawLabelWithPointPlacement_($,p,tt,Y);k=lt.label,Z[3]=k;var pt=Z[22];E=(lt.anchorX-pt)*this.pixelRatio,Z[4]=E;var Tt=Z[23];w=(lt.anchorY-Tt)*this.pixelRatio,Z[5]=w,B=k.height,Z[6]=B,V=k.width,Z[13]=V}var Ft=void 0;Z.length>24&&(Ft=Z[24]);var Nt=void 0,kt=void 0,Ut=void 0;Z.length>16?(Nt=Z[15],kt=Z[16],Ut=Z[17]):(Nt=ei,kt=!1,Ut=!1),ot&&vt?Q+=Pt:!ot&&!vt&&(Q-=Pt);for(var we=0;v<T;v+=2)if(!(Ft&&Ft[we++]<V/this.pixelRatio)){var ne=this.calculateImageOrLabelDimensions_(k.width,k.height,h[v],h[v+1],V,B,E,w,H,et,Q,nt,o,Nt,kt||Ut,gt),Qe=[e,t,k,ne,G,kt?ct:null,Ut?at:null],fe=void 0,sn=void 0;if(u&&ht){var Xt=T-v;if(!ht[Xt]){ht[Xt]=Qe;continue}if(fe=ht[Xt],delete ht[Xt],sn=Mh(fe),u.collides(sn))continue}u&&u.collides(ne.declutterBox)||(fe&&(u&&u.insert(sn),this.replayImageOrLabel_.apply(this,fe)),u&&u.insert(ne.declutterBox),this.replayImageOrLabel_.apply(this,Qe))}++c;break;case Rt.DRAW_CHARS:var re=Z[1],Yn=Z[2],zi=Z[3],Ko=Z[4];Y=Z[5];var qo=Z[6],Hn=Z[7],Xn=Z[8];tt=Z[9];var Vi=Z[10];$=Z[11],p=Z[12];var Zo=[Z[13],Z[13]],Ar=this.textStates[p],Ln=Ar.font,br=[Ar.scale[0]*Hn,Ar.scale[1]*Hn],Mr=void 0;Ln in this.widths_?Mr=this.widths_[Ln]:(Mr={},this.widths_[Ln]=Mr);var Jo=Nd(h,re,Yn,2),Ki=Math.abs(br[0])*Th(Ln,$,Mr);if(Ko||Ki<=Jo){var ws=this.textStates[p].textAlign,Os=(Jo-Ki)*Za[ws],ar=kE(h,re,Yn,2,$,Os,qo,Math.abs(br[0]),Th,Ln,Mr,vt?0:this.viewRotation_);t:if(ar){var Dr=[],Ye=void 0,Nr=void 0,sr=void 0,Oe=void 0,He=void 0;if(tt)for(Ye=0,Nr=ar.length;Ye<Nr;++Ye){He=ar[Ye],sr=He[4],Oe=this.createLabel(sr,p,"",tt),E=He[2]+(br[0]<0?-Vi:Vi),w=zi*Oe.height+(.5-zi)*2*Vi*br[1]/br[0]-Xn;var ne=this.calculateImageOrLabelDimensions_(Oe.width,Oe.height,He[0],He[1],Oe.width,Oe.height,E,w,0,0,He[3],Zo,!1,ei,!1,gt);if(u&&u.collides(ne.declutterBox))break t;Dr.push([e,t,Oe,ne,1,null,null])}if(Y)for(Ye=0,Nr=ar.length;Ye<Nr;++Ye){He=ar[Ye],sr=He[4],Oe=this.createLabel(sr,p,Y,""),E=He[2],w=zi*Oe.height-Xn;var ne=this.calculateImageOrLabelDimensions_(Oe.width,Oe.height,He[0],He[1],Oe.width,Oe.height,E,w,0,0,He[3],Zo,!1,ei,!1,gt);if(u&&u.collides(ne.declutterBox))break t;Dr.push([e,t,Oe,ne,1,null,null])}u&&u.load(Dr.map(Mh));for(var qi=0,Fr=Dr.length;qi<Fr;++qi)this.replayImageOrLabel_.apply(this,Dr[qi])}}++c;break;case Rt.END_GEOMETRY:if(a!==void 0){gt=Z[1];var Zi=a(gt,Dt);if(Zi)return Zi}++c;break;case Rt.FILL:rt?J++:this.fill_(e),++c;break;case Rt.MOVE_TO_LINE_TO:for(v=Z[1],T=Z[2],Ot=h[v],Gt=h[v+1],F=Ot+.5|0,D=Gt+.5|0,(F!==L||D!==P)&&(e.moveTo(Ot,Gt),L=F,P=D),v+=2;v<T;v+=2)Ot=h[v],Gt=h[v+1],F=Ot+.5|0,D=Gt+.5|0,(v==T-2||F!==L||D!==P)&&(e.lineTo(Ot,Gt),L=F,P=D);++c;break;case Rt.SET_FILL_STYLE:ct=Z,this.alignFill_=Z[2],J&&(this.fill_(e),J=0,st&&(e.stroke(),st=0)),e.fillStyle=Z[1],++c;break;case Rt.SET_STROKE_STYLE:at=Z,st&&(e.stroke(),st=0),this.setStrokeStyle_(e,Z),++c;break;case Rt.STROKE:rt?st++:e.stroke(),++c;break;default:++c;break}}J&&this.fill_(e),st&&e.stroke()},r.prototype.execute=function(e,t,n,i,o,a){this.viewRotation_=i,this.execute_(e,t,n,this.instructions,o,void 0,void 0,a)},r.prototype.executeHitDetection=function(e,t,n,i,o){return this.viewRotation_=n,this.execute_(e,1,t,this.hitDetectionInstructions,!0,i,o)},r}(),BE=WE,sl=[_e.POLYGON,_e.CIRCLE,_e.LINE_STRING,_e.IMAGE,_e.TEXT,_e.DEFAULT],UE=function(){function r(e,t,n,i,o,a){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Fn(),this.createExecutors_(o)}return r.prototype.clip=function(e,t){var n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()},r.prototype.createExecutors_=function(e){for(var t in e){var n=this.executorsByZIndex_[t];n===void 0&&(n={},this.executorsByZIndex_[t]=n);var i=e[t];for(var o in i){var a=i[o];n[o]=new BE(this.resolution_,this.pixelRatio_,this.overlaps_,a)}}},r.prototype.hasExecutors=function(e){for(var t in this.executorsByZIndex_)for(var n=this.executorsByZIndex_[t],i=0,o=e.length;i<o;++i)if(e[i]in n)return!0;return!1},r.prototype.forEachFeatureAtCoordinate=function(e,t,n,i,o,a){i=Math.round(i);var l=i*2+1,u=ir(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-n,-e[0],-e[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=gn(l,l));var c=this.hitDetectionContext_;c.canvas.width!==l||c.canvas.height!==l?(c.canvas.width=l,c.canvas.height=l):h||c.clearRect(0,0,l,l);var _;this.renderBuffer_!==void 0&&(_=pn(),Eo(_,e),vu(_,t*(this.renderBuffer_+i),_));var v=YE(i),T;function E(p,tt){for(var Y=c.getImageData(0,0,l,l).data,J=0,st=v.length;J<st;J++)if(Y[v[J]]>0){if(!a||T!==_e.IMAGE&&T!==_e.TEXT||a.indexOf(p)!==-1){var ct=(v[J]-3)/4,at=i-ct%l,_t=i-(ct/l|0),Pt=o(p,tt,at*at+_t*_t);if(Pt)return Pt}c.clearRect(0,0,l,l);break}}var w=Object.keys(this.executorsByZIndex_).map(Number);w.sort(li);var L,P,F,D,k;for(L=w.length-1;L>=0;--L){var $=w[L].toString();for(F=this.executorsByZIndex_[$],P=sl.length-1;P>=0;--P)if(T=sl[P],D=F[T],D!==void 0&&(k=D.executeHitDetection(c,u,n,E,_),k))return k}},r.prototype.getClipCoords=function(e){var t=this.maxExtent_;if(!t)return null;var n=t[0],i=t[1],o=t[2],a=t[3],l=[n,i,n,a,o,a,o,i];return si(l,0,8,2,e,l),l},r.prototype.isEmpty=function(){return Po(this.executorsByZIndex_)},r.prototype.execute=function(e,t,n,i,o,a,l){var u=Object.keys(this.executorsByZIndex_).map(Number);u.sort(li),this.maxExtent_&&(e.save(),this.clip(e,n));var h=a||sl,c,_,v,T,E,w;for(l&&u.reverse(),c=0,_=u.length;c<_;++c){var L=u[c].toString();for(E=this.executorsByZIndex_[L],v=0,T=h.length;v<T;++v){var P=h[v];w=E[P],w!==void 0&&w.execute(e,t,n,i,o,l)}}this.maxExtent_&&e.restore()},r}(),ll={};function YE(r){if(ll[r]!==void 0)return ll[r];for(var e=r*2+1,t=r*r,n=new Array(t+1),i=0;i<=r;++i)for(var o=0;o<=r;++o){var a=i*i+o*o;if(a>t)break;var l=n[a];l||(l=[],n[a]=l),l.push(((r+i)*e+(r+o))*4+3),i>0&&l.push(((r-i)*e+(r+o))*4+3),o>0&&(l.push(((r+i)*e+(r-o))*4+3),i>0&&l.push(((r-i)*e+(r-o))*4+3))}for(var u=[],i=0,h=n.length;i<h;++i)n[i]&&u.push.apply(u,n[i]);return ll[r]=u,u}var Nh=UE,HE=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),XE=function(r){HE(e,r);function e(t,n,i,o,a,l,u){var h=r.call(this)||this;return h.context_=t,h.pixelRatio_=n,h.extent_=i,h.transform_=o,h.viewRotation_=a,h.squaredTolerance_=l,h.userTransform_=u,h.contextFillState_=null,h.contextStrokeState_=null,h.contextTextState_=null,h.fillState_=null,h.strokeState_=null,h.image_=null,h.imageAnchorX_=0,h.imageAnchorY_=0,h.imageHeight_=0,h.imageOpacity_=0,h.imageOriginX_=0,h.imageOriginY_=0,h.imageRotateWithView_=!1,h.imageRotation_=0,h.imageScale_=[0,0],h.imageWidth_=0,h.text_="",h.textOffsetX_=0,h.textOffsetY_=0,h.textRotateWithView_=!1,h.textRotation_=0,h.textScale_=[0,0],h.textFillState_=null,h.textStrokeState_=null,h.textState_=null,h.pixelCoordinates_=[],h.tmpLocalTransform_=Fn(),h}return e.prototype.drawImages_=function(t,n,i,o){if(!!this.image_){var a=si(t,n,i,o,this.transform_,this.pixelCoordinates_),l=this.context_,u=this.tmpLocalTransform_,h=l.globalAlpha;this.imageOpacity_!=1&&(l.globalAlpha=h*this.imageOpacity_);var c=this.imageRotation_;this.imageRotateWithView_&&(c+=this.viewRotation_);for(var _=0,v=a.length;_<v;_+=2){var T=a[_]-this.imageAnchorX_,E=a[_+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){var w=T+this.imageAnchorX_,L=E+this.imageAnchorY_;ir(u,w,L,1,1,c,-w,-L),l.setTransform.apply(l,u),l.translate(w,L),l.scale(this.imageScale_[0],this.imageScale_[1]),l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),l.setTransform(1,0,0,1,0,0)}else l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,T,E,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(l.globalAlpha=h)}},e.prototype.drawText_=function(t,n,i,o){if(!(!this.textState_||this.text_==="")){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var a=si(t,n,i,o,this.transform_,this.pixelCoordinates_),l=this.context_,u=this.textRotation_;for(this.textRotateWithView_&&(u+=this.viewRotation_);n<i;n+=o){var h=a[n]+this.textOffsetX_,c=a[n+1]+this.textOffsetY_;if(u!==0||this.textScale_[0]!=1||this.textScale_[1]!=1){var _=ir(this.tmpLocalTransform_,h,c,1,1,u,-h,-c);l.setTransform.apply(l,_),l.translate(h,c),l.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&l.strokeText(this.text_,0,0),this.textFillState_&&l.fillText(this.text_,0,0),l.setTransform(1,0,0,1,0,0)}else this.textStrokeState_&&l.strokeText(this.text_,h,c),this.textFillState_&&l.fillText(this.text_,h,c)}}},e.prototype.moveToLineTo_=function(t,n,i,o,a){var l=this.context_,u=si(t,n,i,o,this.transform_,this.pixelCoordinates_);l.moveTo(u[0],u[1]);var h=u.length;a&&(h-=2);for(var c=2;c<h;c+=2)l.lineTo(u[c],u[c+1]);return a&&l.closePath(),i},e.prototype.drawRings_=function(t,n,i,o){for(var a=0,l=i.length;a<l;++a)n=this.moveToLineTo_(t,n,i[a],o,!0);return n},e.prototype.drawCircle=function(t){if(!!$e(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=em(t,this.transform_,this.pixelCoordinates_),i=n[2]-n[0],o=n[3]-n[1],a=Math.sqrt(i*i+o*o),l=this.context_;l.beginPath(),l.arc(n[0],n[1],a,0,2*Math.PI),this.fillState_&&l.fill(),this.strokeState_&&l.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){var n=t.getType();switch(n){case ft.POINT:this.drawPoint(t);break;case ft.LINE_STRING:this.drawLineString(t);break;case ft.POLYGON:this.drawPolygon(t);break;case ft.MULTI_POINT:this.drawMultiPoint(t);break;case ft.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case ft.MULTI_POLYGON:this.drawMultiPolygon(t);break;case ft.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case ft.CIRCLE:this.drawCircle(t);break}},e.prototype.drawFeature=function(t,n){var i=n.getGeometryFunction()(t);!i||!$e(this.extent_,i.getExtent())||(this.setStyle(n),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var n=t.getGeometriesArray(),i=0,o=n.length;i<o;++i)this.drawGeometry(n[i])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!$e(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,i=t.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),n.stroke()}if(this.text_!==""){var o=t.getFlatMidpoint();this.drawText_(o,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var n=t.getExtent();if(!!$e(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,o=t.getFlatCoordinates(),a=0,l=t.getEnds(),u=t.getStride();i.beginPath();for(var h=0,c=l.length;h<c;++h)a=this.moveToLineTo_(o,a,l[h],u,!1);i.stroke()}if(this.text_!==""){var _=t.getFlatMidpoints();this.drawText_(_,0,_.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!$e(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=this.context_;n.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!$e(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var n=this.context_,i=t.getOrientedFlatCoordinates(),o=0,a=t.getEndss(),l=t.getStride();n.beginPath();for(var u=0,h=a.length;u<h;++u){var c=a[u];o=this.drawRings_(i,o,c,l)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){var _=t.getFlatInteriorPoints();this.drawText_(_,0,_.length,2)}}},e.prototype.setContextFillState_=function(t){var n=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,n.fillStyle=t.fillStyle):(n.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var n=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,n.lineCap=t.lineCap),n.setLineDash&&(hi(i.lineDash,t.lineDash)||n.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,n.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,n.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,n.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,n.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,n.strokeStyle=t.strokeStyle)):(n.lineCap=t.lineCap,n.setLineDash&&(n.setLineDash(t.lineDash),n.lineDashOffset=t.lineDashOffset),n.lineJoin=t.lineJoin,n.lineWidth=t.lineWidth,n.miterLimit=t.miterLimit,n.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var n=this.context_,i=this.contextTextState_,o=t.textAlign?t.textAlign:ko;i?(i.font!=t.font&&(i.font=t.font,n.font=t.font),i.textAlign!=o&&(i.textAlign=o,n.textAlign=o),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,n.textBaseline=t.textBaseline)):(n.font=t.font,n.textAlign=o,n.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:o,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,n){var i=this;if(!t)this.fillState_=null;else{var o=t.getColor();this.fillState_={fillStyle:Nn(o||nr)}}if(!n)this.strokeState_=null;else{var a=n.getColor(),l=n.getLineCap(),u=n.getLineDash(),h=n.getLineDashOffset(),c=n.getLineJoin(),_=n.getWidth(),v=n.getMiterLimit(),T=u||Mo;this.strokeState_={lineCap:l!==void 0?l:za,lineDash:this.pixelRatio_===1?T:T.map(function(E){return E*i.pixelRatio_}),lineDashOffset:(h||Do)*this.pixelRatio_,lineJoin:c!==void 0?c:Gi,lineWidth:(_!==void 0?_:Go)*this.pixelRatio_,miterLimit:v!==void 0?v:No,strokeStyle:Nn(a||Fo)}}},e.prototype.setImageStyle=function(t){var n;if(!t||!(n=t.getSize())){this.image_=null;return}var i=t.getAnchor(),o=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*this.pixelRatio_,this.imageAnchorY_=i[1]*this.pixelRatio_,this.imageHeight_=n[1]*this.pixelRatio_,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScaleArray(),this.imageWidth_=n[0]*this.pixelRatio_},e.prototype.setTextStyle=function(t){if(!t)this.text_="";else{var n=t.getFill();if(!n)this.textFillState_=null;else{var i=n.getColor();this.textFillState_={fillStyle:Nn(i||nr)}}var o=t.getStroke();if(!o)this.textStrokeState_=null;else{var a=o.getColor(),l=o.getLineCap(),u=o.getLineDash(),h=o.getLineDashOffset(),c=o.getLineJoin(),_=o.getWidth(),v=o.getMiterLimit();this.textStrokeState_={lineCap:l!==void 0?l:za,lineDash:u||Mo,lineDashOffset:h||Do,lineJoin:c!==void 0?c:Gi,lineWidth:_!==void 0?_:Go,miterLimit:v!==void 0?v:No,strokeStyle:Nn(a||Fo)}}var T=t.getFont(),E=t.getOffsetX(),w=t.getOffsetY(),L=t.getRotateWithView(),P=t.getRotation(),F=t.getScaleArray(),D=t.getText(),k=t.getTextAlign(),$=t.getTextBaseline();this.textState_={font:T!==void 0?T:Td,textAlign:k!==void 0?k:ko,textBaseline:$!==void 0?$:Va},this.text_=D!==void 0?Array.isArray(D)?D.reduce(function(p,tt,Y){return p+=Y%2?" ":tt},""):D:"",this.textOffsetX_=E!==void 0?this.pixelRatio_*E:0,this.textOffsetY_=w!==void 0?this.pixelRatio_*w:0,this.textRotateWithView_=L!==void 0?L:!1,this.textRotation_=P!==void 0?P:0,this.textScale_=[this.pixelRatio_*F[0],this.pixelRatio_*F[1]]}},e}(Bd),$E=XE,mr={FRACTION:"fraction",PIXELS:"pixels"},fn={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},zE=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),VE=function(r){zE(e,r);function e(t,n,i,o){var a=r.call(this)||this;return a.extent=t,a.pixelRatio_=i,a.resolution=n,a.state=o,a}return e.prototype.changed=function(){this.dispatchEvent(Mt.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return Yt()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){Yt()},e}(Ui),KE=VE,qE=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){qE(e,r);function e(t,n,i,o,a,l){var u=r.call(this,t,n,i,he.IDLE)||this;return u.src_=o,u.image_=new Image,a!==null&&(u.image_.crossOrigin=a),u.unlisten_=null,u.state=he.IDLE,u.imageLoadFunction_=l,u}return e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=he.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){this.resolution===void 0&&(this.resolution=Rn(this.extent)/this.image_.height),this.state=he.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){(this.state==he.IDLE||this.state==he.ERROR)&&(this.state=he.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=Wu(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t,this.resolution=Rn(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e})(KE);function Wu(r,e,t){var n=r,i=!0,o=!1,a=!1,l=[ja(n,Mt.LOAD,function(){a=!0,o||e()})];return n.src&&Yy?(o=!0,n.decode().then(function(){i&&e()}).catch(function(u){i&&(a?e():t())})):l.push(ja(n,Mt.ERROR,t)),function(){i=!1,l.forEach(ce)}}var ZE=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),lo=null,JE=function(r){ZE(e,r);function e(t,n,i,o,a,l){var u=r.call(this)||this;return u.hitDetectionImage_=null,u.image_=t||new Image,o!==null&&(u.image_.crossOrigin=o),u.canvas_={},u.color_=l,u.unlisten_=null,u.imageState_=a,u.size_=i,u.src_=n,u.tainted_,u}return e.prototype.isTainted_=function(){if(this.tainted_===void 0&&this.imageState_===he.LOADED){lo||(lo=gn(1,1)),lo.drawImage(this.image_,0,0);try{lo.getImageData(0,0,1,1),this.tainted_=!1}catch{lo=null,this.tainted_=!0}}return this.tainted_===!0},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(Mt.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=he.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=he.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_},e.prototype.getPixelRatio=function(t){return this.replaceColor_(t),this.canvas_[t]?t:1},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(){if(!this.hitDetectionImage_)if(this.isTainted_()){var t=this.size_[0],n=this.size_[1],i=gn(t,n);i.fillRect(0,0,t,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==he.IDLE){this.imageState_=he.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=Wu(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(t){if(!(!this.color_||this.canvas_[t]||this.imageState_!==he.LOADED)){var n=document.createElement("canvas");this.canvas_[t]=n,n.width=Math.ceil(this.image_.width*t),n.height=Math.ceil(this.image_.height*t);var i=n.getContext("2d");if(i.scale(t,t),i.drawImage(this.image_,0,0),i.globalCompositeOperation="multiply",i.globalCompositeOperation==="multiply"||this.isTainted_())i.fillStyle=pd(this.color_),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(this.image_,0,0);else{for(var o=i.getImageData(0,0,n.width,n.height),a=o.data,l=this.color_[0]/255,u=this.color_[1]/255,h=this.color_[2]/255,c=this.color_[3],_=0,v=a.length;_<v;_+=4)a[_]*=l,a[_+1]*=u,a[_+2]*=h,a[_+3]*=c;i.putImageData(o,0,0)}}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Ui);function QE(r,e,t,n,i,o){var a=Ha.get(e,n,o);return a||(a=new JE(r,e,t,n,i,o),Ha.set(e,n,o,a)),a}var tC=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),eC=function(r){tC(e,r);function e(t){var n=this,i=t||{},o=i.opacity!==void 0?i.opacity:1,a=i.rotation!==void 0?i.rotation:0,l=i.scale!==void 0?i.scale:1,u=i.rotateWithView!==void 0?i.rotateWithView:!1;n=r.call(this,{opacity:o,rotation:a,scale:l,displacement:i.displacement!==void 0?i.displacement:[0,0],rotateWithView:u})||this,n.anchor_=i.anchor!==void 0?i.anchor:[.5,.5],n.normalizedAnchor_=null,n.anchorOrigin_=i.anchorOrigin!==void 0?i.anchorOrigin:fn.TOP_LEFT,n.anchorXUnits_=i.anchorXUnits!==void 0?i.anchorXUnits:mr.FRACTION,n.anchorYUnits_=i.anchorYUnits!==void 0?i.anchorYUnits:mr.FRACTION,n.crossOrigin_=i.crossOrigin!==void 0?i.crossOrigin:null;var h=i.img!==void 0?i.img:null;n.imgSize_=i.imgSize;var c=i.src;Ht(!(c!==void 0&&h),4),Ht(!h||h&&n.imgSize_,5),(c===void 0||c.length===0)&&h&&(c=h.src||Zt(h)),Ht(c!==void 0&&c.length>0,6);var _=i.src!==void 0?he.IDLE:he.LOADED;return n.color_=i.color!==void 0?Ya(i.color):null,n.iconImage_=QE(h,c,n.imgSize_!==void 0?n.imgSize_:null,n.crossOrigin_,_,n.color_),n.offset_=i.offset!==void 0?i.offset:[0,0],n.offsetOrigin_=i.offsetOrigin!==void 0?i.offsetOrigin:fn.TOP_LEFT,n.origin_=null,n.size_=i.size!==void 0?i.size:null,n}return e.prototype.clone=function(){var t=this.getScale();return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc()})},e.prototype.getAnchor=function(){var t=this.normalizedAnchor_;if(!t){t=this.anchor_;var n=this.getSize();if(this.anchorXUnits_==mr.FRACTION||this.anchorYUnits_==mr.FRACTION){if(!n)return null;t=this.anchor_.slice(),this.anchorXUnits_==mr.FRACTION&&(t[0]*=n[0]),this.anchorYUnits_==mr.FRACTION&&(t[1]*=n[1])}if(this.anchorOrigin_!=fn.TOP_LEFT){if(!n)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_==fn.TOP_RIGHT||this.anchorOrigin_==fn.BOTTOM_RIGHT)&&(t[0]=-t[0]+n[0]),(this.anchorOrigin_==fn.BOTTOM_LEFT||this.anchorOrigin_==fn.BOTTOM_RIGHT)&&(t[1]=-t[1]+n[1])}this.normalizedAnchor_=t}var i=this.getDisplacement();return[t[0]-i[0],t[1]+i[1]]},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getPixelRatio=function(t){return this.iconImage_.getPixelRatio(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(){return this.iconImage_.getHitDetectionImage()},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=fn.TOP_LEFT){var n=this.getSize(),i=this.iconImage_.getSize();if(!n||!i)return null;t=t.slice(),(this.offsetOrigin_==fn.TOP_RIGHT||this.offsetOrigin_==fn.BOTTOM_RIGHT)&&(t[0]=i[0]-n[0]-t[0]),(this.offsetOrigin_==fn.BOTTOM_LEFT||this.offsetOrigin_==fn.BOTTOM_RIGHT)&&(t[1]=i[1]-n[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(Mt.CHANGE,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(Mt.CHANGE,t)},e}(jd),nC=eC,Dn=.5;function rC(r,e,t,n,i,o,a){var l=r[0]*Dn,u=r[1]*Dn,h=gn(l,u);h.imageSmoothingEnabled=!1;for(var c=h.canvas,_=new $E(h,Dn,i,null,a),v=t.length,T=Math.floor((256*256*256-1)/v),E={},w=1;w<=v;++w){var L=t[w-1],P=L.getStyleFunction()||n;if(!!n){var F=P(L,o);if(!!F){Array.isArray(F)||(F=[F]);for(var D=w*T,k="#"+("000000"+D.toString(16)).slice(-6),$=0,p=F.length;$<p;++$){var tt=F[$],Y=tt.getGeometryFunction()(L);if(!(!Y||!$e(i,Y.getExtent()))){var J=tt.clone(),st=J.getFill();st&&st.setColor(k);var ct=J.getStroke();ct&&(ct.setColor(k),ct.setLineDash(null)),J.setText(void 0);var at=tt.getImage();if(at&&at.getOpacity()!==0){var _t=at.getImageSize();if(!_t)continue;var Pt=gn(_t[0],_t[1],void 0,{alpha:!1}),vt=Pt.canvas;Pt.fillStyle=k,Pt.fillRect(0,0,vt.width,vt.height),J.setImage(new nC({img:vt,imgSize:_t,anchor:at.getAnchor(),anchorXUnits:mr.PIXELS,anchorYUnits:mr.PIXELS,offset:at.getOrigin(),opacity:1,size:at.getSize(),scale:at.getScale(),rotation:at.getRotation(),rotateWithView:at.getRotateWithView()}))}var dt=J.getZIndex()||0,rt=E[dt];rt||(rt={},E[dt]=rt,rt[ft.POLYGON]=[],rt[ft.CIRCLE]=[],rt[ft.LINE_STRING]=[],rt[ft.POINT]=[]),rt[Y.getType().replace("Multi","")].push(Y,J)}}}}}for(var gt=Object.keys(E).map(Number).sort(li),w=0,Ot=gt.length;w<Ot;++w){var rt=E[gt[w]];for(var Gt in rt)for(var Dt=rt[Gt],$=0,p=Dt.length;$<p;$+=2){_.setStyle(Dt[$+1]);for(var Z=0,Bt=e.length;Z<Bt;++Z)_.setTransform(e[Z]),_.drawGeometry(Dt[$])}}return h.getImageData(0,0,c.width,c.height)}function iC(r,e,t){var n=[];if(t){var i=Math.floor(Math.round(r[0])*Dn),o=Math.floor(Math.round(r[1])*Dn),a=(Ce(i,0,t.width-1)+Ce(o,0,t.height-1)*t.width)*4,l=t.data[a],u=t.data[a+1],h=t.data[a+2],c=h+256*(u+256*l),_=Math.floor((256*256*256-1)/e.length);c&&c%_===0&&n.push(e[c/_-1])}return n}var oC=.5,Yd={Point:pC,LineString:hC,Polygon:vC,MultiPoint:gC,MultiLineString:cC,MultiPolygon:dC,GeometryCollection:fC,Circle:lC};function aC(r,e){return parseInt(Zt(r),10)-parseInt(Zt(e),10)}function sC(r,e){var t=Hl(r,e);return t*t}function Hl(r,e){return oC*r/e}function lC(r,e,t,n,i){var o=t.getFill(),a=t.getStroke();if(o||a){var l=r.getBuilder(t.getZIndex(),_e.CIRCLE);l.setFillStrokeStyle(o,a),l.drawCircle(e,n)}var u=t.getText();if(u&&u.getText()){var h=(i||r).getBuilder(t.getZIndex(),_e.TEXT);h.setTextStyle(u),h.drawText(e,n)}}function Fh(r,e,t,n,i,o,a){var l=!1,u=t.getImage();if(u){var h=u.getImageState();h==he.LOADED||h==he.ERROR?u.unlistenImageChange(i):(h==he.IDLE&&u.load(),h=u.getImageState(),u.listenImageChange(i),l=!0)}return uC(r,e,t,n,o,a),l}function uC(r,e,t,n,i,o){var a=t.getGeometryFunction()(e);if(!!a){var l=a.simplifyTransformed(n,i),u=t.getRenderer();if(u)Hd(r,l,t,e);else{var h=Yd[l.getType()];h(r,l,t,e,o)}}}function Hd(r,e,t,n){if(e.getType()==ft.GEOMETRY_COLLECTION){for(var i=e.getGeometries(),o=0,a=i.length;o<a;++o)Hd(r,i[o],t,n);return}var l=r.getBuilder(t.getZIndex(),_e.DEFAULT);l.drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer())}function fC(r,e,t,n,i){var o=e.getGeometriesArray(),a,l;for(a=0,l=o.length;a<l;++a){var u=Yd[o[a].getType()];u(r,o[a],t,n,i)}}function hC(r,e,t,n,i){var o=t.getStroke();if(o){var a=r.getBuilder(t.getZIndex(),_e.LINE_STRING);a.setFillStrokeStyle(null,o),a.drawLineString(e,n)}var l=t.getText();if(l&&l.getText()){var u=(i||r).getBuilder(t.getZIndex(),_e.TEXT);u.setTextStyle(l),u.drawText(e,n)}}function cC(r,e,t,n,i){var o=t.getStroke();if(o){var a=r.getBuilder(t.getZIndex(),_e.LINE_STRING);a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,n)}var l=t.getText();if(l&&l.getText()){var u=(i||r).getBuilder(t.getZIndex(),_e.TEXT);u.setTextStyle(l),u.drawText(e,n)}}function dC(r,e,t,n,i){var o=t.getFill(),a=t.getStroke();if(a||o){var l=r.getBuilder(t.getZIndex(),_e.POLYGON);l.setFillStrokeStyle(o,a),l.drawMultiPolygon(e,n)}var u=t.getText();if(u&&u.getText()){var h=(i||r).getBuilder(t.getZIndex(),_e.TEXT);h.setTextStyle(u),h.drawText(e,n)}}function pC(r,e,t,n,i){var o=t.getImage(),a=t.getText(),l;if(i&&(r=i,l=o&&a&&a.getText()?{}:void 0),o){if(o.getImageState()!=he.LOADED)return;var u=r.getBuilder(t.getZIndex(),_e.IMAGE);u.setImageStyle(o,l),u.drawPoint(e,n)}if(a&&a.getText()){var h=r.getBuilder(t.getZIndex(),_e.TEXT);h.setTextStyle(a,l),h.drawText(e,n)}}function gC(r,e,t,n,i){var o=t.getImage(),a=t.getText(),l;if(i&&(r=i,l=o&&a&&a.getText()?{}:void 0),o){if(o.getImageState()!=he.LOADED)return;var u=r.getBuilder(t.getZIndex(),_e.IMAGE);u.setImageStyle(o,l),u.drawMultiPoint(e,n)}if(a&&a.getText()){var h=(i||r).getBuilder(t.getZIndex(),_e.TEXT);h.setTextStyle(a,l),h.drawText(e,n)}}function vC(r,e,t,n,i){var o=t.getFill(),a=t.getStroke();if(o||a){var l=r.getBuilder(t.getZIndex(),_e.POLYGON);l.setFillStrokeStyle(o,a),l.drawPolygon(e,n)}var u=t.getText();if(u&&u.getText()){var h=(i||r).getBuilder(t.getZIndex(),_e.TEXT);h.setTextStyle(u),h.drawText(e,n)}}var _C=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),yC=function(r){_C(e,r);function e(t){var n=r.call(this,t)||this;return n.boundHandleStyleImageChange_=n.handleStyleImageChange_.bind(n),n.animatingOrInteracting_,n.dirty_=!1,n.hitDetectionImageData_=null,n.renderedFeatures_=null,n.renderedRevision_=-1,n.renderedResolution_=NaN,n.renderedExtent_=pn(),n.wrappedRenderedExtent_=pn(),n.renderedRotation_,n.renderedCenter_=null,n.renderedProjection_=null,n.renderedRenderOrder_=null,n.replayGroup_=null,n.replayGroupChanged=!0,n.declutterExecutorGroup=null,n.clipping=!0,n}return e.prototype.renderWorlds=function(t,n,i){var o=n.extent,a=n.viewState,l=a.center,u=a.resolution,h=a.projection,c=a.rotation,_=h.getExtent(),v=this.getLayer().getSource(),T=n.pixelRatio,E=n.viewHints,w=!(E[je.ANIMATING]||E[je.INTERACTING]),L=this.context,P=Math.round(n.size[0]*T),F=Math.round(n.size[1]*T),D=v.getWrapX()&&h.canWrapX(),k=D?ye(_):null,$=D?Math.ceil((o[2]-_[2])/k)+1:1,p=D?Math.floor((o[0]-_[0])/k):0;do{var tt=this.getRenderTransform(l,u,c,T,P,F,p*k);t.execute(L,1,tt,c,w,void 0,i)}while(++p<$)},e.prototype.renderDeclutter=function(t){this.declutterExecutorGroup&&this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree)},e.prototype.renderFrame=function(t,n){var i=t.pixelRatio,o=t.layerStatesArray[t.layerIndex];$y(this.pixelTransform,1/i,1/i),Ru(this.inversePixelTransform,this.pixelTransform);var a=rd(this.pixelTransform);this.useContainer(n,a,o.opacity,this.getBackground(t));var l=this.context,u=l.canvas,h=this.replayGroup_,c=this.declutterExecutorGroup;if((!h||h.isEmpty())&&(!c||c.isEmpty()))return null;var _=Math.round(t.size[0]*i),v=Math.round(t.size[1]*i);u.width!=_||u.height!=v?(u.width=_,u.height=v,u.style.transform!==a&&(u.style.transform=a)):this.containerReused||l.clearRect(0,0,_,v),this.preRender(l,t);var T=t.viewState;T.projection;var E=!1,w=!0;if(o.extent&&this.clipping){var L=Qr(o.extent);w=$e(L,t.extent),E=w&&!Ri(L,t.extent),E&&this.clipUnrotated(l,t,L)}w&&this.renderWorlds(h,t),E&&l.restore(),this.postRender(l,t);var P=md(o.opacity),F=this.container;return P!==F.style.opacity&&(F.style.opacity=P),this.renderedRotation_!==T.rotation&&(this.renderedRotation_=T.rotation,this.hitDetectionImageData_=null),this.container},e.prototype.getFeatures=function(t){return new Promise(function(n){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var i=[this.context.canvas.width,this.context.canvas.height];Ee(this.pixelTransform,i);var o=this.renderedCenter_,a=this.renderedResolution_,l=this.renderedRotation_,u=this.renderedProjection_,h=this.wrappedRenderedExtent_,c=this.getLayer(),_=[],v=i[0]*Dn,T=i[1]*Dn;_.push(this.getRenderTransform(o,a,l,Dn,v,T,0).slice());var E=c.getSource(),w=u.getExtent();if(E.getWrapX()&&u.canWrapX()&&!Ri(w,h)){for(var L=h[0],P=ye(w),F=0,D=void 0;L<w[0];)--F,D=P*F,_.push(this.getRenderTransform(o,a,l,Dn,v,T,D).slice()),L+=P;for(F=0,L=h[2];L>w[2];)++F,D=P*F,_.push(this.getRenderTransform(o,a,l,Dn,v,T,D).slice()),L-=P}this.hitDetectionImageData_=rC(i,_,this.renderedFeatures_,c.getStyleFunction(),h,a,l)}n(iC(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,n,i,o,a){var l=this;if(!!this.replayGroup_){var u=n.viewState.resolution,h=n.viewState.rotation,c=this.getLayer(),_={},v=function(w,L,P){var F=Zt(w),D=_[F];if(D){if(D!==!0&&P<D.distanceSq){if(P===0)return _[F]=!0,a.splice(a.lastIndexOf(D),1),o(w,c,L);D.geometry=L,D.distanceSq=P}}else{if(P===0)return _[F]=!0,o(w,c,L);a.push(_[F]={feature:w,layer:c,geometry:L,distanceSq:P,callback:o})}},T,E=[this.replayGroup_];return this.declutterExecutorGroup&&E.push(this.declutterExecutorGroup),E.some(function(w){return T=w.forEachFeatureAtCoordinate(t,u,h,i,v,w===l.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map(function(L){return L.value}):null)}),T}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var n=this.getLayer(),i=n.getSource();if(!i)return!1;var o=t.viewHints[je.ANIMATING],a=t.viewHints[je.INTERACTING],l=n.getUpdateWhileAnimating(),u=n.getUpdateWhileInteracting();if(!this.dirty_&&!l&&o||!u&&a)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var h=t.extent,c=t.viewState,_=c.projection,v=c.resolution,T=t.pixelRatio,E=n.getRevision(),w=n.getRenderBuffer(),L=n.getRenderOrder();L===void 0&&(L=aC);var P=c.center.slice(),F=vu(h,w*v),D=F.slice(),k=[F.slice()],$=_.getExtent();if(i.getWrapX()&&_.canWrapX()&&!Ri($,t.extent)){var p=ye($),tt=Math.max(ye(F)/2,p);F[0]=$[0]-tt,F[2]=$[2]+tt,qc(P,_);var Y=my(k[0],_);Y[0]<$[0]&&Y[2]<$[2]?k.push([Y[0]+p,Y[1],Y[2]+p,Y[3]]):Y[0]>$[0]&&Y[2]>$[2]&&k.push([Y[0]-p,Y[1],Y[2]-p,Y[3]])}if(!this.dirty_&&this.renderedResolution_==v&&this.renderedRevision_==E&&this.renderedRenderOrder_==L&&Ri(this.wrappedRenderedExtent_,F))return hi(this.renderedExtent_,D)||(this.hitDetectionImageData_=null,this.renderedExtent_=D),this.renderedCenter_=P,this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var J=new bh(Hl(v,T),F,v,T),st;this.getLayer().getDeclutter()&&(st=new bh(Hl(v,T),F,v,T));for(var ct,at,_t,at=0,_t=k.length;at<_t;++at)i.loadFeatures(k[at],v,_);var Pt=sC(v,T),vt=function(Gt){var Dt,Z=Gt.getStyleFunction()||n.getStyleFunction();if(Z&&(Dt=Z(Gt,v)),Dt){var Bt=this.renderFeature(Gt,Pt,Dt,J,ct,st);this.dirty_=this.dirty_||Bt}}.bind(this),dt=Qc(F),rt=i.getFeaturesInExtent(dt);L&&rt.sort(L);for(var at=0,_t=rt.length;at<_t;++at)vt(rt[at]);this.renderedFeatures_=rt;var gt=J.finish(),Ot=new Nh(F,v,T,i.getOverlaps(),gt,n.getRenderBuffer());return st&&(this.declutterExecutorGroup=new Nh(F,v,T,i.getOverlaps(),st.finish(),n.getRenderBuffer())),this.renderedResolution_=v,this.renderedRevision_=E,this.renderedRenderOrder_=L,this.renderedExtent_=D,this.wrappedRenderedExtent_=F,this.renderedCenter_=P,this.renderedProjection_=_,this.replayGroup_=Ot,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,n,i,o,a,l){if(!i)return!1;var u=!1;if(Array.isArray(i))for(var h=0,c=i.length;h<c;++h)u=Fh(o,t,i[h],n,this.boundHandleStyleImageChange_,a,l)||u;else u=Fh(o,t,i,n,this.boundHandleStyleImageChange_,a,l);return u},e}(Ud),mC=yC,TC=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),EC=function(r){TC(e,r);function e(t){return r.call(this,t)||this}return e.prototype.createRenderer=function(){return new mC(this)},e}(cE),Xd=EC,CC=function(){function r(e){this.rbush_=new Gd(e),this.items_={}}return r.prototype.insert=function(e,t){var n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[Zt(t)]=n},r.prototype.load=function(e,t){for(var n=new Array(t.length),i=0,o=t.length;i<o;i++){var a=e[i],l=t[i],u={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:l};n[i]=u,this.items_[Zt(l)]=u}this.rbush_.load(n)},r.prototype.remove=function(e){var t=Zt(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null},r.prototype.update=function(e,t){var n=this.items_[Zt(t)],i=[n.minX,n.minY,n.maxX,n.maxY];Lo(i,e)||(this.remove(t),this.insert(e,t))},r.prototype.getAll=function(){var e=this.rbush_.all();return e.map(function(t){return t.value})},r.prototype.getInExtent=function(e){var t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]},n=this.rbush_.search(t);return n.map(function(i){return i.value})},r.prototype.forEach=function(e){return this.forEach_(this.getAll(),e)},r.prototype.forEachInExtent=function(e,t){return this.forEach_(this.getInExtent(e),t)},r.prototype.forEach_=function(e,t){for(var n,i=0,o=e.length;i<o;i++)if(n=t(e[i]),n)return n;return n},r.prototype.isEmpty=function(){return Po(this.items_)},r.prototype.clear=function(){this.rbush_.clear(),this.items_={}},r.prototype.getExtent=function(e){var t=this.rbush_.toJSON();return jn(t.minX,t.minY,t.maxX,t.maxY,e)},r.prototype.concat=function(e){this.rbush_.load(e.rbush_.all());for(var t in e.items_)this.items_[t]=e.items_[t]},r}(),kh=CC,xC=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),wC=function(r){xC(e,r);function e(t){var n=r.call(this)||this;n.projection=Sn(t.projection),n.attributions_=Gh(t.attributions),n.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,n.loading=!1,n.state_=t.state!==void 0?t.state:fi.READY,n.wrapX_=t.wrapX!==void 0?t.wrapX:!1,n.interpolate_=!!t.interpolate,n.viewResolver=null,n.viewRejector=null;var i=n;return n.viewPromise_=new Promise(function(o,a){i.viewResolver=o,i.viewRejector=a}),n}return e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return Yt()},e.prototype.getView=function(){return this.viewPromise_},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getInterpolate=function(){return this.interpolate_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=Gh(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(Un);function Gh(r){return r?Array.isArray(r)?function(e){return r}:typeof r=="function"?r:function(e){return[r]}:null}var $d=wC,Tn={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function OC(r,e){return[[-1/0,-1/0,1/0,1/0]]}var IC=!1;function RC(r,e,t,n,i,o,a){var l=new XMLHttpRequest;l.open("GET",typeof r=="function"?r(t,n,i):r,!0),e.getType()==oo.ARRAY_BUFFER&&(l.responseType="arraybuffer"),l.withCredentials=IC,l.onload=function(u){if(!l.status||l.status>=200&&l.status<300){var h=e.getType(),c=void 0;h==oo.JSON||h==oo.TEXT?c=l.responseText:h==oo.XML?(c=l.responseXML,c||(c=new DOMParser().parseFromString(l.responseText,"application/xml"))):h==oo.ARRAY_BUFFER&&(c=l.response),c?o(e.readFeatures(c,{extent:t,featureProjection:i}),e.readProjection(c)):a()}else a()},l.onerror=a,l.send()}function jh(r,e){return function(t,n,i,o,a){var l=this;RC(r,e,t,n,i,function(u,h){l.addFeatures(u),o!==void 0&&o(u)},a||ui)}}var zd=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),dr=function(r){zd(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.feature=n,o.features=i,o}return e}(Bn),SC=function(r){zd(e,r);function e(t){var n=this,i=t||{};n=r.call(this,{attributions:i.attributions,interpolate:!0,projection:void 0,state:fi.READY,wrapX:i.wrapX!==void 0?i.wrapX:!0})||this,n.on,n.once,n.un,n.loader_=ui,n.format_=i.format,n.overlaps_=i.overlaps===void 0?!0:i.overlaps,n.url_=i.url,i.loader!==void 0?n.loader_=i.loader:n.url_!==void 0&&(Ht(n.format_,7),n.loader_=jh(n.url_,n.format_)),n.strategy_=i.strategy!==void 0?i.strategy:OC;var o=i.useSpatialIndex!==void 0?i.useSpatialIndex:!0;n.featuresRtree_=o?new kh:null,n.loadedExtentsRtree_=new kh,n.loadingExtentsCount_=0,n.nullGeometryFeatures_={},n.idIndex_={},n.uidIndex_={},n.featureChangeKeys_={},n.featuresCollection_=null;var a,l;return Array.isArray(i.features)?l=i.features:i.features&&(a=i.features,l=a.getArray()),!o&&a===void 0&&(a=new ze(l)),l!==void 0&&n.addFeaturesInternal(l),a!==void 0&&n.bindFeaturesCollection_(a),n}return e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var n=Zt(t);if(!this.addToIndex_(n,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(n,t);var i=t.getGeometry();if(i){var o=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(o,t)}else this.nullGeometryFeatures_[n]=t;this.dispatchEvent(new dr(Tn.ADDFEATURE,t))},e.prototype.setupChangeEvents_=function(t,n){this.featureChangeKeys_[t]=[zt(n,Mt.CHANGE,this.handleFeatureChange_,this),zt(n,Fi.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,n){var i=!0,o=n.getId();return o!==void 0&&(o.toString()in this.idIndex_?i=!1:this.idIndex_[o.toString()]=n),i&&(Ht(!(t in this.uidIndex_),30),this.uidIndex_[t]=n),i},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var n=[],i=[],o=[],a=0,l=t.length;a<l;a++){var u=t[a],h=Zt(u);this.addToIndex_(h,u)&&i.push(u)}for(var a=0,c=i.length;a<c;a++){var u=i[a],h=Zt(u);this.setupChangeEvents_(h,u);var _=u.getGeometry();if(_){var v=_.getExtent();n.push(v),o.push(u)}else this.nullGeometryFeatures_[h]=u}if(this.featuresRtree_&&this.featuresRtree_.load(n,o),this.hasListener(Tn.ADDFEATURE))for(var a=0,T=i.length;a<T;a++)this.dispatchEvent(new dr(Tn.ADDFEATURE,i[a]))},e.prototype.bindFeaturesCollection_=function(t){var n=!1;this.addEventListener(Tn.ADDFEATURE,function(i){n||(n=!0,t.push(i.feature),n=!1)}),this.addEventListener(Tn.REMOVEFEATURE,function(i){n||(n=!0,t.remove(i.feature),n=!1)}),t.addEventListener(Je.ADD,function(i){n||(n=!0,this.addFeature(i.element),n=!1)}.bind(this)),t.addEventListener(Je.REMOVE,function(i){n||(n=!0,this.removeFeature(i.element),n=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var n in this.featureChangeKeys_){var i=this.featureChangeKeys_[n];i.forEach(ce)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){var o=function(u){this.removeFeatureInternal(u)}.bind(this);this.featuresRtree_.forEach(o);for(var a in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[a])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var l=new dr(Tn.CLEAR);this.dispatchEvent(l),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,n){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(o){var a=o.getGeometry();if(a.intersectsCoordinate(t))return n(o)})},e.prototype.forEachFeatureInExtent=function(t,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)},e.prototype.forEachFeatureIntersectingExtent=function(t,n){return this.forEachFeatureInExtent(t,function(i){var o=i.getGeometry();if(o.intersectsExtent(t)){var a=n(i);if(a)return a}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Po(this.nullGeometryFeatures_)||er(t,Bc(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var n=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){n.push(i)}),n},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]},e.prototype.getClosestFeatureToCoordinate=function(t,n){var i=t[0],o=t[1],a=null,l=[NaN,NaN],u=1/0,h=[-1/0,-1/0,1/0,1/0],c=n||oi;return this.featuresRtree_.forEachInExtent(h,function(_){if(c(_)){var v=_.getGeometry(),T=u;if(u=v.closestPointXY(i,o,l,u),u<T){a=_;var E=Math.sqrt(u);h[0]=i-E,h[1]=o-E,h[2]=i+E,h[3]=o+E}}}),a},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var n=this.idIndex_[t.toString()];return n!==void 0?n:null},e.prototype.getFeatureByUid=function(t){var n=this.uidIndex_[t];return n!==void 0?n:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var n=t.target,i=Zt(n),o=n.getGeometry();if(!o)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[i]=n);else{var a=o.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(a,n)):this.featuresRtree_&&this.featuresRtree_.update(a,n)}var l=n.getId();if(l!==void 0){var u=l.toString();this.idIndex_[u]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[u]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[i]=n;this.changed(),this.dispatchEvent(new dr(Tn.CHANGEFEATURE,n))},e.prototype.hasFeature=function(t){var n=t.getId();return n!==void 0?n in this.idIndex_:Zt(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Po(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0},e.prototype.loadFeatures=function(t,n,i){for(var o=this.loadedExtentsRtree_,a=this.strategy_(t,n,i),l=function(_,v){var T=a[_],E=o.forEachInExtent(T,function(w){return Ri(w.extent,T)});E||(++u.loadingExtentsCount_,u.dispatchEvent(new dr(Tn.FEATURESLOADSTART)),u.loader_.call(u,T,n,i,function(w){--this.loadingExtentsCount_,this.dispatchEvent(new dr(Tn.FEATURESLOADEND,void 0,w))}.bind(u),function(){--this.loadingExtentsCount_,this.dispatchEvent(new dr(Tn.FEATURESLOADERROR))}.bind(u)),o.insert(T,{extent:T.slice()}))},u=this,h=0,c=a.length;h<c;++h)l(h);this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),r.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var n=this.loadedExtentsRtree_,i;n.forEachInExtent(t,function(o){if(Lo(o.extent,t))return i=o,!0}),i&&n.remove(i)},e.prototype.removeFeature=function(t){if(!!t){var n=Zt(t);n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(t);var i=this.removeFeatureInternal(t);i&&this.changed()}},e.prototype.removeFeatureInternal=function(t){var n=Zt(t),i=this.featureChangeKeys_[n];if(!!i){i.forEach(ce),delete this.featureChangeKeys_[n];var o=t.getId();return o!==void 0&&delete this.idIndex_[o.toString()],delete this.uidIndex_[n],this.dispatchEvent(new dr(Tn.REMOVEFEATURE,t)),t}},e.prototype.removeFromIdIndex_=function(t){var n=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],n=!0;break}return n},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){Ht(this.format_,7),this.url_=t,this.setLoader(jh(t,this.format_))},e}($d),Vd=SC,Kd=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Kt={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},xa={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"},wa=function(r){Kd(e,r);function e(t,n){var i=r.call(this,t)||this;return i.feature=n,i}return e}(Bn),PC=function(r){Kd(e,r);function e(t){var n=this,i=t;i.stopDown||(i.stopDown=Wo),n=r.call(this,i)||this,n.on,n.once,n.un,n.shouldHandle_=!1,n.downPx_=null,n.downTimeout_,n.lastDragTime_,n.pointerType_,n.freehand_=!1,n.source_=t.source?t.source:null,n.features_=t.features?t.features:null,n.snapTolerance_=t.snapTolerance?t.snapTolerance:12,n.type_=t.type,n.mode_=AC(n.type_),n.stopClick_=!!t.stopClick,n.minPoints_=t.minPoints?t.minPoints:n.mode_===Kt.POLYGON?3:2,n.maxPoints_=n.mode_===Kt.CIRCLE?2:t.maxPoints?t.maxPoints:1/0,n.finishCondition_=t.finishCondition?t.finishCondition:oi;var o=t.geometryFunction;if(!o){var a=n.mode_;if(a===Kt.CIRCLE)o=function(u,h,c){var _=h||new LT([NaN,NaN]),v=En(u[0]),T=Cy(v,En(u[u.length-1]));return _.setCenterAndRadius(v,Math.sqrt(T)),_};else{var l;a===Kt.POINT?l=Mi:a===Kt.LINE_STRING?l=xo:a===Kt.POLYGON&&(l=bo),o=function(u,h,c){return h?a===Kt.POLYGON?u[0].length?h.setCoordinates([u[0].concat([u[0][0]])]):h.setCoordinates([]):h.setCoordinates(u):h=new l(u),h}}}return n.geometryFunction_=o,n.dragVertexDelay_=t.dragVertexDelay!==void 0?t.dragVertexDelay:500,n.finishCoordinate_=null,n.sketchFeature_=null,n.sketchPoint_=null,n.sketchCoords_=null,n.sketchLine_=null,n.sketchLineCoords_=null,n.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,n.overlay_=new Xd({source:new Vd({useSpatialIndex:!1,wrapX:t.wrapX?t.wrapX:!1}),style:t.style?t.style:LC(),updateWhileInteracting:!0}),n.geometryName_=t.geometryName,n.condition_=t.condition?t.condition:Gu,n.freehandCondition_,t.freehand?n.freehandCondition_=Pd:n.freehandCondition_=t.freehandCondition?t.freehandCondition:ju,n.addChangeListener(Wl.ACTIVE,n.updateState_),n}return e.prototype.setMap=function(t){r.prototype.setMap.call(this,t),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(t){t.originalEvent.type===Mt.CONTEXTMENU&&t.originalEvent.preventDefault(),this.freehand_=this.mode_!==Kt.POINT&&this.freehandCondition_(t);var n=t.type===qt.POINTERMOVE,i=!0;if(!this.freehand_&&this.lastDragTime_&&t.type===qt.POINTERDRAG){var o=Date.now();o-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&t.type===qt.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(t.coordinate),i=!1):this.freehand_&&t.type===qt.POINTERDOWN?i=!1:n&&this.getPointerCount()<2?(i=t.type===qt.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):(t.originalEvent.pointerType==="mouse"||t.type===qt.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(t)):t.type===qt.DBLCLICK&&(i=!1),r.prototype.handleEvent.call(this,t)&&i},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new Jn(qt.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(t){var n=!0;if(this.getPointerCount()===0)if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t),this.shouldHandle_){var i=!this.finishCoordinate_;i&&this.startDrawing_(t.coordinate),!i&&this.freehand_?this.finishDrawing():!this.freehand_&&(!i||this.mode_===Kt.POINT)&&(this.atFinish_(t.pixel)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),n=!1}else this.freehand_&&this.abortDrawing();return!n&&this.stopClick_&&t.preventDefault(),n},e.prototype.handlePointerMove_=function(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var n=this.downPx_,i=t.pixel,o=n[0]-i[0],a=n[1]-i[1],l=o*o+a*a;if(this.shouldHandle_=this.freehand_?l>this.squaredClickTolerance_:l<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(t.coordinate):this.createOrUpdateSketchPoint_(t.coordinate.slice())},e.prototype.atFinish_=function(t){var n=!1;if(this.sketchFeature_){var i=!1,o=[this.finishCoordinate_],a=this.mode_;if(a===Kt.POINT)n=!0;else if(a===Kt.CIRCLE)n=this.sketchCoords_.length===2;else if(a===Kt.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(a===Kt.POLYGON){var l=this.sketchCoords_;i=l[0].length>this.minPoints_,o=[l[0][0],l[0][l[0].length-2]]}if(i)for(var u=this.getMap(),h=0,c=o.length;h<c;h++){var _=o[h],v=u.getPixelFromCoordinate(_),T=t[0]-v[0],E=t[1]-v[1],w=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(T*T+E*E)<=w,n){this.finishCoordinate_=_;break}}}return n},e.prototype.createOrUpdateSketchPoint_=function(t){if(!this.sketchPoint_)this.sketchPoint_=new ao(new Mi(t)),this.updateSketchFeatures_();else{var n=this.sketchPoint_.getGeometry();n.setCoordinates(t)}},e.prototype.createOrUpdateCustomSketchLine_=function(t){this.sketchLine_||(this.sketchLine_=new ao);var n=t.getLinearRing(0),i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),i.changed()):(i=new xo(n.getFlatCoordinates(),n.getLayout()),this.sketchLine_.setGeometry(i))},e.prototype.startDrawing_=function(t){var n=this.getMap().getView().getProjection();this.finishCoordinate_=t,this.mode_===Kt.POINT?this.sketchCoords_=t.slice():this.mode_===Kt.POLYGON?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new ao(new xo(this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_,void 0,n);this.sketchFeature_=new ao,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new wa(xa.DRAWSTART,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var n=this.getMap(),i=this.sketchFeature_.getGeometry(),o=n.getView().getProjection(),a,l;if(this.mode_===Kt.POINT?l=this.sketchCoords_:this.mode_===Kt.POLYGON?(a=this.sketchCoords_[0],l=a[a.length-1],this.atFinish_(n.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(a=this.sketchCoords_,l=a[a.length-1]),l[0]=t[0],l[1]=t[1],this.geometryFunction_(this.sketchCoords_,i,o),this.sketchPoint_){var u=this.sketchPoint_.getGeometry();u.setCoordinates(t)}if(i.getType()===ft.POLYGON&&this.mode_!==Kt.POLYGON)this.createOrUpdateCustomSketchLine_(i);else if(this.sketchLineCoords_){var h=this.sketchLine_.getGeometry();h.setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var n=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),o,a,l=this.mode_;l===Kt.LINE_STRING||l===Kt.CIRCLE?(this.finishCoordinate_=t.slice(),a=this.sketchCoords_,a.length>=this.maxPoints_&&(this.freehand_?a.pop():o=!0),a.push(t.slice()),this.geometryFunction_(a,n,i)):l===Kt.POLYGON&&(a=this.sketchCoords_[0],a.length>=this.maxPoints_&&(this.freehand_?a.pop():o=!0),a.push(t.slice()),o&&(this.finishCoordinate_=a[0]),this.geometryFunction_(this.sketchCoords_,n,i)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),o&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(!!this.sketchFeature_){var t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),i,o=this.mode_;if(o===Kt.LINE_STRING||o===Kt.CIRCLE){if(i=this.sketchCoords_,i.splice(-2,1),i.length>=2){this.finishCoordinate_=i[i.length-2].slice();var a=this.finishCoordinate_.slice();i[i.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(i,t,n),t.getType()===ft.POLYGON&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(o===Kt.POLYGON){i=this.sketchCoords_[0],i.splice(-2,1);var l=this.sketchLine_.getGeometry();if(i.length>=2){var a=i[i.length-2].slice();i[i.length-1]=a,this.createOrUpdateSketchPoint_(a)}l.setCoordinates(i),this.geometryFunction_(this.sketchCoords_,t,n)}i.length===1&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(!!t){var n=this.sketchCoords_,i=t.getGeometry(),o=this.getMap().getView().getProjection();this.mode_===Kt.LINE_STRING?(n.pop(),this.geometryFunction_(n,i,o)):this.mode_===Kt.POLYGON&&(n[0].pop(),this.geometryFunction_(n,i,o),n=i.getCoordinates()),this.type_===ft.MULTI_POINT?t.setGeometry(new Fd([n])):this.type_===ft.MULTI_LINE_STRING?t.setGeometry(new jT([n])):this.type_===ft.MULTI_POLYGON&&t.setGeometry(new XT([n])),this.dispatchEvent(new wa(xa.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new wa(xa.DRAWABORT,t))},e.prototype.appendCoordinates=function(t){var n=this.mode_,i=!this.sketchFeature_;i&&this.startDrawing_(t[0]);var o;if(n===Kt.LINE_STRING||n===Kt.CIRCLE)o=this.sketchCoords_;else if(n===Kt.POLYGON)o=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;i&&o.shift(),o.pop();for(var a=0;a<t.length;a++)this.addToDrawing_(t[a]);var l=t[t.length-1];this.addToDrawing_(l),this.modifyDrawing_(l)},e.prototype.extend=function(t){var n=t.getGeometry(),i=n;this.sketchFeature_=t,this.sketchCoords_=i.getCoordinates();var o=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=o.slice(),this.sketchCoords_.push(o.slice()),this.sketchPoint_=new ao(new Mi(o)),this.updateSketchFeatures_(),this.dispatchEvent(new wa(xa.DRAWSTART,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var n=this.overlay_.getSource();n.clear(!0),n.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),n=this.getActive();(!t||!n)&&this.abortDrawing(),this.overlay_.setMap(n?t:null)},e}(di);function LC(){var r=uE();return function(e,t){return r[e.getGeometry().getType()]}}function AC(r){switch(r){case ft.POINT:case ft.MULTI_POINT:return Kt.POINT;case ft.LINE_STRING:case ft.MULTI_LINE_STRING:return Kt.LINE_STRING;case ft.POLYGON:case ft.MULTI_POLYGON:return Kt.POLYGON;case ft.CIRCLE:return Kt.CIRCLE;default:throw new Error("Invalid type: "+r)}}var bC=PC;function qd(r){var e=r||{},t=new ze,n=new vT(-.005,.05,100),i=e.altShiftDragRotate!==void 0?e.altShiftDragRotate:!0;i&&t.push(new tT);var o=e.doubleClickZoom!==void 0?e.doubleClickZoom:!0;o&&t.push(new U0({delta:e.zoomDelta,duration:e.zoomDuration}));var a=e.dragPan!==void 0?e.dragPan:!0;a&&t.push(new Z0({onFocusOnly:e.onFocusOnly,kinetic:n}));var l=e.pinchRotate!==void 0?e.pinchRotate:!0;l&&t.push(new CT);var u=e.pinchZoom!==void 0?e.pinchZoom:!0;u&&t.push(new OT({duration:e.zoomDuration}));var h=e.keyboard!==void 0?e.keyboard:!0;h&&(t.push(new hT),t.push(new pT({delta:e.zoomDelta,duration:e.zoomDuration})));var c=e.mouseWheelZoom!==void 0?e.mouseWheelZoom:!0;c&&t.push(new mT({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration}));var _=e.shiftDragZoom!==void 0?e.shiftDragZoom:!0;return _&&t.push(new lT({duration:e.zoomDuration})),t}var MC=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),DC=function(r){MC(e,r);function e(t){return t=Ae({},t),t.controls||(t.controls=Rd()),t.interactions||(t.interactions=qd({onFocusOnly:!0})),r.call(this,t)||this}return e.prototype.createRenderer=function(){return new t0(this)},e}(T0),NC=DC;var Vo=(r,e)=>{const t=r.__vccOpts||r;for(const[n,i]of e)t[n]=i;return t};const FC={name:"MapContainer",components:{},props:{center:{type:Array,default:()=>[0,0]},zoom:{type:Number,default:0},baselayers:Wn,overlays:Wn,controls:ze,interactions:ze},data:()=>({olMap:null}),mounted(){this.olMap=new NC({target:this.$refs["map-root"],layers:[this.baselayers,this.overlays],view:new Tr({zoom:this.zoom,center:Jc([this.center[1],this.center[0]],"EPSG:4326","EPSG:3857"),constrainResolution:!0}),controls:this.controls,interactions:this.customInt||this.interactions}),this.setMouseCursor(),this.$emit("init",this.olMap)},methods:{setMouseCursor(){let r=this.olMap;r.getViewport().classList.add("ol-grab"),r.on(["pointerdrag","pointerup"],e=>{r.getViewport().classList.toggle("ol-grabbing",e.type=="pointerdrag"),r.getViewport().classList.toggle("ol-grab",e.type=="pointerup")})}}},kC={ref:"map-root",style:{width:"100%",height:"100%"}};function GC(r,e,t,n,i,o){return De(),Ge("div",kC,null,512)}var jC=Vo(FC,[["render",GC]]),Oa={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"},WC=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),BC=function(r){WC(e,r);function e(t){var n=this,i=t||{},o=Ae({},i);return delete o.preload,delete o.useInterimTilesOnError,n=r.call(this,o)||this,n.on,n.once,n.un,n.setPreload(i.preload!==void 0?i.preload:0),n.setUseInterimTilesOnError(i.useInterimTilesOnError!==void 0?i.useInterimTilesOnError:!0),n}return e.prototype.getPreload=function(){return this.get(Oa.PRELOAD)},e.prototype.setPreload=function(t){this.set(Oa.PRELOAD,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(Oa.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setUseInterimTilesOnError=function(t){this.set(Oa.USE_INTERIM_TILES_ON_ERROR,t)},e.prototype.getData=function(t){return r.prototype.getData.call(this,t)},e}(Ts),UC=BC,YC=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),HC=function(r){YC(e,r);function e(t,n,i){var o=r.call(this)||this,a=i||{};return o.tileCoord=t,o.state=n,o.interimTile=null,o.key="",o.transition_=a.transition===void 0?250:a.transition,o.transitionStarts_={},o.interpolate=!!a.interpolate,o}return e.prototype.changed=function(){this.dispatchEvent(Mt.CHANGE)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==It.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(!!this.interimTile){var t=this.interimTile,n=this;do{if(t.getState()==It.LOADED){t.interimTile=null;break}else t.getState()==It.LOADING?n=t:t.getState()==It.IDLE?n.interimTile=t.interimTile:n=t;t=n.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==It.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){Yt()},e.prototype.getAlpha=function(t,n){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(!i)i=n,this.transitionStarts_[t]=i;else if(i===-1)return 1;var o=n-i+1e3/60;return o>=this.transition_?1:td(o/this.transition_)},e.prototype.inTransition=function(t){return this.transition_?this.transitionStarts_[t]!==-1:!1},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(Ui),Zd=HC,XC=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),$C=function(r){XC(e,r);function e(t,n,i,o,a,l){var u=r.call(this,t,n,l)||this;return u.crossOrigin_=o,u.src_=i,u.key=i,u.image_=new Image,o!==null&&(u.image_.crossOrigin=o),u.unlisten_=null,u.tileLoadFunction_=a,u}return e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(t){this.image_=t,this.state=It.LOADED,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){this.state=It.ERROR,this.unlistenImage_(),this.image_=zC(),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=It.LOADED:this.state=It.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==It.ERROR&&(this.state=It.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==It.IDLE&&(this.state=It.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Wu(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Zd);function zC(){var r=gn(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}var Jd=$C,VC=.5,qn=!0,KC=10,Wh=.25,qC=function(){function r(e,t,n,i,o,a){this.sourceProj_=e,this.targetProj_=t;var l={},u=Ua(this.targetProj_,this.sourceProj_);this.transformInv_=function(D){var k=D[0]+"/"+D[1];return l[k]||(l[k]=u(D)),l[k]},this.maxSourceExtent_=i,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&ye(i)==ye(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ye(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ye(this.targetProj_.getExtent()):null;var h=ci(n),c=vs(n),_=gs(n),v=ps(n),T=this.transformInv_(h),E=this.transformInv_(c),w=this.transformInv_(_),L=this.transformInv_(v),P=KC+(a?Math.max(0,Math.ceil(Z_(Ll(n)/(a*a*256*256)))):0);if(this.addQuad_(h,c,_,v,T,E,w,L,P),this.wrapsXInSource_){var F=1/0;this.triangles_.forEach(function(D,k,$){F=Math.min(F,D.source[0][0],D.source[1][0],D.source[2][0])}),this.triangles_.forEach(function(D){if(Math.max(D.source[0][0],D.source[1][0],D.source[2][0])-F>this.sourceWorldWidth_/2){var k=[[D.source[0][0],D.source[0][1]],[D.source[1][0],D.source[1][1]],[D.source[2][0],D.source[2][1]]];k[0][0]-F>this.sourceWorldWidth_/2&&(k[0][0]-=this.sourceWorldWidth_),k[1][0]-F>this.sourceWorldWidth_/2&&(k[1][0]-=this.sourceWorldWidth_),k[2][0]-F>this.sourceWorldWidth_/2&&(k[2][0]-=this.sourceWorldWidth_);var $=Math.min(k[0][0],k[1][0],k[2][0]),p=Math.max(k[0][0],k[1][0],k[2][0]);p-$<this.sourceWorldWidth_/2&&(D.source=k)}}.bind(this))}l={}}return r.prototype.addTriangle_=function(e,t,n,i,o,a){this.triangles_.push({source:[i,o,a],target:[e,t,n]})},r.prototype.addQuad_=function(e,t,n,i,o,a,l,u,h){var c=eh([o,a,l,u]),_=this.sourceWorldWidth_?ye(c)/this.sourceWorldWidth_:null,v=this.sourceWorldWidth_,T=this.sourceProj_.canWrapX()&&_>.5&&_<1,E=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var w=eh([e,t,n,i]),L=ye(w)/this.targetWorldWidth_;E=L>Wh||E}!T&&this.sourceProj_.isGlobal()&&_&&(E=_>Wh||E)}if(!(!E&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!$e(c,this.maxSourceExtent_))){var P=0;if(!E&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(u[0])||!isFinite(u[1]))){if(h>0)E=!0;else if(P=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(l[0])||!isFinite(l[1])?2:0)+(!isFinite(u[0])||!isFinite(u[1])?1:0),P!=1&&P!=2&&P!=4&&P!=8)return}if(h>0){if(!E){var F=[(e[0]+n[0])/2,(e[1]+n[1])/2],D=this.transformInv_(F),k=void 0;if(T){var $=(Ai(o[0],v)+Ai(l[0],v))/2;k=$-Ai(D[0],v)}else k=(o[0]+l[0])/2-D[0];var p=(o[1]+l[1])/2-D[1],tt=k*k+p*p;E=tt>this.errorThresholdSquared_}if(E){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){var Y=[(t[0]+n[0])/2,(t[1]+n[1])/2],J=this.transformInv_(Y),st=[(i[0]+e[0])/2,(i[1]+e[1])/2],ct=this.transformInv_(st);this.addQuad_(e,t,Y,st,o,a,J,ct,h-1),this.addQuad_(st,Y,n,i,ct,J,l,u,h-1)}else{var at=[(e[0]+t[0])/2,(e[1]+t[1])/2],_t=this.transformInv_(at),Pt=[(n[0]+i[0])/2,(n[1]+i[1])/2],vt=this.transformInv_(Pt);this.addQuad_(e,at,Pt,i,o,_t,vt,u,h-1),this.addQuad_(at,t,n,Pt,_t,a,l,vt,h-1)}return}}if(T){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(P&11)==0&&this.addTriangle_(e,n,i,o,l,u),(P&14)==0&&this.addTriangle_(e,n,t,o,l,a),P&&((P&13)==0&&this.addTriangle_(t,i,e,a,u,o),(P&7)==0&&this.addTriangle_(t,i,n,a,u,l))}},r.prototype.calculateSourceExtent=function(){var e=pn();return this.triangles_.forEach(function(t,n,i){var o=t.source;Eo(e,o[0]),Eo(e,o[1]),Eo(e,o[2])}),e},r.prototype.getTriangles=function(){return this.triangles_},r}(),ZC=qC,Xl={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},JC={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0},ul;function Bh(r,e,t,n,i){r.beginPath(),r.moveTo(0,0),r.lineTo(e,t),r.lineTo(n,i),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(e,n)+1,Math.max(t,i)),r.restore()}function fl(r,e){return Math.abs(r[e*4]-210)>2||Math.abs(r[e*4+3]-.75*255)>2}function QC(){if(ul===void 0){var r=document.createElement("canvas").getContext("2d");r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",Bh(r,4,5,4,0),Bh(r,4,5,0,5);var e=r.getImageData(0,0,3,3).data;ul=fl(e,0)||fl(e,4)||fl(e,8)}return ul}function Uh(r,e,t,n){var i=Jc(t,e,r),o=rh(e,n,t),a=e.getMetersPerUnit();a!==void 0&&(o*=a);var l=r.getMetersPerUnit();l!==void 0&&(o/=l);var u=r.getExtent();if(!u||Yo(u,i)){var h=rh(r,o,i)/o;isFinite(h)&&h>0&&(o/=h)}return o}function tx(r,e,t,n){var i=ki(t),o=Uh(r,e,i,n);return(!isFinite(o)||o<=0)&&yu(t,function(a){return o=Uh(r,e,a,n),isFinite(o)&&o>0}),o}function ex(r,e,t,n,i,o,a,l,u,h,c,_){var v=gn(Math.round(t*r),Math.round(t*e));if(_||Ae(v,Xl),u.length===0)return v.canvas;v.scale(t,t);function T(k){return Math.round(k*t)/t}v.globalCompositeOperation="lighter";var E=pn();u.forEach(function(k,$,p){py(E,k.extent)});var w=ye(E),L=Rn(E),P=gn(Math.round(t*w/n),Math.round(t*L/n));_||Ae(P,Xl);var F=t/n;u.forEach(function(k,$,p){var tt=k.extent[0]-E[0],Y=-(k.extent[3]-E[3]),J=ye(k.extent),st=Rn(k.extent);k.image.width>0&&k.image.height>0&&P.drawImage(k.image,h,h,k.image.width-2*h,k.image.height-2*h,tt*F,Y*F,J*F,st*F)});var D=ci(a);return l.getTriangles().forEach(function(k,$,p){var tt=k.source,Y=k.target,J=tt[0][0],st=tt[0][1],ct=tt[1][0],at=tt[1][1],_t=tt[2][0],Pt=tt[2][1],vt=T((Y[0][0]-D[0])/o),dt=T(-(Y[0][1]-D[1])/o),rt=T((Y[1][0]-D[0])/o),gt=T(-(Y[1][1]-D[1])/o),Ot=T((Y[2][0]-D[0])/o),Gt=T(-(Y[2][1]-D[1])/o),Dt=J,Z=st;J=0,st=0,ct-=Dt,at-=Z,_t-=Dt,Pt-=Z;var Bt=[[ct,at,0,0,rt-vt],[_t,Pt,0,0,Ot-vt],[0,0,ct,at,gt-dt],[0,0,_t,Pt,Gt-dt]],St=Q_(Bt);if(!!St){if(v.save(),v.beginPath(),QC()||!_){v.moveTo(rt,gt);for(var de=4,Me=vt-rt,oe=dt-gt,pe=0;pe<de;pe++)v.lineTo(rt+T((pe+1)*Me/de),gt+T(pe*oe/(de-1))),pe!=de-1&&v.lineTo(rt+T((pe+1)*Me/de),gt+T((pe+1)*oe/(de-1)));v.lineTo(Ot,Gt)}else v.moveTo(rt,gt),v.lineTo(vt,dt),v.lineTo(Ot,Gt);v.clip(),v.transform(St[0],St[2],St[1],St[3],vt,dt),v.translate(E[0]-Dt,E[3]-Z),v.scale(n/t,-n/t),v.drawImage(P.canvas,0,0),v.restore()}}),c&&(v.save(),v.globalCompositeOperation="source-over",v.strokeStyle="black",v.lineWidth=1,l.getTriangles().forEach(function(k,$,p){var tt=k.target,Y=(tt[0][0]-D[0])/o,J=-(tt[0][1]-D[1])/o,st=(tt[1][0]-D[0])/o,ct=-(tt[1][1]-D[1])/o,at=(tt[2][0]-D[0])/o,_t=-(tt[2][1]-D[1])/o;v.beginPath(),v.moveTo(st,ct),v.lineTo(Y,J),v.lineTo(at,_t),v.closePath(),v.stroke()}),v.restore()),v.canvas}var nx=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),rx=function(r){nx(e,r);function e(t,n,i,o,a,l,u,h,c,_,v,T){var E=r.call(this,a,It.IDLE,{interpolate:!!T})||this;E.renderEdges_=v!==void 0?v:!1,E.pixelRatio_=u,E.gutter_=h,E.canvas_=null,E.sourceTileGrid_=n,E.targetTileGrid_=o,E.wrappedTileCoord_=l||a,E.sourceTiles_=[],E.sourcesListenerKeys_=null,E.sourceZ_=0;var w=o.getTileCoordExtent(E.wrappedTileCoord_),L=E.targetTileGrid_.getExtent(),P=E.sourceTileGrid_.getExtent(),F=L?Co(w,L):w;if(Ll(F)===0)return E.state=It.EMPTY,E;var D=t.getExtent();D&&(P?P=Co(P,D):P=D);var k=o.getResolution(E.wrappedTileCoord_[0]),$=tx(t,i,F,k);if(!isFinite($)||$<=0)return E.state=It.EMPTY,E;var p=_!==void 0?_:VC;if(E.triangulation_=new ZC(t,i,F,P,$*p,k),E.triangulation_.getTriangles().length===0)return E.state=It.EMPTY,E;E.sourceZ_=n.getZForResolution($);var tt=E.triangulation_.calculateSourceExtent();if(P&&(t.canWrapX()?(tt[1]=Ce(tt[1],P[1],P[3]),tt[3]=Ce(tt[3],P[1],P[3])):tt=Co(tt,P)),!Ll(tt))E.state=It.EMPTY;else{for(var Y=n.getTileRangeForExtentAndZ(tt,E.sourceZ_),J=Y.minX;J<=Y.maxX;J++)for(var st=Y.minY;st<=Y.maxY;st++){var ct=c(E.sourceZ_,J,st,u);ct&&E.sourceTiles_.push(ct)}E.sourceTiles_.length===0&&(E.state=It.EMPTY)}return E}return e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(c,_,v){c&&c.getState()==It.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(c.tileCoord),image:c.getImage()})}.bind(this)),this.sourceTiles_.length=0,t.length===0)this.state=It.ERROR;else{var n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),o=typeof i=="number"?i:i[0],a=typeof i=="number"?i:i[1],l=this.targetTileGrid_.getResolution(n),u=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=ex(o,a,this.pixelRatio_,u,this.sourceTileGrid_.getExtent(),l,h,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=It.LOADED}this.changed()},e.prototype.load=function(){if(this.state==It.IDLE){this.state=It.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(n,i,o){var a=n.getState();if(a==It.IDLE||a==It.LOADING){t++;var l=zt(n,Mt.CHANGE,function(u){var h=n.getState();(h==It.LOADED||h==It.ERROR||h==It.EMPTY)&&(ce(l),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(l)}}.bind(this)),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,i,o){var a=n.getState();a==It.IDLE&&n.load()})}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(ce),this.sourcesListenerKeys_=null},e}(Zd),Qd=rx,tp=function(){function r(e,t,n,i){this.minX=e,this.maxX=t,this.minY=n,this.maxY=i}return r.prototype.contains=function(e){return this.containsXY(e[1],e[2])},r.prototype.containsTileRange=function(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY},r.prototype.containsXY=function(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY},r.prototype.equals=function(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY},r.prototype.extend=function(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)},r.prototype.getHeight=function(){return this.maxY-this.minY+1},r.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},r.prototype.getWidth=function(){return this.maxX-this.minX+1},r.prototype.intersects=function(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY},r}();function yi(r,e,t,n,i){return i!==void 0?(i.minX=r,i.maxX=e,i.minY=t,i.maxY=n,i):new tp(r,e,t,n)}var ep=tp,ix=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ox=function(r){ix(e,r);function e(t){var n=r.call(this,t)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=pn(),n.tmpTileRange_=new ep(0,0,0,0),n}return e.prototype.isDrawableTile=function(t){var n=this.getLayer(),i=t.getState(),o=n.getUseInterimTilesOnError();return i==It.LOADED||i==It.EMPTY||i==It.ERROR&&!o},e.prototype.getTile=function(t,n,i,o){var a=o.pixelRatio,l=o.viewState.projection,u=this.getLayer(),h=u.getSource(),c=h.getTile(t,n,i,a,l);return c.getState()==It.ERROR&&(u.getUseInterimTilesOnError()?u.getPreload()>0&&(this.newTiles_=!0):c.setState(It.LOADED)),this.isDrawableTile(c)||(c=c.getInterimTile()),c},e.prototype.getData=function(t){var n=this.frameState;if(!n)return null;var i=this.getLayer(),o=Ee(n.pixelToCoordinateTransform,t.slice()),a=i.getExtent();if(a&&!Yo(a,o))return null;for(var l=n.pixelRatio,u=n.viewState.projection,h=n.viewState,c=i.getRenderSource(),_=c.getTileGridForProjection(h.projection),v=c.getTilePixelRatio(n.pixelRatio),T=_.getZForResolution(h.resolution);T>=_.getMinZoom();--T){var E=_.getTileCoordForCoordAndZ(o,T),w=c.getTile(T,E[1],E[2],l,u);if(!(w instanceof Jd||w instanceof Qd))return null;if(w.getState()===It.LOADED){var L=_.getOrigin(T),P=xn(_.getTileSize(T)),F=_.getResolution(T),D=Math.floor(v*((o[0]-L[0])/F-E[1]*P[0])),k=Math.floor(v*((L[1]-o[1])/F-E[2]*P[1]));return this.getImageData(w.getImage(),D,k)}}return null},e.prototype.loadedTileCallback=function(t,n,i){return this.isDrawableTile(i)?r.prototype.loadedTileCallback.call(this,t,n,i):!1},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,n){var i=t.layerStatesArray[t.layerIndex],o=t.viewState,a=o.projection,l=o.resolution,u=o.center,h=o.rotation,c=t.pixelRatio,_=this.getLayer(),v=_.getSource(),T=v.getRevision(),E=v.getTileGridForProjection(a),w=E.getZForResolution(l,v.zDirection),L=E.getResolution(w),P=t.extent,F=i.extent&&Qr(i.extent);F&&(P=Co(P,Qr(i.extent)));var D=v.getTilePixelRatio(c),k=Math.round(t.size[0]*D),$=Math.round(t.size[1]*D);if(h){var p=Math.round(Math.sqrt(k*k+$*$));k=p,$=p}var tt=L*k/2/D,Y=L*$/2/D,J=[u[0]-tt,u[1]-Y,u[0]+tt,u[1]+Y],st=E.getTileRangeForExtentAndZ(P,w),ct={};ct[w]={};var at=this.createLoadedTileFinder(v,a,ct),_t=this.tmpExtent,Pt=this.tmpTileRange_;this.newTiles_=!1;for(var vt=st.minX;vt<=st.maxX;++vt)for(var dt=st.minY;dt<=st.maxY;++dt){var rt=this.getTile(w,vt,dt,t);if(this.isDrawableTile(rt)){var gt=Zt(this);if(rt.getState()==It.LOADED){ct[w][rt.tileCoord.toString()]=rt;var Ot=rt.inTransition(gt);!this.newTiles_&&(Ot||this.renderedTiles.indexOf(rt)===-1)&&(this.newTiles_=!0)}if(rt.getAlpha(gt,t.time)===1)continue}var Gt=E.getTileCoordChildTileRange(rt.tileCoord,Pt,_t),Dt=!1;Gt&&(Dt=at(w+1,Gt)),Dt||E.forEachTileCoordParentTileRange(rt.tileCoord,at,Pt,_t)}var Z=L/l;ir(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/D,1/D,h,-k/2,-$/2);var Bt=rd(this.pixelTransform);this.useContainer(n,Bt,i.opacity,this.getBackground(t));var St=this.context,de=St.canvas;Ru(this.inversePixelTransform,this.pixelTransform),ir(this.tempTransform,k/2,$/2,Z,Z,0,-k/2,-$/2),de.width!=k||de.height!=$?(de.width=k,de.height=$):this.containerReused||St.clearRect(0,0,k,$),F&&this.clipUnrotated(St,t,F),v.getInterpolate()||Ae(St,Xl),this.preRender(St,t),this.renderedTiles.length=0;var Me=Object.keys(ct).map(Number);Me.sort(li);var oe,pe,ue;i.opacity===1&&(!this.containerReused||v.getOpaque(t.viewState.projection))?Me=Me.reverse():(oe=[],pe=[]);for(var Ue=Me.length-1;Ue>=0;--Ue){var Fe=Me[Ue],Pn=v.getTilePixelSize(Fe,c,a),O=E.getResolution(Fe),b=O/L,B=Pn[0]*b*Z,G=Pn[1]*b*Z,H=E.getTileCoordForCoordAndZ(ci(J),Fe),et=E.getTileCoordExtent(H),ot=Ee(this.tempTransform,[D*(et[0]-J[0])/L,D*(J[3]-et[3])/L]),Q=D*v.getGutterForProjection(a),nt=ct[Fe];for(var V in nt){var rt=nt[V],ht=rt.tileCoord,lt=H[1]-ht[1],pt=Math.round(ot[0]-(lt-1)*B),Tt=H[2]-ht[2],Ft=Math.round(ot[1]-(Tt-1)*G),vt=Math.round(ot[0]-lt*B),dt=Math.round(ot[1]-Tt*G),Nt=pt-vt,kt=Ft-dt,Ut=w===Fe,Ot=Ut&&rt.getAlpha(Zt(this),t.time)!==1,we=!1;if(!Ot)if(oe){ue=[vt,dt,vt+Nt,dt,vt+Nt,dt+kt,vt,dt+kt];for(var ne=0,Qe=oe.length;ne<Qe;++ne)if(w!==Fe&&Fe<pe[ne]){var fe=oe[ne];$e([vt,dt,vt+Nt,dt+kt],[fe[0],fe[3],fe[4],fe[7]])&&(we||(St.save(),we=!0),St.beginPath(),St.moveTo(ue[0],ue[1]),St.lineTo(ue[2],ue[3]),St.lineTo(ue[4],ue[5]),St.lineTo(ue[6],ue[7]),St.moveTo(fe[6],fe[7]),St.lineTo(fe[4],fe[5]),St.lineTo(fe[2],fe[3]),St.lineTo(fe[0],fe[1]),St.clip())}oe.push(ue),pe.push(Fe)}else St.clearRect(vt,dt,Nt,kt);this.drawTileImage(rt,t,vt,dt,Nt,kt,Q,Ut),oe&&!Ot?(we&&St.restore(),this.renderedTiles.unshift(rt)):this.renderedTiles.push(rt),this.updateUsedTiles(t.usedTiles,v,rt)}}this.renderedRevision=T,this.renderedResolution=L,this.extentChanged=!this.renderedExtent_||!Lo(this.renderedExtent_,J),this.renderedExtent_=J,this.renderedPixelRatio=c,this.renderedProjection=a,this.manageTilePyramid(t,v,E,c,a,P,w,_.getPreload()),this.scheduleExpireCache(t,v),this.postRender(St,t),i.extent&&St.restore(),Ae(St,JC),Bt!==de.style.transform&&(de.style.transform=Bt);var sn=md(i.opacity),Xt=this.container;return sn!==Xt.style.opacity&&(Xt.style.opacity=sn),this.container},e.prototype.drawTileImage=function(t,n,i,o,a,l,u,h){var c=this.getTileImage(t);if(!!c){var _=Zt(this),v=h?t.getAlpha(_,n.time):1,T=v!==this.context.globalAlpha;T&&(this.context.save(),this.context.globalAlpha=v),this.context.drawImage(c,u,u,c.width-2*u,c.height-2*u,i,o,a,l),T&&this.context.restore(),v!==1?n.animate=!0:h&&t.endTransition(_)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,n){if(n.canExpireCache()){var i=function(o,a,l){var u=Zt(o);u in l.usedTiles&&o.expireCache(l.viewState.projection,l.usedTiles[u])}.bind(null,n);t.postRenderFunctions.push(i)}},e.prototype.updateUsedTiles=function(t,n,i){var o=Zt(n);o in t||(t[o]={}),t[o][i.getKey()]=!0},e.prototype.manageTilePyramid=function(t,n,i,o,a,l,u,h,c){var _=Zt(n);_ in t.wantedTiles||(t.wantedTiles[_]={});var v=t.wantedTiles[_],T=t.tileQueue,E=i.getMinZoom(),w=0,L,P,F,D,k,$;for($=E;$<=u;++$)for(P=i.getTileRangeForExtentAndZ(l,$,P),F=i.getResolution($),D=P.minX;D<=P.maxX;++D)for(k=P.minY;k<=P.maxY;++k)u-$<=h?(++w,L=n.getTile($,D,k,o,a),L.getState()==It.IDLE&&(v[L.getKey()]=!0,T.isKeyQueued(L.getKey())||T.enqueue([L,_,i.getTileCoordCenter(L.tileCoord),F])),c!==void 0&&c(L)):n.useTile($,D,k,a);n.updateCacheSize(w,a)},e}(Ud),ax=ox,sx=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),lx=function(r){sx(e,r);function e(t){return r.call(this,t)||this}return e.prototype.createRenderer=function(){return new ax(this)},e}(UC),ux=lx,fx=function(){function r(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return r.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},r.prototype.expireCache=function(e){for(;this.canExpireCache();)this.pop()},r.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},r.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)},r.prototype.forEach=function(e){for(var t=this.oldest_;t;)e(t.value_,t.key_,this),t=t.newer},r.prototype.get=function(e,t){var n=this.entries_[e];return Ht(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},r.prototype.remove=function(e){var t=this.entries_[e];return Ht(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_},r.prototype.getCount=function(){return this.count_},r.prototype.getKeys=function(){var e=new Array(this.count_),t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e},r.prototype.getValues=function(){var e=new Array(this.count_),t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e},r.prototype.peekLast=function(){return this.oldest_.value_},r.prototype.peekLastKey=function(){return this.oldest_.key_},r.prototype.peekFirstKey=function(){return this.newest_.key_},r.prototype.pop=function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_},r.prototype.replace=function(e,t){this.get(e),this.entries_[e].value_=t},r.prototype.set=function(e,t){Ht(!(e in this.entries_),16);var n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_},r.prototype.setSize=function(e){this.highWaterMark=e},r}(),hx=fx;function Yh(r,e,t,n){return n!==void 0?(n[0]=r,n[1]=e,n[2]=t,n):[r,e,t]}function xs(r,e,t){return r+"/"+e+"/"+t}function np(r){return xs(r[0],r[1],r[2])}function cx(r){return r.split("/").map(Number)}function dx(r){return(r[1]<<r[0])+r[2]}function px(r,e){var t=r[0],n=r[1],i=r[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;var o=e.getFullTileRange(t);return o?o.containsXY(n,i):!0}var gx=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),vx=function(r){gx(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.expireCache=function(t){for(;this.canExpireCache();){var n=this.peekLast();if(n.getKey()in t)break;this.pop().release()}},e.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var t=this.peekFirstKey(),n=cx(t),i=n[0];this.forEach(function(o){o.tileCoord[0]!==i&&(this.remove(np(o.tileCoord)),o.release())}.bind(this))}},e}(hx),rp=vx,hl={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},_x=[0,0,0],pr=5,yx=function(){function r(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Ht(j_(this.resolutions_,function(a,l){return l-a},!0),17);var t;if(!e.origins){for(var n=0,i=this.resolutions_.length-1;n<i;++n)if(!t)t=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Ht(this.origins_.length==this.resolutions_.length,20));var o=e.extent;o!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=ci(o)),Ht(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Ht(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:gu,Ht(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=o!==void 0?o:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(a,l){var u=new ep(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1));if(o){var h=this.getTileRangeForExtentAndZ(o,l);u.minX=Math.max(h.minX,u.minX),u.maxX=Math.min(h.maxX,u.maxX),u.minY=Math.max(h.minY,u.minY),u.maxY=Math.min(h.maxY,u.maxY)}return u},this):o&&this.calculateTileRanges_(o)}return r.prototype.forEachTileCoord=function(e,t,n){for(var i=this.getTileRangeForExtentAndZ(e,t),o=i.minX,a=i.maxX;o<=a;++o)for(var l=i.minY,u=i.maxY;l<=u;++l)n([t,o,l])},r.prototype.forEachTileCoordParentTileRange=function(e,t,n,i){var o,a,l,u=null,h=e[0]-1;for(this.zoomFactor_===2?(a=e[1],l=e[2]):u=this.getTileCoordExtent(e,i);h>=this.minZoom;){if(this.zoomFactor_===2?(a=Math.floor(a/2),l=Math.floor(l/2),o=yi(a,a,l,l,n)):o=this.getTileRangeForExtentAndZ(u,h,n),t(h,o))return!0;--h}return!1},r.prototype.getExtent=function(){return this.extent_},r.prototype.getMaxZoom=function(){return this.maxZoom},r.prototype.getMinZoom=function(){return this.minZoom},r.prototype.getOrigin=function(e){return this.origin_?this.origin_:this.origins_[e]},r.prototype.getResolution=function(e){return this.resolutions_[e]},r.prototype.getResolutions=function(){return this.resolutions_},r.prototype.getTileCoordChildTileRange=function(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){var i=e[1]*2,o=e[2]*2;return yi(i,i+1,o,o+1,t)}var a=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e[0]+1,t)}return null},r.prototype.getTileRangeForTileCoordAndZ=function(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;var i=e[0],o=e[1],a=e[2];if(t===i)return yi(o,a,o,a,n);if(this.zoomFactor_){var l=Math.pow(this.zoomFactor_,t-i),u=Math.floor(o*l),h=Math.floor(a*l);if(t<i)return yi(u,u,h,h,n);var c=Math.floor(l*(o+1))-1,_=Math.floor(l*(a+1))-1;return yi(u,c,h,_,n)}var v=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(v,t,n)},r.prototype.getTileRangeExtent=function(e,t,n){var i=this.getOrigin(e),o=this.getResolution(e),a=xn(this.getTileSize(e),this.tmpSize_),l=i[0]+t.minX*a[0]*o,u=i[0]+(t.maxX+1)*a[0]*o,h=i[1]+t.minY*a[1]*o,c=i[1]+(t.maxY+1)*a[1]*o;return jn(l,h,u,c,n)},r.prototype.getTileRangeForExtentAndZ=function(e,t,n){var i=_x;this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,i);var o=i[1],a=i[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,i),yi(o,i[1],a,i[2],n)},r.prototype.getTileCoordCenter=function(e){var t=this.getOrigin(e[0]),n=this.getResolution(e[0]),i=xn(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*i[0]*n,t[1]-(e[2]+.5)*i[1]*n]},r.prototype.getTileCoordExtent=function(e,t){var n=this.getOrigin(e[0]),i=this.getResolution(e[0]),o=xn(this.getTileSize(e[0]),this.tmpSize_),a=n[0]+e[1]*o[0]*i,l=n[1]-(e[2]+1)*o[1]*i,u=a+o[0]*i,h=l+o[1]*i;return jn(a,l,u,h,t)},r.prototype.getTileCoordForCoordAndResolution=function(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)},r.prototype.getTileCoordForXYAndResolution_=function(e,t,n,i,o){var a=this.getZForResolution(n),l=n/this.getResolution(a),u=this.getOrigin(a),h=xn(this.getTileSize(a),this.tmpSize_),c=l*(e-u[0])/n/h[0],_=l*(u[1]-t)/n/h[1];return i?(c=pa(c,pr)-1,_=pa(_,pr)-1):(c=da(c,pr),_=da(_,pr)),Yh(a,c,_,o)},r.prototype.getTileCoordForXYAndZ_=function(e,t,n,i,o){var a=this.getOrigin(n),l=this.getResolution(n),u=xn(this.getTileSize(n),this.tmpSize_),h=(e-a[0])/l/u[0],c=(a[1]-t)/l/u[1];return i?(h=pa(h,pr)-1,c=pa(c,pr)-1):(h=da(h,pr),c=da(c,pr)),Yh(n,h,c,o)},r.prototype.getTileCoordForCoordAndZ=function(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)},r.prototype.getTileCoordResolution=function(e){return this.resolutions_[e[0]]},r.prototype.getTileSize=function(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]},r.prototype.getFullTileRange=function(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null},r.prototype.getZForResolution=function(e,t){var n=pu(this.resolutions_,e,t||0);return Ce(n,this.minZoom,this.maxZoom)},r.prototype.calculateTileRanges_=function(e){for(var t=this.resolutions_.length,n=new Array(t),i=this.minZoom;i<t;++i)n[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=n},r}(),ip=yx;function op(r){var e=r.getDefaultTileGrid();return e||(e=Cx(r),r.setDefaultTileGrid(e)),e}function mx(r,e,t){var n=e[0],i=r.getTileCoordCenter(e),o=Bu(t);if(Yo(o,i))return e;var a=ye(o),l=Math.ceil((o[0]-i[0])/a);return i[0]+=a*l,r.getTileCoordForCoordAndZ(i,n)}function Tx(r,e,t,n){var i=n!==void 0?n:ho.TOP_LEFT,o=ap(r,e,t);return new ip({extent:r,origin:vy(r,i),resolutions:o,tileSize:t})}function Ex(r){var e=r||{},t=e.extent||Sn("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:ap(t,e.maxZoom,e.tileSize,e.maxResolution)};return new ip(n)}function ap(r,e,t,n){for(var i=e!==void 0?e:V_,o=Rn(r),a=ye(r),l=xn(t!==void 0?t:gu),u=n>0?n:Math.max(a/l[0],o/l[1]),h=i+1,c=new Array(h),_=0;_<h;++_)c[_]=u/Math.pow(2,_);return c}function Cx(r,e,t,n){var i=Bu(r);return Tx(i,e,t,n)}function Bu(r){r=Sn(r);var e=r.getExtent();if(!e){var t=180*Gn[Or.DEGREES]/r.getMetersPerUnit();e=jn(-t,-t,t,t)}return e}var sp=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),xx=function(r){sp(e,r);function e(t){var n=r.call(this,{attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate})||this;n.on,n.once,n.un,n.opaque_=t.opaque!==void 0?t.opaque:!1,n.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,n.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;var i=[256,256];return n.tileGrid&&xn(n.tileGrid.getTileSize(n.tileGrid.getMinZoom()),i),n.tileCache=new rp(t.cacheSize||0),n.tmpSize=[0,0],n.key_=t.key||"",n.tileOptions={transition:t.transition,interpolate:t.interpolate},n.zDirection=t.zDirection?t.zDirection:0,n}return e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,n){var i=this.getTileCacheForProjection(t);i&&i.expireCache(n)},e.prototype.forEachLoadedTile=function(t,n,i,o){var a=this.getTileCacheForProjection(t);if(!a)return!1;for(var l=!0,u,h,c,_=i.minX;_<=i.maxX;++_)for(var v=i.minY;v<=i.maxY;++v)h=xs(n,_,v),c=!1,a.containsKey(h)&&(u=a.get(h),c=u.getState()===It.LOADED,c&&(c=o(u)!==!1)),c||(l=!1);return l},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},e.prototype.getTile=function(t,n,i,o,a){return Yt()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:op(t)},e.prototype.getTileCacheForProjection=function(t){return Ht(Ei(this.getProjection(),t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,n,i){var o=this.getTileGridForProjection(i),a=this.getTilePixelRatio(n),l=xn(o.getTileSize(t),this.tmpSize);return a==1?l:v0(l,a,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,n){var i=n!==void 0?n:this.getProjection(),o=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=mx(o,t,i)),px(t,o)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),r.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,n){var i=this.getTileCacheForProjection(n);t>i.highWaterMark&&(i.highWaterMark=t)},e.prototype.useTile=function(t,n,i,o){},e}($d),wx=function(r){sp(e,r);function e(t,n){var i=r.call(this,t)||this;return i.tile=n,i}return e}(Bn),Ox=xx;function Ix(r,e){var t=/\{z\}/g,n=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(a,l,u){if(a)return r.replace(t,a[0].toString()).replace(n,a[1].toString()).replace(i,a[2].toString()).replace(o,function(){var h=a[0],c=e.getFullTileRange(h);Ht(c,55);var _=c.getHeight()-a[2]-1;return _.toString()})}}function Rx(r,e){for(var t=r.length,n=new Array(t),i=0;i<t;++i)n[i]=Ix(r[i],e);return Sx(n)}function Sx(r){return r.length===1?r[0]:function(e,t,n){if(e){var i=dx(e),o=Ai(i,r.length);return r[o](e,t,n)}else return}}function Px(r){var e=[],t=/\{([a-z])-([a-z])\}/.exec(r);if(t){var n=t[1].charCodeAt(0),i=t[2].charCodeAt(0),o=void 0;for(o=n;o<=i;++o)e.push(r.replace(t[0],String.fromCharCode(o)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(r),t){for(var a=parseInt(t[2],10),l=parseInt(t[1],10);l<=a;l++)e.push(r.replace(t[0],l.toString()));return e}return e.push(r),e}var Lx=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ax=function(r){Lx(e,r);function e(t){var n=r.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===e.prototype.tileUrlFunction,n.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(n.tileUrlFunction=t.tileUrlFunction),n.urls=null,t.urls?n.setUrls(t.urls):t.url&&n.setUrl(t.url),n.tileLoadingKeys_={},n}return e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var n=t.target,i=Zt(n),o=n.getState(),a;o==It.LOADING?(this.tileLoadingKeys_[i]=!0,a=hl.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],a=o==It.ERROR?hl.TILELOADERROR:o==It.LOADED?hl.TILELOADEND:void 0),a!=null&&this.dispatchEvent(new wx(a,n))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,n){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof n!="undefined"?this.setKey(n):this.changed()},e.prototype.setUrl=function(t){var n=Px(t);this.urls=n,this.setUrls(n)},e.prototype.setUrls=function(t){this.urls=t;var n=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Rx(t,this.tileGrid),n):this.setKey(n)},e.prototype.tileUrlFunction=function(t,n,i){},e.prototype.useTile=function(t,n,i){var o=xs(t,n,i);this.tileCache.containsKey(o)&&this.tileCache.get(o)},e}(Ox),bx=Ax,Mx=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Dx=function(r){Mx(e,r);function e(t){var n=this,i=t.imageSmoothing!==void 0?t.imageSmoothing:!0;return t.interpolate!==void 0&&(i=t.interpolate),n=r.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Nx,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:i,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection})||this,n.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,n.tileClass=t.tileClass!==void 0?t.tileClass:Jd,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,n.renderReprojectionEdges_=!1,n}return e.prototype.canExpireCache=function(){if(!qn)return r.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,n){if(!qn){r.prototype.expireCache.call(this,t,n);return}var i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?n:{});for(var o in this.tileCacheForProjection){var a=this.tileCacheForProjection[o];a.expireCache(a==i?n:{})}},e.prototype.getGutterForProjection=function(t){return qn&&this.getProjection()&&t&&!Ei(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){var t=r.prototype.getKey.call(this);return this.getInterpolate()||(t+=":disable-interpolation"),t},e.prototype.getOpaque=function(t){return qn&&this.getProjection()&&t&&!Ei(this.getProjection(),t)?!1:r.prototype.getOpaque.call(this,t)},e.prototype.getTileGridForProjection=function(t){if(!qn)return r.prototype.getTileGridForProjection.call(this,t);var n=this.getProjection();if(this.tileGrid&&(!n||Ei(n,t)))return this.tileGrid;var i=Zt(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=op(t)),this.tileGridForProjection[i]},e.prototype.getTileCacheForProjection=function(t){if(!qn)return r.prototype.getTileCacheForProjection.call(this,t);var n=this.getProjection();if(!n||Ei(n,t))return this.tileCache;var i=Zt(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new rp(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]},e.prototype.createTile_=function(t,n,i,o,a,l){var u=[t,n,i],h=this.getTileCoordForTileUrlFunction(u,a),c=h?this.tileUrlFunction(h,o,a):void 0,_=new this.tileClass(u,c!==void 0?It.IDLE:It.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return _.key=l,_.addEventListener(Mt.CHANGE,this.handleTileChange.bind(this)),_},e.prototype.getTile=function(t,n,i,o,a){var l=this.getProjection();if(!qn||!l||!a||Ei(l,a))return this.getTileInternal(t,n,i,o,l||a);var u=this.getTileCacheForProjection(a),h=[t,n,i],c=void 0,_=np(h);u.containsKey(_)&&(c=u.get(_));var v=this.getKey();if(c&&c.key==v)return c;var T=this.getTileGridForProjection(l),E=this.getTileGridForProjection(a),w=this.getTileCoordForTileUrlFunction(h,a),L=new Qd(l,T,a,E,h,w,this.getTilePixelRatio(o),this.getGutter(),function(P,F,D,k){return this.getTileInternal(P,F,D,k,l)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return L.key=v,c?(L.interimTile=c,L.refreshInterimChain(),u.replace(_,L)):u.set(_,L),L},e.prototype.getTileInternal=function(t,n,i,o,a){var l=null,u=xs(t,n,i),h=this.getKey();if(!this.tileCache.containsKey(u))l=this.createTile_(t,n,i,o,a,h),this.tileCache.set(u,l);else if(l=this.tileCache.get(u),l.key!=h){var c=l;l=this.createTile_(t,n,i,o,a,h),c.getState()==It.IDLE?l.interimTile=c.interimTile:l.interimTile=c,l.refreshInterimChain(),this.tileCache.replace(u,l)}return l},e.prototype.setRenderReprojectionEdges=function(t){if(!(!qn||this.renderReprojectionEdges_==t)){this.renderReprojectionEdges_=t;for(var n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,n){if(qn){var i=Sn(t);if(i){var o=Zt(i);o in this.tileGridForProjection||(this.tileGridForProjection[o]=n)}}},e}(bx);function Nx(r,e){r.getImage().src=e}var Fx=Dx,kx=globalThis&&globalThis.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gx=function(r){kx(e,r);function e(t){var n=t||{},i=n.imageSmoothing!==void 0?n.imageSmoothing:!0;n.interpolate!==void 0&&(i=n.interpolate);var o=n.projection!==void 0?n.projection:"EPSG:3857",a=n.tileGrid!==void 0?n.tileGrid:Ex({extent:Bu(o),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize});return r.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:i,opaque:n.opaque,projection:o,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:a,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:n.wrapX!==void 0?n.wrapX:!0,transition:n.transition,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this}return e}(Fx),jx=Gx;const Wx={name:"LayersControl",props:{mapTypeId:String,mapTypes:Object,layerGroup:Wn},computed:{selected:{set(r){return this.setMapType(r),r},get(){return this.mapTypeId}}},mounted(){for(const r in this.mapTypes){const e=this.mapTypes[r];this.layerGroup.getLayers().push(new ux({source:new jx({attributions:e.options.attribution,url:e.url}),name:e.name,mapTypeId:r,visible:r==this.mapTypeId}))}},methods:{setMapType(r){this.layerGroup.getLayers().forEach(e=>e.setVisible(e.get("mapTypeId")===r))}}},Bx=te("label",{for:"baselayer"},[te("b",null,"Toggle base layer")],-1),Ux=te("option",{disabled:"",value:""},"Please select one",-1),Yx=["value"];function Hx(r,e,t,n,i,o){return De(),Ge("section",null,[Bx,lu(te("select",{id:"baselayer","onUpdate:modelValue":e[0]||(e[0]=a=>o.selected=a)},[Ux,(De(!0),Ge(Ne,null,mo(t.mapTypes,(a,l)=>(De(),Ge("option",{key:l,value:l},Oi(a.name),9,Yx))),128))],512),[[cu,o.selected]])])}var Xx=Vo(Wx,[["render",Hx]]),$x=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},lp={exports:{}};/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */(function(r){(function(e,t){r.exports=e.document?t(e,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}})(typeof window!="undefined"?window:$x,function(e,t){var n=[],i=Object.getPrototypeOf,o=n.slice,a=n.flat?function(s){return n.flat.call(s)}:function(s){return n.concat.apply([],s)},l=n.push,u=n.indexOf,h={},c=h.toString,_=h.hasOwnProperty,v=_.toString,T=v.call(Object),E={},w=function(f){return typeof f=="function"&&typeof f.nodeType!="number"&&typeof f.item!="function"},L=function(f){return f!=null&&f===f.window},P=e.document,F={type:!0,src:!0,nonce:!0,noModule:!0};function D(s,f,d){d=d||P;var g,y,m=d.createElement("script");if(m.text=s,f)for(g in F)y=f[g]||f.getAttribute&&f.getAttribute(g),y&&m.setAttribute(g,y);d.head.appendChild(m).parentNode.removeChild(m)}function k(s){return s==null?s+"":typeof s=="object"||typeof s=="function"?h[c.call(s)]||"object":typeof s}var $="3.6.0",p=function(s,f){return new p.fn.init(s,f)};p.fn=p.prototype={jquery:$,constructor:p,length:0,toArray:function(){return o.call(this)},get:function(s){return s==null?o.call(this):s<0?this[s+this.length]:this[s]},pushStack:function(s){var f=p.merge(this.constructor(),s);return f.prevObject=this,f},each:function(s){return p.each(this,s)},map:function(s){return this.pushStack(p.map(this,function(f,d){return s.call(f,d,f)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(p.grep(this,function(s,f){return(f+1)%2}))},odd:function(){return this.pushStack(p.grep(this,function(s,f){return f%2}))},eq:function(s){var f=this.length,d=+s+(s<0?f:0);return this.pushStack(d>=0&&d<f?[this[d]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:n.sort,splice:n.splice},p.extend=p.fn.extend=function(){var s,f,d,g,y,m,C=arguments[0]||{},R=1,S=arguments.length,M=!1;for(typeof C=="boolean"&&(M=C,C=arguments[R]||{},R++),typeof C!="object"&&!w(C)&&(C={}),R===S&&(C=this,R--);R<S;R++)if((s=arguments[R])!=null)for(f in s)g=s[f],!(f==="__proto__"||C===g)&&(M&&g&&(p.isPlainObject(g)||(y=Array.isArray(g)))?(d=C[f],y&&!Array.isArray(d)?m=[]:!y&&!p.isPlainObject(d)?m={}:m=d,y=!1,C[f]=p.extend(M,m,g)):g!==void 0&&(C[f]=g));return C},p.extend({expando:"jQuery"+($+Math.random()).replace(/\D/g,""),isReady:!0,error:function(s){throw new Error(s)},noop:function(){},isPlainObject:function(s){var f,d;return!s||c.call(s)!=="[object Object]"?!1:(f=i(s),f?(d=_.call(f,"constructor")&&f.constructor,typeof d=="function"&&v.call(d)===T):!0)},isEmptyObject:function(s){var f;for(f in s)return!1;return!0},globalEval:function(s,f,d){D(s,{nonce:f&&f.nonce},d)},each:function(s,f){var d,g=0;if(tt(s))for(d=s.length;g<d&&f.call(s[g],g,s[g])!==!1;g++);else for(g in s)if(f.call(s[g],g,s[g])===!1)break;return s},makeArray:function(s,f){var d=f||[];return s!=null&&(tt(Object(s))?p.merge(d,typeof s=="string"?[s]:s):l.call(d,s)),d},inArray:function(s,f,d){return f==null?-1:u.call(f,s,d)},merge:function(s,f){for(var d=+f.length,g=0,y=s.length;g<d;g++)s[y++]=f[g];return s.length=y,s},grep:function(s,f,d){for(var g,y=[],m=0,C=s.length,R=!d;m<C;m++)g=!f(s[m],m),g!==R&&y.push(s[m]);return y},map:function(s,f,d){var g,y,m=0,C=[];if(tt(s))for(g=s.length;m<g;m++)y=f(s[m],m,d),y!=null&&C.push(y);else for(m in s)y=f(s[m],m,d),y!=null&&C.push(y);return a(C)},guid:1,support:E}),typeof Symbol=="function"&&(p.fn[Symbol.iterator]=n[Symbol.iterator]),p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(s,f){h["[object "+f+"]"]=f.toLowerCase()});function tt(s){var f=!!s&&"length"in s&&s.length,d=k(s);return w(s)||L(s)?!1:d==="array"||f===0||typeof f=="number"&&f>0&&f-1 in s}var Y=function(s){var f,d,g,y,m,C,R,S,M,W,K,j,U,yt,bt,mt,Ie,Te,tn,ie="sizzle"+1*new Date,At=s.document,Ke=0,Vt=0,ve=ia(),eo=ia(),ea=ia(),en=ia(),jr=function(x,I){return x===I&&(K=!0),0},Wr={}.hasOwnProperty,qe=[],lr=qe.pop,ln=qe.push,ur=qe.push,lf=qe.slice,Br=function(x,I){for(var A=0,X=x.length;A<X;A++)if(x[A]===I)return A;return-1},Fs="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Jt="[\\x20\\t\\r\\n\\f]",Ur="(?:\\\\[\\da-fA-F]{1,6}"+Jt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",uf="\\["+Jt+"*("+Ur+")(?:"+Jt+"*([*^$|!~]?=)"+Jt+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Ur+"))|)"+Jt+"*\\]",ks=":("+Ur+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+uf+")*)|.*)\\)|)",Np=new RegExp(Jt+"+","g"),na=new RegExp("^"+Jt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Jt+"+$","g"),Fp=new RegExp("^"+Jt+"*,"+Jt+"*"),ff=new RegExp("^"+Jt+"*([>+~]|"+Jt+")"+Jt+"*"),kp=new RegExp(Jt+"|>"),Gp=new RegExp(ks),jp=new RegExp("^"+Ur+"$"),ra={ID:new RegExp("^#("+Ur+")"),CLASS:new RegExp("^\\.("+Ur+")"),TAG:new RegExp("^("+Ur+"|[*])"),ATTR:new RegExp("^"+uf),PSEUDO:new RegExp("^"+ks),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Jt+"*(even|odd|(([+-]|)(\\d*)n|)"+Jt+"*(?:([+-]|)"+Jt+"*(\\d+)|))"+Jt+"*\\)|)","i"),bool:new RegExp("^(?:"+Fs+")$","i"),needsContext:new RegExp("^"+Jt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Jt+"*((?:-\\d)?\\d*)"+Jt+"*\\)|)(?=[^-]|$)","i")},Wp=/HTML$/i,Bp=/^(?:input|select|textarea|button)$/i,Up=/^h\d$/i,no=/^[^{]+\{\s*\[native \w/,Yp=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Gs=/[+~]/,$n=new RegExp("\\\\[\\da-fA-F]{1,6}"+Jt+"?|\\\\([^\\r\\n\\f])","g"),zn=function(x,I){var A="0x"+x.slice(1)-65536;return I||(A<0?String.fromCharCode(A+65536):String.fromCharCode(A>>10|55296,A&1023|56320))},hf=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,cf=function(x,I){return I?x==="\0"?"\uFFFD":x.slice(0,-1)+"\\"+x.charCodeAt(x.length-1).toString(16)+" ":"\\"+x},df=function(){j()},Hp=aa(function(x){return x.disabled===!0&&x.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{ur.apply(qe=lf.call(At.childNodes),At.childNodes),qe[At.childNodes.length].nodeType}catch{ur={apply:qe.length?function(I,A){ln.apply(I,lf.call(A))}:function(I,A){for(var X=I.length,N=0;I[X++]=A[N++];);I.length=X-1}}}function ae(x,I,A,X){var N,z,q,it,ut,Ct,Et,wt=I&&I.ownerDocument,Wt=I?I.nodeType:9;if(A=A||[],typeof x!="string"||!x||Wt!==1&&Wt!==9&&Wt!==11)return A;if(!X&&(j(I),I=I||U,bt)){if(Wt!==11&&(ut=Yp.exec(x)))if(N=ut[1]){if(Wt===9)if(q=I.getElementById(N)){if(q.id===N)return A.push(q),A}else return A;else if(wt&&(q=wt.getElementById(N))&&tn(I,q)&&q.id===N)return A.push(q),A}else{if(ut[2])return ur.apply(A,I.getElementsByTagName(x)),A;if((N=ut[3])&&d.getElementsByClassName&&I.getElementsByClassName)return ur.apply(A,I.getElementsByClassName(N)),A}if(d.qsa&&!en[x+" "]&&(!mt||!mt.test(x))&&(Wt!==1||I.nodeName.toLowerCase()!=="object")){if(Et=x,wt=I,Wt===1&&(kp.test(x)||ff.test(x))){for(wt=Gs.test(x)&&Ws(I.parentNode)||I,(wt!==I||!d.scope)&&((it=I.getAttribute("id"))?it=it.replace(hf,cf):I.setAttribute("id",it=ie)),Ct=C(x),z=Ct.length;z--;)Ct[z]=(it?"#"+it:":scope")+" "+oa(Ct[z]);Et=Ct.join(",")}try{return ur.apply(A,wt.querySelectorAll(Et)),A}catch{en(x,!0)}finally{it===ie&&I.removeAttribute("id")}}}return S(x.replace(na,"$1"),I,A,X)}function ia(){var x=[];function I(A,X){return x.push(A+" ")>g.cacheLength&&delete I[x.shift()],I[A+" "]=X}return I}function _n(x){return x[ie]=!0,x}function yn(x){var I=U.createElement("fieldset");try{return!!x(I)}catch{return!1}finally{I.parentNode&&I.parentNode.removeChild(I),I=null}}function js(x,I){for(var A=x.split("|"),X=A.length;X--;)g.attrHandle[A[X]]=I}function pf(x,I){var A=I&&x,X=A&&x.nodeType===1&&I.nodeType===1&&x.sourceIndex-I.sourceIndex;if(X)return X;if(A){for(;A=A.nextSibling;)if(A===I)return-1}return x?1:-1}function Xp(x){return function(I){var A=I.nodeName.toLowerCase();return A==="input"&&I.type===x}}function $p(x){return function(I){var A=I.nodeName.toLowerCase();return(A==="input"||A==="button")&&I.type===x}}function gf(x){return function(I){return"form"in I?I.parentNode&&I.disabled===!1?"label"in I?"label"in I.parentNode?I.parentNode.disabled===x:I.disabled===x:I.isDisabled===x||I.isDisabled!==!x&&Hp(I)===x:I.disabled===x:"label"in I?I.disabled===x:!1}}function Yr(x){return _n(function(I){return I=+I,_n(function(A,X){for(var N,z=x([],A.length,I),q=z.length;q--;)A[N=z[q]]&&(A[N]=!(X[N]=A[N]))})})}function Ws(x){return x&&typeof x.getElementsByTagName!="undefined"&&x}d=ae.support={},m=ae.isXML=function(x){var I=x&&x.namespaceURI,A=x&&(x.ownerDocument||x).documentElement;return!Wp.test(I||A&&A.nodeName||"HTML")},j=ae.setDocument=function(x){var I,A,X=x?x.ownerDocument||x:At;return X==U||X.nodeType!==9||!X.documentElement||(U=X,yt=U.documentElement,bt=!m(U),At!=U&&(A=U.defaultView)&&A.top!==A&&(A.addEventListener?A.addEventListener("unload",df,!1):A.attachEvent&&A.attachEvent("onunload",df)),d.scope=yn(function(N){return yt.appendChild(N).appendChild(U.createElement("div")),typeof N.querySelectorAll!="undefined"&&!N.querySelectorAll(":scope fieldset div").length}),d.attributes=yn(function(N){return N.className="i",!N.getAttribute("className")}),d.getElementsByTagName=yn(function(N){return N.appendChild(U.createComment("")),!N.getElementsByTagName("*").length}),d.getElementsByClassName=no.test(U.getElementsByClassName),d.getById=yn(function(N){return yt.appendChild(N).id=ie,!U.getElementsByName||!U.getElementsByName(ie).length}),d.getById?(g.filter.ID=function(N){var z=N.replace($n,zn);return function(q){return q.getAttribute("id")===z}},g.find.ID=function(N,z){if(typeof z.getElementById!="undefined"&&bt){var q=z.getElementById(N);return q?[q]:[]}}):(g.filter.ID=function(N){var z=N.replace($n,zn);return function(q){var it=typeof q.getAttributeNode!="undefined"&&q.getAttributeNode("id");return it&&it.value===z}},g.find.ID=function(N,z){if(typeof z.getElementById!="undefined"&&bt){var q,it,ut,Ct=z.getElementById(N);if(Ct){if(q=Ct.getAttributeNode("id"),q&&q.value===N)return[Ct];for(ut=z.getElementsByName(N),it=0;Ct=ut[it++];)if(q=Ct.getAttributeNode("id"),q&&q.value===N)return[Ct]}return[]}}),g.find.TAG=d.getElementsByTagName?function(N,z){if(typeof z.getElementsByTagName!="undefined")return z.getElementsByTagName(N);if(d.qsa)return z.querySelectorAll(N)}:function(N,z){var q,it=[],ut=0,Ct=z.getElementsByTagName(N);if(N==="*"){for(;q=Ct[ut++];)q.nodeType===1&&it.push(q);return it}return Ct},g.find.CLASS=d.getElementsByClassName&&function(N,z){if(typeof z.getElementsByClassName!="undefined"&&bt)return z.getElementsByClassName(N)},Ie=[],mt=[],(d.qsa=no.test(U.querySelectorAll))&&(yn(function(N){var z;yt.appendChild(N).innerHTML="<a id='"+ie+"'></a><select id='"+ie+"-\r\\' msallowcapture=''><option selected=''></option></select>",N.querySelectorAll("[msallowcapture^='']").length&&mt.push("[*^$]="+Jt+`*(?:''|"")`),N.querySelectorAll("[selected]").length||mt.push("\\["+Jt+"*(?:value|"+Fs+")"),N.querySelectorAll("[id~="+ie+"-]").length||mt.push("~="),z=U.createElement("input"),z.setAttribute("name",""),N.appendChild(z),N.querySelectorAll("[name='']").length||mt.push("\\["+Jt+"*name"+Jt+"*="+Jt+`*(?:''|"")`),N.querySelectorAll(":checked").length||mt.push(":checked"),N.querySelectorAll("a#"+ie+"+*").length||mt.push(".#.+[+~]"),N.querySelectorAll("\\\f"),mt.push("[\\r\\n\\f]")}),yn(function(N){N.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var z=U.createElement("input");z.setAttribute("type","hidden"),N.appendChild(z).setAttribute("name","D"),N.querySelectorAll("[name=d]").length&&mt.push("name"+Jt+"*[*^$|!~]?="),N.querySelectorAll(":enabled").length!==2&&mt.push(":enabled",":disabled"),yt.appendChild(N).disabled=!0,N.querySelectorAll(":disabled").length!==2&&mt.push(":enabled",":disabled"),N.querySelectorAll("*,:x"),mt.push(",.*:")})),(d.matchesSelector=no.test(Te=yt.matches||yt.webkitMatchesSelector||yt.mozMatchesSelector||yt.oMatchesSelector||yt.msMatchesSelector))&&yn(function(N){d.disconnectedMatch=Te.call(N,"*"),Te.call(N,"[s!='']:x"),Ie.push("!=",ks)}),mt=mt.length&&new RegExp(mt.join("|")),Ie=Ie.length&&new RegExp(Ie.join("|")),I=no.test(yt.compareDocumentPosition),tn=I||no.test(yt.contains)?function(N,z){var q=N.nodeType===9?N.documentElement:N,it=z&&z.parentNode;return N===it||!!(it&&it.nodeType===1&&(q.contains?q.contains(it):N.compareDocumentPosition&&N.compareDocumentPosition(it)&16))}:function(N,z){if(z){for(;z=z.parentNode;)if(z===N)return!0}return!1},jr=I?function(N,z){if(N===z)return K=!0,0;var q=!N.compareDocumentPosition-!z.compareDocumentPosition;return q||(q=(N.ownerDocument||N)==(z.ownerDocument||z)?N.compareDocumentPosition(z):1,q&1||!d.sortDetached&&z.compareDocumentPosition(N)===q?N==U||N.ownerDocument==At&&tn(At,N)?-1:z==U||z.ownerDocument==At&&tn(At,z)?1:W?Br(W,N)-Br(W,z):0:q&4?-1:1)}:function(N,z){if(N===z)return K=!0,0;var q,it=0,ut=N.parentNode,Ct=z.parentNode,Et=[N],wt=[z];if(!ut||!Ct)return N==U?-1:z==U?1:ut?-1:Ct?1:W?Br(W,N)-Br(W,z):0;if(ut===Ct)return pf(N,z);for(q=N;q=q.parentNode;)Et.unshift(q);for(q=z;q=q.parentNode;)wt.unshift(q);for(;Et[it]===wt[it];)it++;return it?pf(Et[it],wt[it]):Et[it]==At?-1:wt[it]==At?1:0}),U},ae.matches=function(x,I){return ae(x,null,null,I)},ae.matchesSelector=function(x,I){if(j(x),d.matchesSelector&&bt&&!en[I+" "]&&(!Ie||!Ie.test(I))&&(!mt||!mt.test(I)))try{var A=Te.call(x,I);if(A||d.disconnectedMatch||x.document&&x.document.nodeType!==11)return A}catch{en(I,!0)}return ae(I,U,null,[x]).length>0},ae.contains=function(x,I){return(x.ownerDocument||x)!=U&&j(x),tn(x,I)},ae.attr=function(x,I){(x.ownerDocument||x)!=U&&j(x);var A=g.attrHandle[I.toLowerCase()],X=A&&Wr.call(g.attrHandle,I.toLowerCase())?A(x,I,!bt):void 0;return X!==void 0?X:d.attributes||!bt?x.getAttribute(I):(X=x.getAttributeNode(I))&&X.specified?X.value:null},ae.escape=function(x){return(x+"").replace(hf,cf)},ae.error=function(x){throw new Error("Syntax error, unrecognized expression: "+x)},ae.uniqueSort=function(x){var I,A=[],X=0,N=0;if(K=!d.detectDuplicates,W=!d.sortStable&&x.slice(0),x.sort(jr),K){for(;I=x[N++];)I===x[N]&&(X=A.push(N));for(;X--;)x.splice(A[X],1)}return W=null,x},y=ae.getText=function(x){var I,A="",X=0,N=x.nodeType;if(N){if(N===1||N===9||N===11){if(typeof x.textContent=="string")return x.textContent;for(x=x.firstChild;x;x=x.nextSibling)A+=y(x)}else if(N===3||N===4)return x.nodeValue}else for(;I=x[X++];)A+=y(I);return A},g=ae.selectors={cacheLength:50,createPseudo:_n,match:ra,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(x){return x[1]=x[1].replace($n,zn),x[3]=(x[3]||x[4]||x[5]||"").replace($n,zn),x[2]==="~="&&(x[3]=" "+x[3]+" "),x.slice(0,4)},CHILD:function(x){return x[1]=x[1].toLowerCase(),x[1].slice(0,3)==="nth"?(x[3]||ae.error(x[0]),x[4]=+(x[4]?x[5]+(x[6]||1):2*(x[3]==="even"||x[3]==="odd")),x[5]=+(x[7]+x[8]||x[3]==="odd")):x[3]&&ae.error(x[0]),x},PSEUDO:function(x){var I,A=!x[6]&&x[2];return ra.CHILD.test(x[0])?null:(x[3]?x[2]=x[4]||x[5]||"":A&&Gp.test(A)&&(I=C(A,!0))&&(I=A.indexOf(")",A.length-I)-A.length)&&(x[0]=x[0].slice(0,I),x[2]=A.slice(0,I)),x.slice(0,3))}},filter:{TAG:function(x){var I=x.replace($n,zn).toLowerCase();return x==="*"?function(){return!0}:function(A){return A.nodeName&&A.nodeName.toLowerCase()===I}},CLASS:function(x){var I=ve[x+" "];return I||(I=new RegExp("(^|"+Jt+")"+x+"("+Jt+"|$)"))&&ve(x,function(A){return I.test(typeof A.className=="string"&&A.className||typeof A.getAttribute!="undefined"&&A.getAttribute("class")||"")})},ATTR:function(x,I,A){return function(X){var N=ae.attr(X,x);return N==null?I==="!=":I?(N+="",I==="="?N===A:I==="!="?N!==A:I==="^="?A&&N.indexOf(A)===0:I==="*="?A&&N.indexOf(A)>-1:I==="$="?A&&N.slice(-A.length)===A:I==="~="?(" "+N.replace(Np," ")+" ").indexOf(A)>-1:I==="|="?N===A||N.slice(0,A.length+1)===A+"-":!1):!0}},CHILD:function(x,I,A,X,N){var z=x.slice(0,3)!=="nth",q=x.slice(-4)!=="last",it=I==="of-type";return X===1&&N===0?function(ut){return!!ut.parentNode}:function(ut,Ct,Et){var wt,Wt,se,xt,Re,ke,nn=z!==q?"nextSibling":"previousSibling",ge=ut.parentNode,ro=it&&ut.nodeName.toLowerCase(),io=!Et&&!it,rn=!1;if(ge){if(z){for(;nn;){for(xt=ut;xt=xt[nn];)if(it?xt.nodeName.toLowerCase()===ro:xt.nodeType===1)return!1;ke=nn=x==="only"&&!ke&&"nextSibling"}return!0}if(ke=[q?ge.firstChild:ge.lastChild],q&&io){for(xt=ge,se=xt[ie]||(xt[ie]={}),Wt=se[xt.uniqueID]||(se[xt.uniqueID]={}),wt=Wt[x]||[],Re=wt[0]===Ke&&wt[1],rn=Re&&wt[2],xt=Re&&ge.childNodes[Re];xt=++Re&&xt&&xt[nn]||(rn=Re=0)||ke.pop();)if(xt.nodeType===1&&++rn&&xt===ut){Wt[x]=[Ke,Re,rn];break}}else if(io&&(xt=ut,se=xt[ie]||(xt[ie]={}),Wt=se[xt.uniqueID]||(se[xt.uniqueID]={}),wt=Wt[x]||[],Re=wt[0]===Ke&&wt[1],rn=Re),rn===!1)for(;(xt=++Re&&xt&&xt[nn]||(rn=Re=0)||ke.pop())&&!((it?xt.nodeName.toLowerCase()===ro:xt.nodeType===1)&&++rn&&(io&&(se=xt[ie]||(xt[ie]={}),Wt=se[xt.uniqueID]||(se[xt.uniqueID]={}),Wt[x]=[Ke,rn]),xt===ut)););return rn-=N,rn===X||rn%X===0&&rn/X>=0}}},PSEUDO:function(x,I){var A,X=g.pseudos[x]||g.setFilters[x.toLowerCase()]||ae.error("unsupported pseudo: "+x);return X[ie]?X(I):X.length>1?(A=[x,x,"",I],g.setFilters.hasOwnProperty(x.toLowerCase())?_n(function(N,z){for(var q,it=X(N,I),ut=it.length;ut--;)q=Br(N,it[ut]),N[q]=!(z[q]=it[ut])}):function(N){return X(N,0,A)}):X}},pseudos:{not:_n(function(x){var I=[],A=[],X=R(x.replace(na,"$1"));return X[ie]?_n(function(N,z,q,it){for(var ut,Ct=X(N,null,it,[]),Et=N.length;Et--;)(ut=Ct[Et])&&(N[Et]=!(z[Et]=ut))}):function(N,z,q){return I[0]=N,X(I,null,q,A),I[0]=null,!A.pop()}}),has:_n(function(x){return function(I){return ae(x,I).length>0}}),contains:_n(function(x){return x=x.replace($n,zn),function(I){return(I.textContent||y(I)).indexOf(x)>-1}}),lang:_n(function(x){return jp.test(x||"")||ae.error("unsupported lang: "+x),x=x.replace($n,zn).toLowerCase(),function(I){var A;do if(A=bt?I.lang:I.getAttribute("xml:lang")||I.getAttribute("lang"))return A=A.toLowerCase(),A===x||A.indexOf(x+"-")===0;while((I=I.parentNode)&&I.nodeType===1);return!1}}),target:function(x){var I=s.location&&s.location.hash;return I&&I.slice(1)===x.id},root:function(x){return x===yt},focus:function(x){return x===U.activeElement&&(!U.hasFocus||U.hasFocus())&&!!(x.type||x.href||~x.tabIndex)},enabled:gf(!1),disabled:gf(!0),checked:function(x){var I=x.nodeName.toLowerCase();return I==="input"&&!!x.checked||I==="option"&&!!x.selected},selected:function(x){return x.parentNode&&x.parentNode.selectedIndex,x.selected===!0},empty:function(x){for(x=x.firstChild;x;x=x.nextSibling)if(x.nodeType<6)return!1;return!0},parent:function(x){return!g.pseudos.empty(x)},header:function(x){return Up.test(x.nodeName)},input:function(x){return Bp.test(x.nodeName)},button:function(x){var I=x.nodeName.toLowerCase();return I==="input"&&x.type==="button"||I==="button"},text:function(x){var I;return x.nodeName.toLowerCase()==="input"&&x.type==="text"&&((I=x.getAttribute("type"))==null||I.toLowerCase()==="text")},first:Yr(function(){return[0]}),last:Yr(function(x,I){return[I-1]}),eq:Yr(function(x,I,A){return[A<0?A+I:A]}),even:Yr(function(x,I){for(var A=0;A<I;A+=2)x.push(A);return x}),odd:Yr(function(x,I){for(var A=1;A<I;A+=2)x.push(A);return x}),lt:Yr(function(x,I,A){for(var X=A<0?A+I:A>I?I:A;--X>=0;)x.push(X);return x}),gt:Yr(function(x,I,A){for(var X=A<0?A+I:A;++X<I;)x.push(X);return x})}},g.pseudos.nth=g.pseudos.eq;for(f in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})g.pseudos[f]=Xp(f);for(f in{submit:!0,reset:!0})g.pseudos[f]=$p(f);function vf(){}vf.prototype=g.filters=g.pseudos,g.setFilters=new vf,C=ae.tokenize=function(x,I){var A,X,N,z,q,it,ut,Ct=eo[x+" "];if(Ct)return I?0:Ct.slice(0);for(q=x,it=[],ut=g.preFilter;q;){(!A||(X=Fp.exec(q)))&&(X&&(q=q.slice(X[0].length)||q),it.push(N=[])),A=!1,(X=ff.exec(q))&&(A=X.shift(),N.push({value:A,type:X[0].replace(na," ")}),q=q.slice(A.length));for(z in g.filter)(X=ra[z].exec(q))&&(!ut[z]||(X=ut[z](X)))&&(A=X.shift(),N.push({value:A,type:z,matches:X}),q=q.slice(A.length));if(!A)break}return I?q.length:q?ae.error(x):eo(x,it).slice(0)};function oa(x){for(var I=0,A=x.length,X="";I<A;I++)X+=x[I].value;return X}function aa(x,I,A){var X=I.dir,N=I.next,z=N||X,q=A&&z==="parentNode",it=Vt++;return I.first?function(ut,Ct,Et){for(;ut=ut[X];)if(ut.nodeType===1||q)return x(ut,Ct,Et);return!1}:function(ut,Ct,Et){var wt,Wt,se,xt=[Ke,it];if(Et){for(;ut=ut[X];)if((ut.nodeType===1||q)&&x(ut,Ct,Et))return!0}else for(;ut=ut[X];)if(ut.nodeType===1||q)if(se=ut[ie]||(ut[ie]={}),Wt=se[ut.uniqueID]||(se[ut.uniqueID]={}),N&&N===ut.nodeName.toLowerCase())ut=ut[X]||ut;else{if((wt=Wt[z])&&wt[0]===Ke&&wt[1]===it)return xt[2]=wt[2];if(Wt[z]=xt,xt[2]=x(ut,Ct,Et))return!0}return!1}}function Bs(x){return x.length>1?function(I,A,X){for(var N=x.length;N--;)if(!x[N](I,A,X))return!1;return!0}:x[0]}function zp(x,I,A){for(var X=0,N=I.length;X<N;X++)ae(x,I[X],A);return A}function sa(x,I,A,X,N){for(var z,q=[],it=0,ut=x.length,Ct=I!=null;it<ut;it++)(z=x[it])&&(!A||A(z,X,N))&&(q.push(z),Ct&&I.push(it));return q}function Us(x,I,A,X,N,z){return X&&!X[ie]&&(X=Us(X)),N&&!N[ie]&&(N=Us(N,z)),_n(function(q,it,ut,Ct){var Et,wt,Wt,se=[],xt=[],Re=it.length,ke=q||zp(I||"*",ut.nodeType?[ut]:ut,[]),nn=x&&(q||!I)?sa(ke,se,x,ut,Ct):ke,ge=A?N||(q?x:Re||X)?[]:it:nn;if(A&&A(nn,ge,ut,Ct),X)for(Et=sa(ge,xt),X(Et,[],ut,Ct),wt=Et.length;wt--;)(Wt=Et[wt])&&(ge[xt[wt]]=!(nn[xt[wt]]=Wt));if(q){if(N||x){if(N){for(Et=[],wt=ge.length;wt--;)(Wt=ge[wt])&&Et.push(nn[wt]=Wt);N(null,ge=[],Et,Ct)}for(wt=ge.length;wt--;)(Wt=ge[wt])&&(Et=N?Br(q,Wt):se[wt])>-1&&(q[Et]=!(it[Et]=Wt))}}else ge=sa(ge===it?ge.splice(Re,ge.length):ge),N?N(null,it,ge,Ct):ur.apply(it,ge)})}function Ys(x){for(var I,A,X,N=x.length,z=g.relative[x[0].type],q=z||g.relative[" "],it=z?1:0,ut=aa(function(wt){return wt===I},q,!0),Ct=aa(function(wt){return Br(I,wt)>-1},q,!0),Et=[function(wt,Wt,se){var xt=!z&&(se||Wt!==M)||((I=Wt).nodeType?ut(wt,Wt,se):Ct(wt,Wt,se));return I=null,xt}];it<N;it++)if(A=g.relative[x[it].type])Et=[aa(Bs(Et),A)];else{if(A=g.filter[x[it].type].apply(null,x[it].matches),A[ie]){for(X=++it;X<N&&!g.relative[x[X].type];X++);return Us(it>1&&Bs(Et),it>1&&oa(x.slice(0,it-1).concat({value:x[it-2].type===" "?"*":""})).replace(na,"$1"),A,it<X&&Ys(x.slice(it,X)),X<N&&Ys(x=x.slice(X)),X<N&&oa(x))}Et.push(A)}return Bs(Et)}function Vp(x,I){var A=I.length>0,X=x.length>0,N=function(z,q,it,ut,Ct){var Et,wt,Wt,se=0,xt="0",Re=z&&[],ke=[],nn=M,ge=z||X&&g.find.TAG("*",Ct),ro=Ke+=nn==null?1:Math.random()||.1,io=ge.length;for(Ct&&(M=q==U||q||Ct);xt!==io&&(Et=ge[xt])!=null;xt++){if(X&&Et){for(wt=0,!q&&Et.ownerDocument!=U&&(j(Et),it=!bt);Wt=x[wt++];)if(Wt(Et,q||U,it)){ut.push(Et);break}Ct&&(Ke=ro)}A&&((Et=!Wt&&Et)&&se--,z&&Re.push(Et))}if(se+=xt,A&&xt!==se){for(wt=0;Wt=I[wt++];)Wt(Re,ke,q,it);if(z){if(se>0)for(;xt--;)Re[xt]||ke[xt]||(ke[xt]=lr.call(ut));ke=sa(ke)}ur.apply(ut,ke),Ct&&!z&&ke.length>0&&se+I.length>1&&ae.uniqueSort(ut)}return Ct&&(Ke=ro,M=nn),Re};return A?_n(N):N}return R=ae.compile=function(x,I){var A,X=[],N=[],z=ea[x+" "];if(!z){for(I||(I=C(x)),A=I.length;A--;)z=Ys(I[A]),z[ie]?X.push(z):N.push(z);z=ea(x,Vp(N,X)),z.selector=x}return z},S=ae.select=function(x,I,A,X){var N,z,q,it,ut,Ct=typeof x=="function"&&x,Et=!X&&C(x=Ct.selector||x);if(A=A||[],Et.length===1){if(z=Et[0]=Et[0].slice(0),z.length>2&&(q=z[0]).type==="ID"&&I.nodeType===9&&bt&&g.relative[z[1].type]){if(I=(g.find.ID(q.matches[0].replace($n,zn),I)||[])[0],I)Ct&&(I=I.parentNode);else return A;x=x.slice(z.shift().value.length)}for(N=ra.needsContext.test(x)?0:z.length;N--&&(q=z[N],!g.relative[it=q.type]);)if((ut=g.find[it])&&(X=ut(q.matches[0].replace($n,zn),Gs.test(z[0].type)&&Ws(I.parentNode)||I))){if(z.splice(N,1),x=X.length&&oa(z),!x)return ur.apply(A,X),A;break}}return(Ct||R(x,Et))(X,I,!bt,A,!I||Gs.test(x)&&Ws(I.parentNode)||I),A},d.sortStable=ie.split("").sort(jr).join("")===ie,d.detectDuplicates=!!K,j(),d.sortDetached=yn(function(x){return x.compareDocumentPosition(U.createElement("fieldset"))&1}),yn(function(x){return x.innerHTML="<a href='#'></a>",x.firstChild.getAttribute("href")==="#"})||js("type|href|height|width",function(x,I,A){if(!A)return x.getAttribute(I,I.toLowerCase()==="type"?1:2)}),(!d.attributes||!yn(function(x){return x.innerHTML="<input/>",x.firstChild.setAttribute("value",""),x.firstChild.getAttribute("value")===""}))&&js("value",function(x,I,A){if(!A&&x.nodeName.toLowerCase()==="input")return x.defaultValue}),yn(function(x){return x.getAttribute("disabled")==null})||js(Fs,function(x,I,A){var X;if(!A)return x[I]===!0?I.toLowerCase():(X=x.getAttributeNode(I))&&X.specified?X.value:null}),ae}(e);p.find=Y,p.expr=Y.selectors,p.expr[":"]=p.expr.pseudos,p.uniqueSort=p.unique=Y.uniqueSort,p.text=Y.getText,p.isXMLDoc=Y.isXML,p.contains=Y.contains,p.escapeSelector=Y.escape;var J=function(s,f,d){for(var g=[],y=d!==void 0;(s=s[f])&&s.nodeType!==9;)if(s.nodeType===1){if(y&&p(s).is(d))break;g.push(s)}return g},st=function(s,f){for(var d=[];s;s=s.nextSibling)s.nodeType===1&&s!==f&&d.push(s);return d},ct=p.expr.match.needsContext;function at(s,f){return s.nodeName&&s.nodeName.toLowerCase()===f.toLowerCase()}var _t=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Pt(s,f,d){return w(f)?p.grep(s,function(g,y){return!!f.call(g,y,g)!==d}):f.nodeType?p.grep(s,function(g){return g===f!==d}):typeof f!="string"?p.grep(s,function(g){return u.call(f,g)>-1!==d}):p.filter(f,s,d)}p.filter=function(s,f,d){var g=f[0];return d&&(s=":not("+s+")"),f.length===1&&g.nodeType===1?p.find.matchesSelector(g,s)?[g]:[]:p.find.matches(s,p.grep(f,function(y){return y.nodeType===1}))},p.fn.extend({find:function(s){var f,d,g=this.length,y=this;if(typeof s!="string")return this.pushStack(p(s).filter(function(){for(f=0;f<g;f++)if(p.contains(y[f],this))return!0}));for(d=this.pushStack([]),f=0;f<g;f++)p.find(s,y[f],d);return g>1?p.uniqueSort(d):d},filter:function(s){return this.pushStack(Pt(this,s||[],!1))},not:function(s){return this.pushStack(Pt(this,s||[],!0))},is:function(s){return!!Pt(this,typeof s=="string"&&ct.test(s)?p(s):s||[],!1).length}});var vt,dt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,rt=p.fn.init=function(s,f,d){var g,y;if(!s)return this;if(d=d||vt,typeof s=="string")if(s[0]==="<"&&s[s.length-1]===">"&&s.length>=3?g=[null,s,null]:g=dt.exec(s),g&&(g[1]||!f))if(g[1]){if(f=f instanceof p?f[0]:f,p.merge(this,p.parseHTML(g[1],f&&f.nodeType?f.ownerDocument||f:P,!0)),_t.test(g[1])&&p.isPlainObject(f))for(g in f)w(this[g])?this[g](f[g]):this.attr(g,f[g]);return this}else return y=P.getElementById(g[2]),y&&(this[0]=y,this.length=1),this;else return!f||f.jquery?(f||d).find(s):this.constructor(f).find(s);else{if(s.nodeType)return this[0]=s,this.length=1,this;if(w(s))return d.ready!==void 0?d.ready(s):s(p)}return p.makeArray(s,this)};rt.prototype=p.fn,vt=p(P);var gt=/^(?:parents|prev(?:Until|All))/,Ot={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({has:function(s){var f=p(s,this),d=f.length;return this.filter(function(){for(var g=0;g<d;g++)if(p.contains(this,f[g]))return!0})},closest:function(s,f){var d,g=0,y=this.length,m=[],C=typeof s!="string"&&p(s);if(!ct.test(s)){for(;g<y;g++)for(d=this[g];d&&d!==f;d=d.parentNode)if(d.nodeType<11&&(C?C.index(d)>-1:d.nodeType===1&&p.find.matchesSelector(d,s))){m.push(d);break}}return this.pushStack(m.length>1?p.uniqueSort(m):m)},index:function(s){return s?typeof s=="string"?u.call(p(s),this[0]):u.call(this,s.jquery?s[0]:s):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(s,f){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(s,f))))},addBack:function(s){return this.add(s==null?this.prevObject:this.prevObject.filter(s))}});function Gt(s,f){for(;(s=s[f])&&s.nodeType!==1;);return s}p.each({parent:function(s){var f=s.parentNode;return f&&f.nodeType!==11?f:null},parents:function(s){return J(s,"parentNode")},parentsUntil:function(s,f,d){return J(s,"parentNode",d)},next:function(s){return Gt(s,"nextSibling")},prev:function(s){return Gt(s,"previousSibling")},nextAll:function(s){return J(s,"nextSibling")},prevAll:function(s){return J(s,"previousSibling")},nextUntil:function(s,f,d){return J(s,"nextSibling",d)},prevUntil:function(s,f,d){return J(s,"previousSibling",d)},siblings:function(s){return st((s.parentNode||{}).firstChild,s)},children:function(s){return st(s.firstChild)},contents:function(s){return s.contentDocument!=null&&i(s.contentDocument)?s.contentDocument:(at(s,"template")&&(s=s.content||s),p.merge([],s.childNodes))}},function(s,f){p.fn[s]=function(d,g){var y=p.map(this,f,d);return s.slice(-5)!=="Until"&&(g=d),g&&typeof g=="string"&&(y=p.filter(g,y)),this.length>1&&(Ot[s]||p.uniqueSort(y),gt.test(s)&&y.reverse()),this.pushStack(y)}});var Dt=/[^\x20\t\r\n\f]+/g;function Z(s){var f={};return p.each(s.match(Dt)||[],function(d,g){f[g]=!0}),f}p.Callbacks=function(s){s=typeof s=="string"?Z(s):p.extend({},s);var f,d,g,y,m=[],C=[],R=-1,S=function(){for(y=y||s.once,g=f=!0;C.length;R=-1)for(d=C.shift();++R<m.length;)m[R].apply(d[0],d[1])===!1&&s.stopOnFalse&&(R=m.length,d=!1);s.memory||(d=!1),f=!1,y&&(d?m=[]:m="")},M={add:function(){return m&&(d&&!f&&(R=m.length-1,C.push(d)),function W(K){p.each(K,function(j,U){w(U)?(!s.unique||!M.has(U))&&m.push(U):U&&U.length&&k(U)!=="string"&&W(U)})}(arguments),d&&!f&&S()),this},remove:function(){return p.each(arguments,function(W,K){for(var j;(j=p.inArray(K,m,j))>-1;)m.splice(j,1),j<=R&&R--}),this},has:function(W){return W?p.inArray(W,m)>-1:m.length>0},empty:function(){return m&&(m=[]),this},disable:function(){return y=C=[],m=d="",this},disabled:function(){return!m},lock:function(){return y=C=[],!d&&!f&&(m=d=""),this},locked:function(){return!!y},fireWith:function(W,K){return y||(K=K||[],K=[W,K.slice?K.slice():K],C.push(K),f||S()),this},fire:function(){return M.fireWith(this,arguments),this},fired:function(){return!!g}};return M};function Bt(s){return s}function St(s){throw s}function de(s,f,d,g){var y;try{s&&w(y=s.promise)?y.call(s).done(f).fail(d):s&&w(y=s.then)?y.call(s,f,d):f.apply(void 0,[s].slice(g))}catch(m){d.apply(void 0,[m])}}p.extend({Deferred:function(s){var f=[["notify","progress",p.Callbacks("memory"),p.Callbacks("memory"),2],["resolve","done",p.Callbacks("once memory"),p.Callbacks("once memory"),0,"resolved"],["reject","fail",p.Callbacks("once memory"),p.Callbacks("once memory"),1,"rejected"]],d="pending",g={state:function(){return d},always:function(){return y.done(arguments).fail(arguments),this},catch:function(m){return g.then(null,m)},pipe:function(){var m=arguments;return p.Deferred(function(C){p.each(f,function(R,S){var M=w(m[S[4]])&&m[S[4]];y[S[1]](function(){var W=M&&M.apply(this,arguments);W&&w(W.promise)?W.promise().progress(C.notify).done(C.resolve).fail(C.reject):C[S[0]+"With"](this,M?[W]:arguments)})}),m=null}).promise()},then:function(m,C,R){var S=0;function M(W,K,j,U){return function(){var yt=this,bt=arguments,mt=function(){var Te,tn;if(!(W<S)){if(Te=j.apply(yt,bt),Te===K.promise())throw new TypeError("Thenable self-resolution");tn=Te&&(typeof Te=="object"||typeof Te=="function")&&Te.then,w(tn)?U?tn.call(Te,M(S,K,Bt,U),M(S,K,St,U)):(S++,tn.call(Te,M(S,K,Bt,U),M(S,K,St,U),M(S,K,Bt,K.notifyWith))):(j!==Bt&&(yt=void 0,bt=[Te]),(U||K.resolveWith)(yt,bt))}},Ie=U?mt:function(){try{mt()}catch(Te){p.Deferred.exceptionHook&&p.Deferred.exceptionHook(Te,Ie.stackTrace),W+1>=S&&(j!==St&&(yt=void 0,bt=[Te]),K.rejectWith(yt,bt))}};W?Ie():(p.Deferred.getStackHook&&(Ie.stackTrace=p.Deferred.getStackHook()),e.setTimeout(Ie))}}return p.Deferred(function(W){f[0][3].add(M(0,W,w(R)?R:Bt,W.notifyWith)),f[1][3].add(M(0,W,w(m)?m:Bt)),f[2][3].add(M(0,W,w(C)?C:St))}).promise()},promise:function(m){return m!=null?p.extend(m,g):g}},y={};return p.each(f,function(m,C){var R=C[2],S=C[5];g[C[1]]=R.add,S&&R.add(function(){d=S},f[3-m][2].disable,f[3-m][3].disable,f[0][2].lock,f[0][3].lock),R.add(C[3].fire),y[C[0]]=function(){return y[C[0]+"With"](this===y?void 0:this,arguments),this},y[C[0]+"With"]=R.fireWith}),g.promise(y),s&&s.call(y,y),y},when:function(s){var f=arguments.length,d=f,g=Array(d),y=o.call(arguments),m=p.Deferred(),C=function(R){return function(S){g[R]=this,y[R]=arguments.length>1?o.call(arguments):S,--f||m.resolveWith(g,y)}};if(f<=1&&(de(s,m.done(C(d)).resolve,m.reject,!f),m.state()==="pending"||w(y[d]&&y[d].then)))return m.then();for(;d--;)de(y[d],C(d),m.reject);return m.promise()}});var Me=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;p.Deferred.exceptionHook=function(s,f){e.console&&e.console.warn&&s&&Me.test(s.name)&&e.console.warn("jQuery.Deferred exception: "+s.message,s.stack,f)},p.readyException=function(s){e.setTimeout(function(){throw s})};var oe=p.Deferred();p.fn.ready=function(s){return oe.then(s).catch(function(f){p.readyException(f)}),this},p.extend({isReady:!1,readyWait:1,ready:function(s){(s===!0?--p.readyWait:p.isReady)||(p.isReady=!0,!(s!==!0&&--p.readyWait>0)&&oe.resolveWith(P,[p]))}}),p.ready.then=oe.then;function pe(){P.removeEventListener("DOMContentLoaded",pe),e.removeEventListener("load",pe),p.ready()}P.readyState==="complete"||P.readyState!=="loading"&&!P.documentElement.doScroll?e.setTimeout(p.ready):(P.addEventListener("DOMContentLoaded",pe),e.addEventListener("load",pe));var ue=function(s,f,d,g,y,m,C){var R=0,S=s.length,M=d==null;if(k(d)==="object"){y=!0;for(R in d)ue(s,f,R,d[R],!0,m,C)}else if(g!==void 0&&(y=!0,w(g)||(C=!0),M&&(C?(f.call(s,g),f=null):(M=f,f=function(W,K,j){return M.call(p(W),j)})),f))for(;R<S;R++)f(s[R],d,C?g:g.call(s[R],R,f(s[R],d)));return y?s:M?f.call(s):S?f(s[0],d):m},Ue=/^-ms-/,Fe=/-([a-z])/g;function Pn(s,f){return f.toUpperCase()}function O(s){return s.replace(Ue,"ms-").replace(Fe,Pn)}var b=function(s){return s.nodeType===1||s.nodeType===9||!+s.nodeType};function B(){this.expando=p.expando+B.uid++}B.uid=1,B.prototype={cache:function(s){var f=s[this.expando];return f||(f={},b(s)&&(s.nodeType?s[this.expando]=f:Object.defineProperty(s,this.expando,{value:f,configurable:!0}))),f},set:function(s,f,d){var g,y=this.cache(s);if(typeof f=="string")y[O(f)]=d;else for(g in f)y[O(g)]=f[g];return y},get:function(s,f){return f===void 0?this.cache(s):s[this.expando]&&s[this.expando][O(f)]},access:function(s,f,d){return f===void 0||f&&typeof f=="string"&&d===void 0?this.get(s,f):(this.set(s,f,d),d!==void 0?d:f)},remove:function(s,f){var d,g=s[this.expando];if(g!==void 0){if(f!==void 0)for(Array.isArray(f)?f=f.map(O):(f=O(f),f=f in g?[f]:f.match(Dt)||[]),d=f.length;d--;)delete g[f[d]];(f===void 0||p.isEmptyObject(g))&&(s.nodeType?s[this.expando]=void 0:delete s[this.expando])}},hasData:function(s){var f=s[this.expando];return f!==void 0&&!p.isEmptyObject(f)}};var G=new B,H=new B,et=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ot=/[A-Z]/g;function Q(s){return s==="true"?!0:s==="false"?!1:s==="null"?null:s===+s+""?+s:et.test(s)?JSON.parse(s):s}function nt(s,f,d){var g;if(d===void 0&&s.nodeType===1)if(g="data-"+f.replace(ot,"-$&").toLowerCase(),d=s.getAttribute(g),typeof d=="string"){try{d=Q(d)}catch{}H.set(s,f,d)}else d=void 0;return d}p.extend({hasData:function(s){return H.hasData(s)||G.hasData(s)},data:function(s,f,d){return H.access(s,f,d)},removeData:function(s,f){H.remove(s,f)},_data:function(s,f,d){return G.access(s,f,d)},_removeData:function(s,f){G.remove(s,f)}}),p.fn.extend({data:function(s,f){var d,g,y,m=this[0],C=m&&m.attributes;if(s===void 0){if(this.length&&(y=H.get(m),m.nodeType===1&&!G.get(m,"hasDataAttrs"))){for(d=C.length;d--;)C[d]&&(g=C[d].name,g.indexOf("data-")===0&&(g=O(g.slice(5)),nt(m,g,y[g])));G.set(m,"hasDataAttrs",!0)}return y}return typeof s=="object"?this.each(function(){H.set(this,s)}):ue(this,function(R){var S;if(m&&R===void 0)return S=H.get(m,s),S!==void 0||(S=nt(m,s),S!==void 0)?S:void 0;this.each(function(){H.set(this,s,R)})},null,f,arguments.length>1,null,!0)},removeData:function(s){return this.each(function(){H.remove(this,s)})}}),p.extend({queue:function(s,f,d){var g;if(s)return f=(f||"fx")+"queue",g=G.get(s,f),d&&(!g||Array.isArray(d)?g=G.access(s,f,p.makeArray(d)):g.push(d)),g||[]},dequeue:function(s,f){f=f||"fx";var d=p.queue(s,f),g=d.length,y=d.shift(),m=p._queueHooks(s,f),C=function(){p.dequeue(s,f)};y==="inprogress"&&(y=d.shift(),g--),y&&(f==="fx"&&d.unshift("inprogress"),delete m.stop,y.call(s,C,m)),!g&&m&&m.empty.fire()},_queueHooks:function(s,f){var d=f+"queueHooks";return G.get(s,d)||G.access(s,d,{empty:p.Callbacks("once memory").add(function(){G.remove(s,[f+"queue",d])})})}}),p.fn.extend({queue:function(s,f){var d=2;return typeof s!="string"&&(f=s,s="fx",d--),arguments.length<d?p.queue(this[0],s):f===void 0?this:this.each(function(){var g=p.queue(this,s,f);p._queueHooks(this,s),s==="fx"&&g[0]!=="inprogress"&&p.dequeue(this,s)})},dequeue:function(s){return this.each(function(){p.dequeue(this,s)})},clearQueue:function(s){return this.queue(s||"fx",[])},promise:function(s,f){var d,g=1,y=p.Deferred(),m=this,C=this.length,R=function(){--g||y.resolveWith(m,[m])};for(typeof s!="string"&&(f=s,s=void 0),s=s||"fx";C--;)d=G.get(m[C],s+"queueHooks"),d&&d.empty&&(g++,d.empty.add(R));return R(),y.promise(f)}});var V=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ht=new RegExp("^(?:([+-])=|)("+V+")([a-z%]*)$","i"),lt=["Top","Right","Bottom","Left"],pt=P.documentElement,Tt=function(s){return p.contains(s.ownerDocument,s)},Ft={composed:!0};pt.getRootNode&&(Tt=function(s){return p.contains(s.ownerDocument,s)||s.getRootNode(Ft)===s.ownerDocument});var Nt=function(s,f){return s=f||s,s.style.display==="none"||s.style.display===""&&Tt(s)&&p.css(s,"display")==="none"};function kt(s,f,d,g){var y,m,C=20,R=g?function(){return g.cur()}:function(){return p.css(s,f,"")},S=R(),M=d&&d[3]||(p.cssNumber[f]?"":"px"),W=s.nodeType&&(p.cssNumber[f]||M!=="px"&&+S)&&ht.exec(p.css(s,f));if(W&&W[3]!==M){for(S=S/2,M=M||W[3],W=+S||1;C--;)p.style(s,f,W+M),(1-m)*(1-(m=R()/S||.5))<=0&&(C=0),W=W/m;W=W*2,p.style(s,f,W+M),d=d||[]}return d&&(W=+W||+S||0,y=d[1]?W+(d[1]+1)*d[2]:+d[2],g&&(g.unit=M,g.start=W,g.end=y)),y}var Ut={};function we(s){var f,d=s.ownerDocument,g=s.nodeName,y=Ut[g];return y||(f=d.body.appendChild(d.createElement(g)),y=p.css(f,"display"),f.parentNode.removeChild(f),y==="none"&&(y="block"),Ut[g]=y,y)}function ne(s,f){for(var d,g,y=[],m=0,C=s.length;m<C;m++)g=s[m],g.style&&(d=g.style.display,f?(d==="none"&&(y[m]=G.get(g,"display")||null,y[m]||(g.style.display="")),g.style.display===""&&Nt(g)&&(y[m]=we(g))):d!=="none"&&(y[m]="none",G.set(g,"display",d)));for(m=0;m<C;m++)y[m]!=null&&(s[m].style.display=y[m]);return s}p.fn.extend({show:function(){return ne(this,!0)},hide:function(){return ne(this)},toggle:function(s){return typeof s=="boolean"?s?this.show():this.hide():this.each(function(){Nt(this)?p(this).show():p(this).hide()})}});var Qe=/^(?:checkbox|radio)$/i,fe=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,sn=/^$|^module$|\/(?:java|ecma)script/i;(function(){var s=P.createDocumentFragment(),f=s.appendChild(P.createElement("div")),d=P.createElement("input");d.setAttribute("type","radio"),d.setAttribute("checked","checked"),d.setAttribute("name","t"),f.appendChild(d),E.checkClone=f.cloneNode(!0).cloneNode(!0).lastChild.checked,f.innerHTML="<textarea>x</textarea>",E.noCloneChecked=!!f.cloneNode(!0).lastChild.defaultValue,f.innerHTML="<option></option>",E.option=!!f.lastChild})();var Xt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Xt.tbody=Xt.tfoot=Xt.colgroup=Xt.caption=Xt.thead,Xt.th=Xt.td,E.option||(Xt.optgroup=Xt.option=[1,"<select multiple='multiple'>","</select>"]);function re(s,f){var d;return typeof s.getElementsByTagName!="undefined"?d=s.getElementsByTagName(f||"*"):typeof s.querySelectorAll!="undefined"?d=s.querySelectorAll(f||"*"):d=[],f===void 0||f&&at(s,f)?p.merge([s],d):d}function Yn(s,f){for(var d=0,g=s.length;d<g;d++)G.set(s[d],"globalEval",!f||G.get(f[d],"globalEval"))}var zi=/<|&#?\w+;/;function Ko(s,f,d,g,y){for(var m,C,R,S,M,W,K=f.createDocumentFragment(),j=[],U=0,yt=s.length;U<yt;U++)if(m=s[U],m||m===0)if(k(m)==="object")p.merge(j,m.nodeType?[m]:m);else if(!zi.test(m))j.push(f.createTextNode(m));else{for(C=C||K.appendChild(f.createElement("div")),R=(fe.exec(m)||["",""])[1].toLowerCase(),S=Xt[R]||Xt._default,C.innerHTML=S[1]+p.htmlPrefilter(m)+S[2],W=S[0];W--;)C=C.lastChild;p.merge(j,C.childNodes),C=K.firstChild,C.textContent=""}for(K.textContent="",U=0;m=j[U++];){if(g&&p.inArray(m,g)>-1){y&&y.push(m);continue}if(M=Tt(m),C=re(K.appendChild(m),"script"),M&&Yn(C),d)for(W=0;m=C[W++];)sn.test(m.type||"")&&d.push(m)}return K}var qo=/^([^.]*)(?:\.(.+)|)/;function Hn(){return!0}function Xn(){return!1}function Vi(s,f){return s===Zo()==(f==="focus")}function Zo(){try{return P.activeElement}catch{}}function Ar(s,f,d,g,y,m){var C,R;if(typeof f=="object"){typeof d!="string"&&(g=g||d,d=void 0);for(R in f)Ar(s,R,d,g,f[R],m);return s}if(g==null&&y==null?(y=d,g=d=void 0):y==null&&(typeof d=="string"?(y=g,g=void 0):(y=g,g=d,d=void 0)),y===!1)y=Xn;else if(!y)return s;return m===1&&(C=y,y=function(S){return p().off(S),C.apply(this,arguments)},y.guid=C.guid||(C.guid=p.guid++)),s.each(function(){p.event.add(this,f,y,g,d)})}p.event={global:{},add:function(s,f,d,g,y){var m,C,R,S,M,W,K,j,U,yt,bt,mt=G.get(s);if(!!b(s))for(d.handler&&(m=d,d=m.handler,y=m.selector),y&&p.find.matchesSelector(pt,y),d.guid||(d.guid=p.guid++),(S=mt.events)||(S=mt.events=Object.create(null)),(C=mt.handle)||(C=mt.handle=function(Ie){return typeof p!="undefined"&&p.event.triggered!==Ie.type?p.event.dispatch.apply(s,arguments):void 0}),f=(f||"").match(Dt)||[""],M=f.length;M--;)R=qo.exec(f[M])||[],U=bt=R[1],yt=(R[2]||"").split(".").sort(),U&&(K=p.event.special[U]||{},U=(y?K.delegateType:K.bindType)||U,K=p.event.special[U]||{},W=p.extend({type:U,origType:bt,data:g,handler:d,guid:d.guid,selector:y,needsContext:y&&p.expr.match.needsContext.test(y),namespace:yt.join(".")},m),(j=S[U])||(j=S[U]=[],j.delegateCount=0,(!K.setup||K.setup.call(s,g,yt,C)===!1)&&s.addEventListener&&s.addEventListener(U,C)),K.add&&(K.add.call(s,W),W.handler.guid||(W.handler.guid=d.guid)),y?j.splice(j.delegateCount++,0,W):j.push(W),p.event.global[U]=!0)},remove:function(s,f,d,g,y){var m,C,R,S,M,W,K,j,U,yt,bt,mt=G.hasData(s)&&G.get(s);if(!(!mt||!(S=mt.events))){for(f=(f||"").match(Dt)||[""],M=f.length;M--;){if(R=qo.exec(f[M])||[],U=bt=R[1],yt=(R[2]||"").split(".").sort(),!U){for(U in S)p.event.remove(s,U+f[M],d,g,!0);continue}for(K=p.event.special[U]||{},U=(g?K.delegateType:K.bindType)||U,j=S[U]||[],R=R[2]&&new RegExp("(^|\\.)"+yt.join("\\.(?:.*\\.|)")+"(\\.|$)"),C=m=j.length;m--;)W=j[m],(y||bt===W.origType)&&(!d||d.guid===W.guid)&&(!R||R.test(W.namespace))&&(!g||g===W.selector||g==="**"&&W.selector)&&(j.splice(m,1),W.selector&&j.delegateCount--,K.remove&&K.remove.call(s,W));C&&!j.length&&((!K.teardown||K.teardown.call(s,yt,mt.handle)===!1)&&p.removeEvent(s,U,mt.handle),delete S[U])}p.isEmptyObject(S)&&G.remove(s,"handle events")}},dispatch:function(s){var f,d,g,y,m,C,R=new Array(arguments.length),S=p.event.fix(s),M=(G.get(this,"events")||Object.create(null))[S.type]||[],W=p.event.special[S.type]||{};for(R[0]=S,f=1;f<arguments.length;f++)R[f]=arguments[f];if(S.delegateTarget=this,!(W.preDispatch&&W.preDispatch.call(this,S)===!1)){for(C=p.event.handlers.call(this,S,M),f=0;(y=C[f++])&&!S.isPropagationStopped();)for(S.currentTarget=y.elem,d=0;(m=y.handlers[d++])&&!S.isImmediatePropagationStopped();)(!S.rnamespace||m.namespace===!1||S.rnamespace.test(m.namespace))&&(S.handleObj=m,S.data=m.data,g=((p.event.special[m.origType]||{}).handle||m.handler).apply(y.elem,R),g!==void 0&&(S.result=g)===!1&&(S.preventDefault(),S.stopPropagation()));return W.postDispatch&&W.postDispatch.call(this,S),S.result}},handlers:function(s,f){var d,g,y,m,C,R=[],S=f.delegateCount,M=s.target;if(S&&M.nodeType&&!(s.type==="click"&&s.button>=1)){for(;M!==this;M=M.parentNode||this)if(M.nodeType===1&&!(s.type==="click"&&M.disabled===!0)){for(m=[],C={},d=0;d<S;d++)g=f[d],y=g.selector+" ",C[y]===void 0&&(C[y]=g.needsContext?p(y,this).index(M)>-1:p.find(y,this,null,[M]).length),C[y]&&m.push(g);m.length&&R.push({elem:M,handlers:m})}}return M=this,S<f.length&&R.push({elem:M,handlers:f.slice(S)}),R},addProp:function(s,f){Object.defineProperty(p.Event.prototype,s,{enumerable:!0,configurable:!0,get:w(f)?function(){if(this.originalEvent)return f(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[s]},set:function(d){Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:d})}})},fix:function(s){return s[p.expando]?s:new p.Event(s)},special:{load:{noBubble:!0},click:{setup:function(s){var f=this||s;return Qe.test(f.type)&&f.click&&at(f,"input")&&Ln(f,"click",Hn),!1},trigger:function(s){var f=this||s;return Qe.test(f.type)&&f.click&&at(f,"input")&&Ln(f,"click"),!0},_default:function(s){var f=s.target;return Qe.test(f.type)&&f.click&&at(f,"input")&&G.get(f,"click")||at(f,"a")}},beforeunload:{postDispatch:function(s){s.result!==void 0&&s.originalEvent&&(s.originalEvent.returnValue=s.result)}}}};function Ln(s,f,d){if(!d){G.get(s,f)===void 0&&p.event.add(s,f,Hn);return}G.set(s,f,!1),p.event.add(s,f,{namespace:!1,handler:function(g){var y,m,C=G.get(this,f);if(g.isTrigger&1&&this[f]){if(C.length)(p.event.special[f]||{}).delegateType&&g.stopPropagation();else if(C=o.call(arguments),G.set(this,f,C),y=d(this,f),this[f](),m=G.get(this,f),C!==m||y?G.set(this,f,!1):m={},C!==m)return g.stopImmediatePropagation(),g.preventDefault(),m&&m.value}else C.length&&(G.set(this,f,{value:p.event.trigger(p.extend(C[0],p.Event.prototype),C.slice(1),this)}),g.stopImmediatePropagation())}})}p.removeEvent=function(s,f,d){s.removeEventListener&&s.removeEventListener(f,d)},p.Event=function(s,f){if(!(this instanceof p.Event))return new p.Event(s,f);s&&s.type?(this.originalEvent=s,this.type=s.type,this.isDefaultPrevented=s.defaultPrevented||s.defaultPrevented===void 0&&s.returnValue===!1?Hn:Xn,this.target=s.target&&s.target.nodeType===3?s.target.parentNode:s.target,this.currentTarget=s.currentTarget,this.relatedTarget=s.relatedTarget):this.type=s,f&&p.extend(this,f),this.timeStamp=s&&s.timeStamp||Date.now(),this[p.expando]=!0},p.Event.prototype={constructor:p.Event,isDefaultPrevented:Xn,isPropagationStopped:Xn,isImmediatePropagationStopped:Xn,isSimulated:!1,preventDefault:function(){var s=this.originalEvent;this.isDefaultPrevented=Hn,s&&!this.isSimulated&&s.preventDefault()},stopPropagation:function(){var s=this.originalEvent;this.isPropagationStopped=Hn,s&&!this.isSimulated&&s.stopPropagation()},stopImmediatePropagation:function(){var s=this.originalEvent;this.isImmediatePropagationStopped=Hn,s&&!this.isSimulated&&s.stopImmediatePropagation(),this.stopPropagation()}},p.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},p.event.addProp),p.each({focus:"focusin",blur:"focusout"},function(s,f){p.event.special[s]={setup:function(){return Ln(this,s,Vi),!1},trigger:function(){return Ln(this,s),!0},_default:function(){return!0},delegateType:f}}),p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(s,f){p.event.special[s]={delegateType:f,bindType:f,handle:function(d){var g,y=this,m=d.relatedTarget,C=d.handleObj;return(!m||m!==y&&!p.contains(y,m))&&(d.type=C.origType,g=C.handler.apply(this,arguments),d.type=f),g}}}),p.fn.extend({on:function(s,f,d,g){return Ar(this,s,f,d,g)},one:function(s,f,d,g){return Ar(this,s,f,d,g,1)},off:function(s,f,d){var g,y;if(s&&s.preventDefault&&s.handleObj)return g=s.handleObj,p(s.delegateTarget).off(g.namespace?g.origType+"."+g.namespace:g.origType,g.selector,g.handler),this;if(typeof s=="object"){for(y in s)this.off(y,f,s[y]);return this}return(f===!1||typeof f=="function")&&(d=f,f=void 0),d===!1&&(d=Xn),this.each(function(){p.event.remove(this,s,d,f)})}});var br=/<script|<style|<link/i,Mr=/checked\s*(?:[^=]|=\s*.checked.)/i,Jo=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ki(s,f){return at(s,"table")&&at(f.nodeType!==11?f:f.firstChild,"tr")&&p(s).children("tbody")[0]||s}function ws(s){return s.type=(s.getAttribute("type")!==null)+"/"+s.type,s}function Os(s){return(s.type||"").slice(0,5)==="true/"?s.type=s.type.slice(5):s.removeAttribute("type"),s}function ar(s,f){var d,g,y,m,C,R,S;if(f.nodeType===1){if(G.hasData(s)&&(m=G.get(s),S=m.events,S)){G.remove(f,"handle events");for(y in S)for(d=0,g=S[y].length;d<g;d++)p.event.add(f,y,S[y][d])}H.hasData(s)&&(C=H.access(s),R=p.extend({},C),H.set(f,R))}}function Dr(s,f){var d=f.nodeName.toLowerCase();d==="input"&&Qe.test(s.type)?f.checked=s.checked:(d==="input"||d==="textarea")&&(f.defaultValue=s.defaultValue)}function Ye(s,f,d,g){f=a(f);var y,m,C,R,S,M,W=0,K=s.length,j=K-1,U=f[0],yt=w(U);if(yt||K>1&&typeof U=="string"&&!E.checkClone&&Mr.test(U))return s.each(function(bt){var mt=s.eq(bt);yt&&(f[0]=U.call(this,bt,mt.html())),Ye(mt,f,d,g)});if(K&&(y=Ko(f,s[0].ownerDocument,!1,s,g),m=y.firstChild,y.childNodes.length===1&&(y=m),m||g)){for(C=p.map(re(y,"script"),ws),R=C.length;W<K;W++)S=y,W!==j&&(S=p.clone(S,!0,!0),R&&p.merge(C,re(S,"script"))),d.call(s[W],S,W);if(R)for(M=C[C.length-1].ownerDocument,p.map(C,Os),W=0;W<R;W++)S=C[W],sn.test(S.type||"")&&!G.access(S,"globalEval")&&p.contains(M,S)&&(S.src&&(S.type||"").toLowerCase()!=="module"?p._evalUrl&&!S.noModule&&p._evalUrl(S.src,{nonce:S.nonce||S.getAttribute("nonce")},M):D(S.textContent.replace(Jo,""),S,M))}return s}function Nr(s,f,d){for(var g,y=f?p.filter(f,s):s,m=0;(g=y[m])!=null;m++)!d&&g.nodeType===1&&p.cleanData(re(g)),g.parentNode&&(d&&Tt(g)&&Yn(re(g,"script")),g.parentNode.removeChild(g));return s}p.extend({htmlPrefilter:function(s){return s},clone:function(s,f,d){var g,y,m,C,R=s.cloneNode(!0),S=Tt(s);if(!E.noCloneChecked&&(s.nodeType===1||s.nodeType===11)&&!p.isXMLDoc(s))for(C=re(R),m=re(s),g=0,y=m.length;g<y;g++)Dr(m[g],C[g]);if(f)if(d)for(m=m||re(s),C=C||re(R),g=0,y=m.length;g<y;g++)ar(m[g],C[g]);else ar(s,R);return C=re(R,"script"),C.length>0&&Yn(C,!S&&re(s,"script")),R},cleanData:function(s){for(var f,d,g,y=p.event.special,m=0;(d=s[m])!==void 0;m++)if(b(d)){if(f=d[G.expando]){if(f.events)for(g in f.events)y[g]?p.event.remove(d,g):p.removeEvent(d,g,f.handle);d[G.expando]=void 0}d[H.expando]&&(d[H.expando]=void 0)}}}),p.fn.extend({detach:function(s){return Nr(this,s,!0)},remove:function(s){return Nr(this,s)},text:function(s){return ue(this,function(f){return f===void 0?p.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=f)})},null,s,arguments.length)},append:function(){return Ye(this,arguments,function(s){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var f=Ki(this,s);f.appendChild(s)}})},prepend:function(){return Ye(this,arguments,function(s){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var f=Ki(this,s);f.insertBefore(s,f.firstChild)}})},before:function(){return Ye(this,arguments,function(s){this.parentNode&&this.parentNode.insertBefore(s,this)})},after:function(){return Ye(this,arguments,function(s){this.parentNode&&this.parentNode.insertBefore(s,this.nextSibling)})},empty:function(){for(var s,f=0;(s=this[f])!=null;f++)s.nodeType===1&&(p.cleanData(re(s,!1)),s.textContent="");return this},clone:function(s,f){return s=s==null?!1:s,f=f==null?s:f,this.map(function(){return p.clone(this,s,f)})},html:function(s){return ue(this,function(f){var d=this[0]||{},g=0,y=this.length;if(f===void 0&&d.nodeType===1)return d.innerHTML;if(typeof f=="string"&&!br.test(f)&&!Xt[(fe.exec(f)||["",""])[1].toLowerCase()]){f=p.htmlPrefilter(f);try{for(;g<y;g++)d=this[g]||{},d.nodeType===1&&(p.cleanData(re(d,!1)),d.innerHTML=f);d=0}catch{}}d&&this.empty().append(f)},null,s,arguments.length)},replaceWith:function(){var s=[];return Ye(this,arguments,function(f){var d=this.parentNode;p.inArray(this,s)<0&&(p.cleanData(re(this)),d&&d.replaceChild(f,this))},s)}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(s,f){p.fn[s]=function(d){for(var g,y=[],m=p(d),C=m.length-1,R=0;R<=C;R++)g=R===C?this:this.clone(!0),p(m[R])[f](g),l.apply(y,g.get());return this.pushStack(y)}});var sr=new RegExp("^("+V+")(?!px)[a-z%]+$","i"),Oe=function(s){var f=s.ownerDocument.defaultView;return(!f||!f.opener)&&(f=e),f.getComputedStyle(s)},He=function(s,f,d){var g,y,m={};for(y in f)m[y]=s.style[y],s.style[y]=f[y];g=d.call(s);for(y in f)s.style[y]=m[y];return g},qi=new RegExp(lt.join("|"),"i");(function(){function s(){if(!!M){S.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",M.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",pt.appendChild(S).appendChild(M);var W=e.getComputedStyle(M);d=W.top!=="1%",R=f(W.marginLeft)===12,M.style.right="60%",m=f(W.right)===36,g=f(W.width)===36,M.style.position="absolute",y=f(M.offsetWidth/3)===12,pt.removeChild(S),M=null}}function f(W){return Math.round(parseFloat(W))}var d,g,y,m,C,R,S=P.createElement("div"),M=P.createElement("div");!M.style||(M.style.backgroundClip="content-box",M.cloneNode(!0).style.backgroundClip="",E.clearCloneStyle=M.style.backgroundClip==="content-box",p.extend(E,{boxSizingReliable:function(){return s(),g},pixelBoxStyles:function(){return s(),m},pixelPosition:function(){return s(),d},reliableMarginLeft:function(){return s(),R},scrollboxSize:function(){return s(),y},reliableTrDimensions:function(){var W,K,j,U;return C==null&&(W=P.createElement("table"),K=P.createElement("tr"),j=P.createElement("div"),W.style.cssText="position:absolute;left:-11111px;border-collapse:separate",K.style.cssText="border:1px solid",K.style.height="1px",j.style.height="9px",j.style.display="block",pt.appendChild(W).appendChild(K).appendChild(j),U=e.getComputedStyle(K),C=parseInt(U.height,10)+parseInt(U.borderTopWidth,10)+parseInt(U.borderBottomWidth,10)===K.offsetHeight,pt.removeChild(W)),C}}))})();function Fr(s,f,d){var g,y,m,C,R=s.style;return d=d||Oe(s),d&&(C=d.getPropertyValue(f)||d[f],C===""&&!Tt(s)&&(C=p.style(s,f)),!E.pixelBoxStyles()&&sr.test(C)&&qi.test(f)&&(g=R.width,y=R.minWidth,m=R.maxWidth,R.minWidth=R.maxWidth=R.width=C,C=d.width,R.width=g,R.minWidth=y,R.maxWidth=m)),C!==void 0?C+"":C}function Zi(s,f){return{get:function(){if(s()){delete this.get;return}return(this.get=f).apply(this,arguments)}}}var Uu=["Webkit","Moz","ms"],Yu=P.createElement("div").style,Hu={};function up(s){for(var f=s[0].toUpperCase()+s.slice(1),d=Uu.length;d--;)if(s=Uu[d]+f,s in Yu)return s}function Is(s){var f=p.cssProps[s]||Hu[s];return f||(s in Yu?s:Hu[s]=up(s)||s)}var fp=/^(none|table(?!-c[ea]).+)/,Xu=/^--/,hp={position:"absolute",visibility:"hidden",display:"block"},$u={letterSpacing:"0",fontWeight:"400"};function zu(s,f,d){var g=ht.exec(f);return g?Math.max(0,g[2]-(d||0))+(g[3]||"px"):f}function Rs(s,f,d,g,y,m){var C=f==="width"?1:0,R=0,S=0;if(d===(g?"border":"content"))return 0;for(;C<4;C+=2)d==="margin"&&(S+=p.css(s,d+lt[C],!0,y)),g?(d==="content"&&(S-=p.css(s,"padding"+lt[C],!0,y)),d!=="margin"&&(S-=p.css(s,"border"+lt[C]+"Width",!0,y))):(S+=p.css(s,"padding"+lt[C],!0,y),d!=="padding"?S+=p.css(s,"border"+lt[C]+"Width",!0,y):R+=p.css(s,"border"+lt[C]+"Width",!0,y));return!g&&m>=0&&(S+=Math.max(0,Math.ceil(s["offset"+f[0].toUpperCase()+f.slice(1)]-m-S-R-.5))||0),S}function Vu(s,f,d){var g=Oe(s),y=!E.boxSizingReliable()||d,m=y&&p.css(s,"boxSizing",!1,g)==="border-box",C=m,R=Fr(s,f,g),S="offset"+f[0].toUpperCase()+f.slice(1);if(sr.test(R)){if(!d)return R;R="auto"}return(!E.boxSizingReliable()&&m||!E.reliableTrDimensions()&&at(s,"tr")||R==="auto"||!parseFloat(R)&&p.css(s,"display",!1,g)==="inline")&&s.getClientRects().length&&(m=p.css(s,"boxSizing",!1,g)==="border-box",C=S in s,C&&(R=s[S])),R=parseFloat(R)||0,R+Rs(s,f,d||(m?"border":"content"),C,g,R)+"px"}p.extend({cssHooks:{opacity:{get:function(s,f){if(f){var d=Fr(s,"opacity");return d===""?"1":d}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(s,f,d,g){if(!(!s||s.nodeType===3||s.nodeType===8||!s.style)){var y,m,C,R=O(f),S=Xu.test(f),M=s.style;if(S||(f=Is(R)),C=p.cssHooks[f]||p.cssHooks[R],d!==void 0){if(m=typeof d,m==="string"&&(y=ht.exec(d))&&y[1]&&(d=kt(s,f,y),m="number"),d==null||d!==d)return;m==="number"&&!S&&(d+=y&&y[3]||(p.cssNumber[R]?"":"px")),!E.clearCloneStyle&&d===""&&f.indexOf("background")===0&&(M[f]="inherit"),(!C||!("set"in C)||(d=C.set(s,d,g))!==void 0)&&(S?M.setProperty(f,d):M[f]=d)}else return C&&"get"in C&&(y=C.get(s,!1,g))!==void 0?y:M[f]}},css:function(s,f,d,g){var y,m,C,R=O(f),S=Xu.test(f);return S||(f=Is(R)),C=p.cssHooks[f]||p.cssHooks[R],C&&"get"in C&&(y=C.get(s,!0,d)),y===void 0&&(y=Fr(s,f,g)),y==="normal"&&f in $u&&(y=$u[f]),d===""||d?(m=parseFloat(y),d===!0||isFinite(m)?m||0:y):y}}),p.each(["height","width"],function(s,f){p.cssHooks[f]={get:function(d,g,y){if(g)return fp.test(p.css(d,"display"))&&(!d.getClientRects().length||!d.getBoundingClientRect().width)?He(d,hp,function(){return Vu(d,f,y)}):Vu(d,f,y)},set:function(d,g,y){var m,C=Oe(d),R=!E.scrollboxSize()&&C.position==="absolute",S=R||y,M=S&&p.css(d,"boxSizing",!1,C)==="border-box",W=y?Rs(d,f,y,M,C):0;return M&&R&&(W-=Math.ceil(d["offset"+f[0].toUpperCase()+f.slice(1)]-parseFloat(C[f])-Rs(d,f,"border",!1,C)-.5)),W&&(m=ht.exec(g))&&(m[3]||"px")!=="px"&&(d.style[f]=g,g=p.css(d,f)),zu(d,g,W)}}}),p.cssHooks.marginLeft=Zi(E.reliableMarginLeft,function(s,f){if(f)return(parseFloat(Fr(s,"marginLeft"))||s.getBoundingClientRect().left-He(s,{marginLeft:0},function(){return s.getBoundingClientRect().left}))+"px"}),p.each({margin:"",padding:"",border:"Width"},function(s,f){p.cssHooks[s+f]={expand:function(d){for(var g=0,y={},m=typeof d=="string"?d.split(" "):[d];g<4;g++)y[s+lt[g]+f]=m[g]||m[g-2]||m[0];return y}},s!=="margin"&&(p.cssHooks[s+f].set=zu)}),p.fn.extend({css:function(s,f){return ue(this,function(d,g,y){var m,C,R={},S=0;if(Array.isArray(g)){for(m=Oe(d),C=g.length;S<C;S++)R[g[S]]=p.css(d,g[S],!1,m);return R}return y!==void 0?p.style(d,g,y):p.css(d,g)},s,f,arguments.length>1)}});function Ve(s,f,d,g,y){return new Ve.prototype.init(s,f,d,g,y)}p.Tween=Ve,Ve.prototype={constructor:Ve,init:function(s,f,d,g,y,m){this.elem=s,this.prop=d,this.easing=y||p.easing._default,this.options=f,this.start=this.now=this.cur(),this.end=g,this.unit=m||(p.cssNumber[d]?"":"px")},cur:function(){var s=Ve.propHooks[this.prop];return s&&s.get?s.get(this):Ve.propHooks._default.get(this)},run:function(s){var f,d=Ve.propHooks[this.prop];return this.options.duration?this.pos=f=p.easing[this.easing](s,this.options.duration*s,0,1,this.options.duration):this.pos=f=s,this.now=(this.end-this.start)*f+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),d&&d.set?d.set(this):Ve.propHooks._default.set(this),this}},Ve.prototype.init.prototype=Ve.prototype,Ve.propHooks={_default:{get:function(s){var f;return s.elem.nodeType!==1||s.elem[s.prop]!=null&&s.elem.style[s.prop]==null?s.elem[s.prop]:(f=p.css(s.elem,s.prop,""),!f||f==="auto"?0:f)},set:function(s){p.fx.step[s.prop]?p.fx.step[s.prop](s):s.elem.nodeType===1&&(p.cssHooks[s.prop]||s.elem.style[Is(s.prop)]!=null)?p.style(s.elem,s.prop,s.now+s.unit):s.elem[s.prop]=s.now}}},Ve.propHooks.scrollTop=Ve.propHooks.scrollLeft={set:function(s){s.elem.nodeType&&s.elem.parentNode&&(s.elem[s.prop]=s.now)}},p.easing={linear:function(s){return s},swing:function(s){return .5-Math.cos(s*Math.PI)/2},_default:"swing"},p.fx=Ve.prototype.init,p.fx.step={};var pi,Qo,cp=/^(?:toggle|show|hide)$/,dp=/queueHooks$/;function Ss(){Qo&&(P.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(Ss):e.setTimeout(Ss,p.fx.interval),p.fx.tick())}function Ku(){return e.setTimeout(function(){pi=void 0}),pi=Date.now()}function ta(s,f){var d,g=0,y={height:s};for(f=f?1:0;g<4;g+=2-f)d=lt[g],y["margin"+d]=y["padding"+d]=s;return f&&(y.opacity=y.width=s),y}function qu(s,f,d){for(var g,y=(vn.tweeners[f]||[]).concat(vn.tweeners["*"]),m=0,C=y.length;m<C;m++)if(g=y[m].call(d,f,s))return g}function pp(s,f,d){var g,y,m,C,R,S,M,W,K="width"in f||"height"in f,j=this,U={},yt=s.style,bt=s.nodeType&&Nt(s),mt=G.get(s,"fxshow");d.queue||(C=p._queueHooks(s,"fx"),C.unqueued==null&&(C.unqueued=0,R=C.empty.fire,C.empty.fire=function(){C.unqueued||R()}),C.unqueued++,j.always(function(){j.always(function(){C.unqueued--,p.queue(s,"fx").length||C.empty.fire()})}));for(g in f)if(y=f[g],cp.test(y)){if(delete f[g],m=m||y==="toggle",y===(bt?"hide":"show"))if(y==="show"&&mt&&mt[g]!==void 0)bt=!0;else continue;U[g]=mt&&mt[g]||p.style(s,g)}if(S=!p.isEmptyObject(f),!(!S&&p.isEmptyObject(U))){K&&s.nodeType===1&&(d.overflow=[yt.overflow,yt.overflowX,yt.overflowY],M=mt&&mt.display,M==null&&(M=G.get(s,"display")),W=p.css(s,"display"),W==="none"&&(M?W=M:(ne([s],!0),M=s.style.display||M,W=p.css(s,"display"),ne([s]))),(W==="inline"||W==="inline-block"&&M!=null)&&p.css(s,"float")==="none"&&(S||(j.done(function(){yt.display=M}),M==null&&(W=yt.display,M=W==="none"?"":W)),yt.display="inline-block")),d.overflow&&(yt.overflow="hidden",j.always(function(){yt.overflow=d.overflow[0],yt.overflowX=d.overflow[1],yt.overflowY=d.overflow[2]})),S=!1;for(g in U)S||(mt?"hidden"in mt&&(bt=mt.hidden):mt=G.access(s,"fxshow",{display:M}),m&&(mt.hidden=!bt),bt&&ne([s],!0),j.done(function(){bt||ne([s]),G.remove(s,"fxshow");for(g in U)p.style(s,g,U[g])})),S=qu(bt?mt[g]:0,g,j),g in mt||(mt[g]=S.start,bt&&(S.end=S.start,S.start=0))}}function gp(s,f){var d,g,y,m,C;for(d in s)if(g=O(d),y=f[g],m=s[d],Array.isArray(m)&&(y=m[1],m=s[d]=m[0]),d!==g&&(s[g]=m,delete s[d]),C=p.cssHooks[g],C&&"expand"in C){m=C.expand(m),delete s[g];for(d in m)d in s||(s[d]=m[d],f[d]=y)}else f[g]=y}function vn(s,f,d){var g,y,m=0,C=vn.prefilters.length,R=p.Deferred().always(function(){delete S.elem}),S=function(){if(y)return!1;for(var K=pi||Ku(),j=Math.max(0,M.startTime+M.duration-K),U=j/M.duration||0,yt=1-U,bt=0,mt=M.tweens.length;bt<mt;bt++)M.tweens[bt].run(yt);return R.notifyWith(s,[M,yt,j]),yt<1&&mt?j:(mt||R.notifyWith(s,[M,1,0]),R.resolveWith(s,[M]),!1)},M=R.promise({elem:s,props:p.extend({},f),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},d),originalProperties:f,originalOptions:d,startTime:pi||Ku(),duration:d.duration,tweens:[],createTween:function(K,j){var U=p.Tween(s,M.opts,K,j,M.opts.specialEasing[K]||M.opts.easing);return M.tweens.push(U),U},stop:function(K){var j=0,U=K?M.tweens.length:0;if(y)return this;for(y=!0;j<U;j++)M.tweens[j].run(1);return K?(R.notifyWith(s,[M,1,0]),R.resolveWith(s,[M,K])):R.rejectWith(s,[M,K]),this}}),W=M.props;for(gp(W,M.opts.specialEasing);m<C;m++)if(g=vn.prefilters[m].call(M,s,W,M.opts),g)return w(g.stop)&&(p._queueHooks(M.elem,M.opts.queue).stop=g.stop.bind(g)),g;return p.map(W,qu,M),w(M.opts.start)&&M.opts.start.call(s,M),M.progress(M.opts.progress).done(M.opts.done,M.opts.complete).fail(M.opts.fail).always(M.opts.always),p.fx.timer(p.extend(S,{elem:s,anim:M,queue:M.opts.queue})),M}p.Animation=p.extend(vn,{tweeners:{"*":[function(s,f){var d=this.createTween(s,f);return kt(d.elem,s,ht.exec(f),d),d}]},tweener:function(s,f){w(s)?(f=s,s=["*"]):s=s.match(Dt);for(var d,g=0,y=s.length;g<y;g++)d=s[g],vn.tweeners[d]=vn.tweeners[d]||[],vn.tweeners[d].unshift(f)},prefilters:[pp],prefilter:function(s,f){f?vn.prefilters.unshift(s):vn.prefilters.push(s)}}),p.speed=function(s,f,d){var g=s&&typeof s=="object"?p.extend({},s):{complete:d||!d&&f||w(s)&&s,duration:s,easing:d&&f||f&&!w(f)&&f};return p.fx.off?g.duration=0:typeof g.duration!="number"&&(g.duration in p.fx.speeds?g.duration=p.fx.speeds[g.duration]:g.duration=p.fx.speeds._default),(g.queue==null||g.queue===!0)&&(g.queue="fx"),g.old=g.complete,g.complete=function(){w(g.old)&&g.old.call(this),g.queue&&p.dequeue(this,g.queue)},g},p.fn.extend({fadeTo:function(s,f,d,g){return this.filter(Nt).css("opacity",0).show().end().animate({opacity:f},s,d,g)},animate:function(s,f,d,g){var y=p.isEmptyObject(s),m=p.speed(f,d,g),C=function(){var R=vn(this,p.extend({},s),m);(y||G.get(this,"finish"))&&R.stop(!0)};return C.finish=C,y||m.queue===!1?this.each(C):this.queue(m.queue,C)},stop:function(s,f,d){var g=function(y){var m=y.stop;delete y.stop,m(d)};return typeof s!="string"&&(d=f,f=s,s=void 0),f&&this.queue(s||"fx",[]),this.each(function(){var y=!0,m=s!=null&&s+"queueHooks",C=p.timers,R=G.get(this);if(m)R[m]&&R[m].stop&&g(R[m]);else for(m in R)R[m]&&R[m].stop&&dp.test(m)&&g(R[m]);for(m=C.length;m--;)C[m].elem===this&&(s==null||C[m].queue===s)&&(C[m].anim.stop(d),y=!1,C.splice(m,1));(y||!d)&&p.dequeue(this,s)})},finish:function(s){return s!==!1&&(s=s||"fx"),this.each(function(){var f,d=G.get(this),g=d[s+"queue"],y=d[s+"queueHooks"],m=p.timers,C=g?g.length:0;for(d.finish=!0,p.queue(this,s,[]),y&&y.stop&&y.stop.call(this,!0),f=m.length;f--;)m[f].elem===this&&m[f].queue===s&&(m[f].anim.stop(!0),m.splice(f,1));for(f=0;f<C;f++)g[f]&&g[f].finish&&g[f].finish.call(this);delete d.finish})}}),p.each(["toggle","show","hide"],function(s,f){var d=p.fn[f];p.fn[f]=function(g,y,m){return g==null||typeof g=="boolean"?d.apply(this,arguments):this.animate(ta(f,!0),g,y,m)}}),p.each({slideDown:ta("show"),slideUp:ta("hide"),slideToggle:ta("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(s,f){p.fn[s]=function(d,g,y){return this.animate(f,d,g,y)}}),p.timers=[],p.fx.tick=function(){var s,f=0,d=p.timers;for(pi=Date.now();f<d.length;f++)s=d[f],!s()&&d[f]===s&&d.splice(f--,1);d.length||p.fx.stop(),pi=void 0},p.fx.timer=function(s){p.timers.push(s),p.fx.start()},p.fx.interval=13,p.fx.start=function(){Qo||(Qo=!0,Ss())},p.fx.stop=function(){Qo=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(s,f){return s=p.fx&&p.fx.speeds[s]||s,f=f||"fx",this.queue(f,function(d,g){var y=e.setTimeout(d,s);g.stop=function(){e.clearTimeout(y)}})},function(){var s=P.createElement("input"),f=P.createElement("select"),d=f.appendChild(P.createElement("option"));s.type="checkbox",E.checkOn=s.value!=="",E.optSelected=d.selected,s=P.createElement("input"),s.value="t",s.type="radio",E.radioValue=s.value==="t"}();var Zu,Ji=p.expr.attrHandle;p.fn.extend({attr:function(s,f){return ue(this,p.attr,s,f,arguments.length>1)},removeAttr:function(s){return this.each(function(){p.removeAttr(this,s)})}}),p.extend({attr:function(s,f,d){var g,y,m=s.nodeType;if(!(m===3||m===8||m===2)){if(typeof s.getAttribute=="undefined")return p.prop(s,f,d);if((m!==1||!p.isXMLDoc(s))&&(y=p.attrHooks[f.toLowerCase()]||(p.expr.match.bool.test(f)?Zu:void 0)),d!==void 0){if(d===null){p.removeAttr(s,f);return}return y&&"set"in y&&(g=y.set(s,d,f))!==void 0?g:(s.setAttribute(f,d+""),d)}return y&&"get"in y&&(g=y.get(s,f))!==null?g:(g=p.find.attr(s,f),g==null?void 0:g)}},attrHooks:{type:{set:function(s,f){if(!E.radioValue&&f==="radio"&&at(s,"input")){var d=s.value;return s.setAttribute("type",f),d&&(s.value=d),f}}}},removeAttr:function(s,f){var d,g=0,y=f&&f.match(Dt);if(y&&s.nodeType===1)for(;d=y[g++];)s.removeAttribute(d)}}),Zu={set:function(s,f,d){return f===!1?p.removeAttr(s,d):s.setAttribute(d,d),d}},p.each(p.expr.match.bool.source.match(/\w+/g),function(s,f){var d=Ji[f]||p.find.attr;Ji[f]=function(g,y,m){var C,R,S=y.toLowerCase();return m||(R=Ji[S],Ji[S]=C,C=d(g,y,m)!=null?S:null,Ji[S]=R),C}});var vp=/^(?:input|select|textarea|button)$/i,_p=/^(?:a|area)$/i;p.fn.extend({prop:function(s,f){return ue(this,p.prop,s,f,arguments.length>1)},removeProp:function(s){return this.each(function(){delete this[p.propFix[s]||s]})}}),p.extend({prop:function(s,f,d){var g,y,m=s.nodeType;if(!(m===3||m===8||m===2))return(m!==1||!p.isXMLDoc(s))&&(f=p.propFix[f]||f,y=p.propHooks[f]),d!==void 0?y&&"set"in y&&(g=y.set(s,d,f))!==void 0?g:s[f]=d:y&&"get"in y&&(g=y.get(s,f))!==null?g:s[f]},propHooks:{tabIndex:{get:function(s){var f=p.find.attr(s,"tabindex");return f?parseInt(f,10):vp.test(s.nodeName)||_p.test(s.nodeName)&&s.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),E.optSelected||(p.propHooks.selected={get:function(s){var f=s.parentNode;return f&&f.parentNode&&f.parentNode.selectedIndex,null},set:function(s){var f=s.parentNode;f&&(f.selectedIndex,f.parentNode&&f.parentNode.selectedIndex)}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this});function kr(s){var f=s.match(Dt)||[];return f.join(" ")}function Gr(s){return s.getAttribute&&s.getAttribute("class")||""}function Ps(s){return Array.isArray(s)?s:typeof s=="string"?s.match(Dt)||[]:[]}p.fn.extend({addClass:function(s){var f,d,g,y,m,C,R,S=0;if(w(s))return this.each(function(M){p(this).addClass(s.call(this,M,Gr(this)))});if(f=Ps(s),f.length){for(;d=this[S++];)if(y=Gr(d),g=d.nodeType===1&&" "+kr(y)+" ",g){for(C=0;m=f[C++];)g.indexOf(" "+m+" ")<0&&(g+=m+" ");R=kr(g),y!==R&&d.setAttribute("class",R)}}return this},removeClass:function(s){var f,d,g,y,m,C,R,S=0;if(w(s))return this.each(function(M){p(this).removeClass(s.call(this,M,Gr(this)))});if(!arguments.length)return this.attr("class","");if(f=Ps(s),f.length){for(;d=this[S++];)if(y=Gr(d),g=d.nodeType===1&&" "+kr(y)+" ",g){for(C=0;m=f[C++];)for(;g.indexOf(" "+m+" ")>-1;)g=g.replace(" "+m+" "," ");R=kr(g),y!==R&&d.setAttribute("class",R)}}return this},toggleClass:function(s,f){var d=typeof s,g=d==="string"||Array.isArray(s);return typeof f=="boolean"&&g?f?this.addClass(s):this.removeClass(s):w(s)?this.each(function(y){p(this).toggleClass(s.call(this,y,Gr(this),f),f)}):this.each(function(){var y,m,C,R;if(g)for(m=0,C=p(this),R=Ps(s);y=R[m++];)C.hasClass(y)?C.removeClass(y):C.addClass(y);else(s===void 0||d==="boolean")&&(y=Gr(this),y&&G.set(this,"__className__",y),this.setAttribute&&this.setAttribute("class",y||s===!1?"":G.get(this,"__className__")||""))})},hasClass:function(s){var f,d,g=0;for(f=" "+s+" ";d=this[g++];)if(d.nodeType===1&&(" "+kr(Gr(d))+" ").indexOf(f)>-1)return!0;return!1}});var yp=/\r/g;p.fn.extend({val:function(s){var f,d,g,y=this[0];return arguments.length?(g=w(s),this.each(function(m){var C;this.nodeType===1&&(g?C=s.call(this,m,p(this).val()):C=s,C==null?C="":typeof C=="number"?C+="":Array.isArray(C)&&(C=p.map(C,function(R){return R==null?"":R+""})),f=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],(!f||!("set"in f)||f.set(this,C,"value")===void 0)&&(this.value=C))})):y?(f=p.valHooks[y.type]||p.valHooks[y.nodeName.toLowerCase()],f&&"get"in f&&(d=f.get(y,"value"))!==void 0?d:(d=y.value,typeof d=="string"?d.replace(yp,""):d==null?"":d)):void 0}}),p.extend({valHooks:{option:{get:function(s){var f=p.find.attr(s,"value");return f!=null?f:kr(p.text(s))}},select:{get:function(s){var f,d,g,y=s.options,m=s.selectedIndex,C=s.type==="select-one",R=C?null:[],S=C?m+1:y.length;for(m<0?g=S:g=C?m:0;g<S;g++)if(d=y[g],(d.selected||g===m)&&!d.disabled&&(!d.parentNode.disabled||!at(d.parentNode,"optgroup"))){if(f=p(d).val(),C)return f;R.push(f)}return R},set:function(s,f){for(var d,g,y=s.options,m=p.makeArray(f),C=y.length;C--;)g=y[C],(g.selected=p.inArray(p.valHooks.option.get(g),m)>-1)&&(d=!0);return d||(s.selectedIndex=-1),m}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(s,f){if(Array.isArray(f))return s.checked=p.inArray(p(s).val(),f)>-1}},E.checkOn||(p.valHooks[this].get=function(s){return s.getAttribute("value")===null?"on":s.value})}),E.focusin="onfocusin"in e;var Ju=/^(?:focusinfocus|focusoutblur)$/,Qu=function(s){s.stopPropagation()};p.extend(p.event,{trigger:function(s,f,d,g){var y,m,C,R,S,M,W,K,j=[d||P],U=_.call(s,"type")?s.type:s,yt=_.call(s,"namespace")?s.namespace.split("."):[];if(m=K=C=d=d||P,!(d.nodeType===3||d.nodeType===8)&&!Ju.test(U+p.event.triggered)&&(U.indexOf(".")>-1&&(yt=U.split("."),U=yt.shift(),yt.sort()),S=U.indexOf(":")<0&&"on"+U,s=s[p.expando]?s:new p.Event(U,typeof s=="object"&&s),s.isTrigger=g?2:3,s.namespace=yt.join("."),s.rnamespace=s.namespace?new RegExp("(^|\\.)"+yt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,s.result=void 0,s.target||(s.target=d),f=f==null?[s]:p.makeArray(f,[s]),W=p.event.special[U]||{},!(!g&&W.trigger&&W.trigger.apply(d,f)===!1))){if(!g&&!W.noBubble&&!L(d)){for(R=W.delegateType||U,Ju.test(R+U)||(m=m.parentNode);m;m=m.parentNode)j.push(m),C=m;C===(d.ownerDocument||P)&&j.push(C.defaultView||C.parentWindow||e)}for(y=0;(m=j[y++])&&!s.isPropagationStopped();)K=m,s.type=y>1?R:W.bindType||U,M=(G.get(m,"events")||Object.create(null))[s.type]&&G.get(m,"handle"),M&&M.apply(m,f),M=S&&m[S],M&&M.apply&&b(m)&&(s.result=M.apply(m,f),s.result===!1&&s.preventDefault());return s.type=U,!g&&!s.isDefaultPrevented()&&(!W._default||W._default.apply(j.pop(),f)===!1)&&b(d)&&S&&w(d[U])&&!L(d)&&(C=d[S],C&&(d[S]=null),p.event.triggered=U,s.isPropagationStopped()&&K.addEventListener(U,Qu),d[U](),s.isPropagationStopped()&&K.removeEventListener(U,Qu),p.event.triggered=void 0,C&&(d[S]=C)),s.result}},simulate:function(s,f,d){var g=p.extend(new p.Event,d,{type:s,isSimulated:!0});p.event.trigger(g,null,f)}}),p.fn.extend({trigger:function(s,f){return this.each(function(){p.event.trigger(s,f,this)})},triggerHandler:function(s,f){var d=this[0];if(d)return p.event.trigger(s,f,d,!0)}}),E.focusin||p.each({focus:"focusin",blur:"focusout"},function(s,f){var d=function(g){p.event.simulate(f,g.target,p.event.fix(g))};p.event.special[f]={setup:function(){var g=this.ownerDocument||this.document||this,y=G.access(g,f);y||g.addEventListener(s,d,!0),G.access(g,f,(y||0)+1)},teardown:function(){var g=this.ownerDocument||this.document||this,y=G.access(g,f)-1;y?G.access(g,f,y):(g.removeEventListener(s,d,!0),G.remove(g,f))}}});var Qi=e.location,tf={guid:Date.now()},Ls=/\?/;p.parseXML=function(s){var f,d;if(!s||typeof s!="string")return null;try{f=new e.DOMParser().parseFromString(s,"text/xml")}catch{}return d=f&&f.getElementsByTagName("parsererror")[0],(!f||d)&&p.error("Invalid XML: "+(d?p.map(d.childNodes,function(g){return g.textContent}).join(`
`):s)),f};var mp=/\[\]$/,ef=/\r?\n/g,Tp=/^(?:submit|button|image|reset|file)$/i,Ep=/^(?:input|select|textarea|keygen)/i;function As(s,f,d,g){var y;if(Array.isArray(f))p.each(f,function(m,C){d||mp.test(s)?g(s,C):As(s+"["+(typeof C=="object"&&C!=null?m:"")+"]",C,d,g)});else if(!d&&k(f)==="object")for(y in f)As(s+"["+y+"]",f[y],d,g);else g(s,f)}p.param=function(s,f){var d,g=[],y=function(m,C){var R=w(C)?C():C;g[g.length]=encodeURIComponent(m)+"="+encodeURIComponent(R==null?"":R)};if(s==null)return"";if(Array.isArray(s)||s.jquery&&!p.isPlainObject(s))p.each(s,function(){y(this.name,this.value)});else for(d in s)As(d,s[d],f,y);return g.join("&")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var s=p.prop(this,"elements");return s?p.makeArray(s):this}).filter(function(){var s=this.type;return this.name&&!p(this).is(":disabled")&&Ep.test(this.nodeName)&&!Tp.test(s)&&(this.checked||!Qe.test(s))}).map(function(s,f){var d=p(this).val();return d==null?null:Array.isArray(d)?p.map(d,function(g){return{name:f.name,value:g.replace(ef,`\r
`)}}):{name:f.name,value:d.replace(ef,`\r
`)}}).get()}});var Cp=/%20/g,xp=/#.*$/,wp=/([?&])_=[^&]*/,Op=/^(.*?):[ \t]*([^\r\n]*)$/mg,Ip=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Rp=/^(?:GET|HEAD)$/,Sp=/^\/\//,nf={},bs={},rf="*/".concat("*"),Ms=P.createElement("a");Ms.href=Qi.href;function of(s){return function(f,d){typeof f!="string"&&(d=f,f="*");var g,y=0,m=f.toLowerCase().match(Dt)||[];if(w(d))for(;g=m[y++];)g[0]==="+"?(g=g.slice(1)||"*",(s[g]=s[g]||[]).unshift(d)):(s[g]=s[g]||[]).push(d)}}function af(s,f,d,g){var y={},m=s===bs;function C(R){var S;return y[R]=!0,p.each(s[R]||[],function(M,W){var K=W(f,d,g);if(typeof K=="string"&&!m&&!y[K])return f.dataTypes.unshift(K),C(K),!1;if(m)return!(S=K)}),S}return C(f.dataTypes[0])||!y["*"]&&C("*")}function Ds(s,f){var d,g,y=p.ajaxSettings.flatOptions||{};for(d in f)f[d]!==void 0&&((y[d]?s:g||(g={}))[d]=f[d]);return g&&p.extend(!0,s,g),s}function Pp(s,f,d){for(var g,y,m,C,R=s.contents,S=s.dataTypes;S[0]==="*";)S.shift(),g===void 0&&(g=s.mimeType||f.getResponseHeader("Content-Type"));if(g){for(y in R)if(R[y]&&R[y].test(g)){S.unshift(y);break}}if(S[0]in d)m=S[0];else{for(y in d){if(!S[0]||s.converters[y+" "+S[0]]){m=y;break}C||(C=y)}m=m||C}if(m)return m!==S[0]&&S.unshift(m),d[m]}function Lp(s,f,d,g){var y,m,C,R,S,M={},W=s.dataTypes.slice();if(W[1])for(C in s.converters)M[C.toLowerCase()]=s.converters[C];for(m=W.shift();m;)if(s.responseFields[m]&&(d[s.responseFields[m]]=f),!S&&g&&s.dataFilter&&(f=s.dataFilter(f,s.dataType)),S=m,m=W.shift(),m){if(m==="*")m=S;else if(S!=="*"&&S!==m){if(C=M[S+" "+m]||M["* "+m],!C){for(y in M)if(R=y.split(" "),R[1]===m&&(C=M[S+" "+R[0]]||M["* "+R[0]],C)){C===!0?C=M[y]:M[y]!==!0&&(m=R[0],W.unshift(R[1]));break}}if(C!==!0)if(C&&s.throws)f=C(f);else try{f=C(f)}catch(K){return{state:"parsererror",error:C?K:"No conversion from "+S+" to "+m}}}}return{state:"success",data:f}}p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Qi.href,type:"GET",isLocal:Ip.test(Qi.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":rf,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(s,f){return f?Ds(Ds(s,p.ajaxSettings),f):Ds(p.ajaxSettings,s)},ajaxPrefilter:of(nf),ajaxTransport:of(bs),ajax:function(s,f){typeof s=="object"&&(f=s,s=void 0),f=f||{};var d,g,y,m,C,R,S,M,W,K,j=p.ajaxSetup({},f),U=j.context||j,yt=j.context&&(U.nodeType||U.jquery)?p(U):p.event,bt=p.Deferred(),mt=p.Callbacks("once memory"),Ie=j.statusCode||{},Te={},tn={},ie="canceled",At={readyState:0,getResponseHeader:function(Vt){var ve;if(S){if(!m)for(m={};ve=Op.exec(y);)m[ve[1].toLowerCase()+" "]=(m[ve[1].toLowerCase()+" "]||[]).concat(ve[2]);ve=m[Vt.toLowerCase()+" "]}return ve==null?null:ve.join(", ")},getAllResponseHeaders:function(){return S?y:null},setRequestHeader:function(Vt,ve){return S==null&&(Vt=tn[Vt.toLowerCase()]=tn[Vt.toLowerCase()]||Vt,Te[Vt]=ve),this},overrideMimeType:function(Vt){return S==null&&(j.mimeType=Vt),this},statusCode:function(Vt){var ve;if(Vt)if(S)At.always(Vt[At.status]);else for(ve in Vt)Ie[ve]=[Ie[ve],Vt[ve]];return this},abort:function(Vt){var ve=Vt||ie;return d&&d.abort(ve),Ke(0,ve),this}};if(bt.promise(At),j.url=((s||j.url||Qi.href)+"").replace(Sp,Qi.protocol+"//"),j.type=f.method||f.type||j.method||j.type,j.dataTypes=(j.dataType||"*").toLowerCase().match(Dt)||[""],j.crossDomain==null){R=P.createElement("a");try{R.href=j.url,R.href=R.href,j.crossDomain=Ms.protocol+"//"+Ms.host!=R.protocol+"//"+R.host}catch{j.crossDomain=!0}}if(j.data&&j.processData&&typeof j.data!="string"&&(j.data=p.param(j.data,j.traditional)),af(nf,j,f,At),S)return At;M=p.event&&j.global,M&&p.active++===0&&p.event.trigger("ajaxStart"),j.type=j.type.toUpperCase(),j.hasContent=!Rp.test(j.type),g=j.url.replace(xp,""),j.hasContent?j.data&&j.processData&&(j.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(j.data=j.data.replace(Cp,"+")):(K=j.url.slice(g.length),j.data&&(j.processData||typeof j.data=="string")&&(g+=(Ls.test(g)?"&":"?")+j.data,delete j.data),j.cache===!1&&(g=g.replace(wp,"$1"),K=(Ls.test(g)?"&":"?")+"_="+tf.guid+++K),j.url=g+K),j.ifModified&&(p.lastModified[g]&&At.setRequestHeader("If-Modified-Since",p.lastModified[g]),p.etag[g]&&At.setRequestHeader("If-None-Match",p.etag[g])),(j.data&&j.hasContent&&j.contentType!==!1||f.contentType)&&At.setRequestHeader("Content-Type",j.contentType),At.setRequestHeader("Accept",j.dataTypes[0]&&j.accepts[j.dataTypes[0]]?j.accepts[j.dataTypes[0]]+(j.dataTypes[0]!=="*"?", "+rf+"; q=0.01":""):j.accepts["*"]);for(W in j.headers)At.setRequestHeader(W,j.headers[W]);if(j.beforeSend&&(j.beforeSend.call(U,At,j)===!1||S))return At.abort();if(ie="abort",mt.add(j.complete),At.done(j.success),At.fail(j.error),d=af(bs,j,f,At),!d)Ke(-1,"No Transport");else{if(At.readyState=1,M&&yt.trigger("ajaxSend",[At,j]),S)return At;j.async&&j.timeout>0&&(C=e.setTimeout(function(){At.abort("timeout")},j.timeout));try{S=!1,d.send(Te,Ke)}catch(Vt){if(S)throw Vt;Ke(-1,Vt)}}function Ke(Vt,ve,eo,ea){var en,jr,Wr,qe,lr,ln=ve;S||(S=!0,C&&e.clearTimeout(C),d=void 0,y=ea||"",At.readyState=Vt>0?4:0,en=Vt>=200&&Vt<300||Vt===304,eo&&(qe=Pp(j,At,eo)),!en&&p.inArray("script",j.dataTypes)>-1&&p.inArray("json",j.dataTypes)<0&&(j.converters["text script"]=function(){}),qe=Lp(j,qe,At,en),en?(j.ifModified&&(lr=At.getResponseHeader("Last-Modified"),lr&&(p.lastModified[g]=lr),lr=At.getResponseHeader("etag"),lr&&(p.etag[g]=lr)),Vt===204||j.type==="HEAD"?ln="nocontent":Vt===304?ln="notmodified":(ln=qe.state,jr=qe.data,Wr=qe.error,en=!Wr)):(Wr=ln,(Vt||!ln)&&(ln="error",Vt<0&&(Vt=0))),At.status=Vt,At.statusText=(ve||ln)+"",en?bt.resolveWith(U,[jr,ln,At]):bt.rejectWith(U,[At,ln,Wr]),At.statusCode(Ie),Ie=void 0,M&&yt.trigger(en?"ajaxSuccess":"ajaxError",[At,j,en?jr:Wr]),mt.fireWith(U,[At,ln]),M&&(yt.trigger("ajaxComplete",[At,j]),--p.active||p.event.trigger("ajaxStop")))}return At},getJSON:function(s,f,d){return p.get(s,f,d,"json")},getScript:function(s,f){return p.get(s,void 0,f,"script")}}),p.each(["get","post"],function(s,f){p[f]=function(d,g,y,m){return w(g)&&(m=m||y,y=g,g=void 0),p.ajax(p.extend({url:d,type:f,dataType:m,data:g,success:y},p.isPlainObject(d)&&d))}}),p.ajaxPrefilter(function(s){var f;for(f in s.headers)f.toLowerCase()==="content-type"&&(s.contentType=s.headers[f]||"")}),p._evalUrl=function(s,f,d){return p.ajax({url:s,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(g){p.globalEval(g,f,d)}})},p.fn.extend({wrapAll:function(s){var f;return this[0]&&(w(s)&&(s=s.call(this[0])),f=p(s,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&f.insertBefore(this[0]),f.map(function(){for(var d=this;d.firstElementChild;)d=d.firstElementChild;return d}).append(this)),this},wrapInner:function(s){return w(s)?this.each(function(f){p(this).wrapInner(s.call(this,f))}):this.each(function(){var f=p(this),d=f.contents();d.length?d.wrapAll(s):f.append(s)})},wrap:function(s){var f=w(s);return this.each(function(d){p(this).wrapAll(f?s.call(this,d):s)})},unwrap:function(s){return this.parent(s).not("body").each(function(){p(this).replaceWith(this.childNodes)}),this}}),p.expr.pseudos.hidden=function(s){return!p.expr.pseudos.visible(s)},p.expr.pseudos.visible=function(s){return!!(s.offsetWidth||s.offsetHeight||s.getClientRects().length)},p.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var Ap={0:200,1223:204},to=p.ajaxSettings.xhr();E.cors=!!to&&"withCredentials"in to,E.ajax=to=!!to,p.ajaxTransport(function(s){var f,d;if(E.cors||to&&!s.crossDomain)return{send:function(g,y){var m,C=s.xhr();if(C.open(s.type,s.url,s.async,s.username,s.password),s.xhrFields)for(m in s.xhrFields)C[m]=s.xhrFields[m];s.mimeType&&C.overrideMimeType&&C.overrideMimeType(s.mimeType),!s.crossDomain&&!g["X-Requested-With"]&&(g["X-Requested-With"]="XMLHttpRequest");for(m in g)C.setRequestHeader(m,g[m]);f=function(R){return function(){f&&(f=d=C.onload=C.onerror=C.onabort=C.ontimeout=C.onreadystatechange=null,R==="abort"?C.abort():R==="error"?typeof C.status!="number"?y(0,"error"):y(C.status,C.statusText):y(Ap[C.status]||C.status,C.statusText,(C.responseType||"text")!=="text"||typeof C.responseText!="string"?{binary:C.response}:{text:C.responseText},C.getAllResponseHeaders()))}},C.onload=f(),d=C.onerror=C.ontimeout=f("error"),C.onabort!==void 0?C.onabort=d:C.onreadystatechange=function(){C.readyState===4&&e.setTimeout(function(){f&&d()})},f=f("abort");try{C.send(s.hasContent&&s.data||null)}catch(R){if(f)throw R}},abort:function(){f&&f()}}}),p.ajaxPrefilter(function(s){s.crossDomain&&(s.contents.script=!1)}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(s){return p.globalEval(s),s}}}),p.ajaxPrefilter("script",function(s){s.cache===void 0&&(s.cache=!1),s.crossDomain&&(s.type="GET")}),p.ajaxTransport("script",function(s){if(s.crossDomain||s.scriptAttrs){var f,d;return{send:function(g,y){f=p("<script>").attr(s.scriptAttrs||{}).prop({charset:s.scriptCharset,src:s.url}).on("load error",d=function(m){f.remove(),d=null,m&&y(m.type==="error"?404:200,m.type)}),P.head.appendChild(f[0])},abort:function(){d&&d()}}}});var sf=[],Ns=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var s=sf.pop()||p.expando+"_"+tf.guid++;return this[s]=!0,s}}),p.ajaxPrefilter("json jsonp",function(s,f,d){var g,y,m,C=s.jsonp!==!1&&(Ns.test(s.url)?"url":typeof s.data=="string"&&(s.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Ns.test(s.data)&&"data");if(C||s.dataTypes[0]==="jsonp")return g=s.jsonpCallback=w(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,C?s[C]=s[C].replace(Ns,"$1"+g):s.jsonp!==!1&&(s.url+=(Ls.test(s.url)?"&":"?")+s.jsonp+"="+g),s.converters["script json"]=function(){return m||p.error(g+" was not called"),m[0]},s.dataTypes[0]="json",y=e[g],e[g]=function(){m=arguments},d.always(function(){y===void 0?p(e).removeProp(g):e[g]=y,s[g]&&(s.jsonpCallback=f.jsonpCallback,sf.push(g)),m&&w(y)&&y(m[0]),m=y=void 0}),"script"}),E.createHTMLDocument=function(){var s=P.implementation.createHTMLDocument("").body;return s.innerHTML="<form></form><form></form>",s.childNodes.length===2}(),p.parseHTML=function(s,f,d){if(typeof s!="string")return[];typeof f=="boolean"&&(d=f,f=!1);var g,y,m;return f||(E.createHTMLDocument?(f=P.implementation.createHTMLDocument(""),g=f.createElement("base"),g.href=P.location.href,f.head.appendChild(g)):f=P),y=_t.exec(s),m=!d&&[],y?[f.createElement(y[1])]:(y=Ko([s],f,m),m&&m.length&&p(m).remove(),p.merge([],y.childNodes))},p.fn.load=function(s,f,d){var g,y,m,C=this,R=s.indexOf(" ");return R>-1&&(g=kr(s.slice(R)),s=s.slice(0,R)),w(f)?(d=f,f=void 0):f&&typeof f=="object"&&(y="POST"),C.length>0&&p.ajax({url:s,type:y||"GET",dataType:"html",data:f}).done(function(S){m=arguments,C.html(g?p("<div>").append(p.parseHTML(S)).find(g):S)}).always(d&&function(S,M){C.each(function(){d.apply(this,m||[S.responseText,M,S])})}),this},p.expr.pseudos.animated=function(s){return p.grep(p.timers,function(f){return s===f.elem}).length},p.offset={setOffset:function(s,f,d){var g,y,m,C,R,S,M,W=p.css(s,"position"),K=p(s),j={};W==="static"&&(s.style.position="relative"),R=K.offset(),m=p.css(s,"top"),S=p.css(s,"left"),M=(W==="absolute"||W==="fixed")&&(m+S).indexOf("auto")>-1,M?(g=K.position(),C=g.top,y=g.left):(C=parseFloat(m)||0,y=parseFloat(S)||0),w(f)&&(f=f.call(s,d,p.extend({},R))),f.top!=null&&(j.top=f.top-R.top+C),f.left!=null&&(j.left=f.left-R.left+y),"using"in f?f.using.call(s,j):K.css(j)}},p.fn.extend({offset:function(s){if(arguments.length)return s===void 0?this:this.each(function(y){p.offset.setOffset(this,s,y)});var f,d,g=this[0];if(!!g)return g.getClientRects().length?(f=g.getBoundingClientRect(),d=g.ownerDocument.defaultView,{top:f.top+d.pageYOffset,left:f.left+d.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var s,f,d,g=this[0],y={top:0,left:0};if(p.css(g,"position")==="fixed")f=g.getBoundingClientRect();else{for(f=this.offset(),d=g.ownerDocument,s=g.offsetParent||d.documentElement;s&&(s===d.body||s===d.documentElement)&&p.css(s,"position")==="static";)s=s.parentNode;s&&s!==g&&s.nodeType===1&&(y=p(s).offset(),y.top+=p.css(s,"borderTopWidth",!0),y.left+=p.css(s,"borderLeftWidth",!0))}return{top:f.top-y.top-p.css(g,"marginTop",!0),left:f.left-y.left-p.css(g,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var s=this.offsetParent;s&&p.css(s,"position")==="static";)s=s.offsetParent;return s||pt})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(s,f){var d=f==="pageYOffset";p.fn[s]=function(g){return ue(this,function(y,m,C){var R;if(L(y)?R=y:y.nodeType===9&&(R=y.defaultView),C===void 0)return R?R[f]:y[m];R?R.scrollTo(d?R.pageXOffset:C,d?C:R.pageYOffset):y[m]=C},s,g,arguments.length)}}),p.each(["top","left"],function(s,f){p.cssHooks[f]=Zi(E.pixelPosition,function(d,g){if(g)return g=Fr(d,f),sr.test(g)?p(d).position()[f]+"px":g})}),p.each({Height:"height",Width:"width"},function(s,f){p.each({padding:"inner"+s,content:f,"":"outer"+s},function(d,g){p.fn[g]=function(y,m){var C=arguments.length&&(d||typeof y!="boolean"),R=d||(y===!0||m===!0?"margin":"border");return ue(this,function(S,M,W){var K;return L(S)?g.indexOf("outer")===0?S["inner"+s]:S.document.documentElement["client"+s]:S.nodeType===9?(K=S.documentElement,Math.max(S.body["scroll"+s],K["scroll"+s],S.body["offset"+s],K["offset"+s],K["client"+s])):W===void 0?p.css(S,M,R):p.style(S,M,W,R)},f,C?y:void 0,C)}})}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(s,f){p.fn[f]=function(d){return this.on(f,d)}}),p.fn.extend({bind:function(s,f,d){return this.on(s,null,f,d)},unbind:function(s,f){return this.off(s,null,f)},delegate:function(s,f,d,g){return this.on(f,s,d,g)},undelegate:function(s,f,d){return arguments.length===1?this.off(s,"**"):this.off(f,s||"**",d)},hover:function(s,f){return this.mouseenter(s).mouseleave(f||s)}}),p.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(s,f){p.fn[f]=function(d,g){return arguments.length>0?this.on(f,null,d,g):this.trigger(f)}});var bp=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;p.proxy=function(s,f){var d,g,y;if(typeof f=="string"&&(d=s[f],f=s,s=d),!!w(s))return g=o.call(arguments,2),y=function(){return s.apply(f||this,g.concat(o.call(arguments)))},y.guid=s.guid=s.guid||p.guid++,y},p.holdReady=function(s){s?p.readyWait++:p.ready(!0)},p.isArray=Array.isArray,p.parseJSON=JSON.parse,p.nodeName=at,p.isFunction=w,p.isWindow=L,p.camelCase=O,p.type=k,p.now=Date.now,p.isNumeric=function(s){var f=p.type(s);return(f==="number"||f==="string")&&!isNaN(s-parseFloat(s))},p.trim=function(s){return s==null?"":(s+"").replace(bp,"")};var Mp=e.jQuery,Dp=e.$;return p.noConflict=function(s){return e.$===p&&(e.$=Dp),s&&e.jQuery===p&&(e.jQuery=Mp),p},typeof t=="undefined"&&(e.jQuery=e.$=p),p})})(lp);var zx=lp.exports;window.jQuery=window.$=zx;const Vx={name:"WpsControl",data(){return{processes:[],current_process:void 0,process_data:{abstract:null,inputs:[],outputs:[]}}},async created(){this.wpsService=new WpsService({url:"/src/fakedata/wps/getcapabilities.xml",version:"1.0.0"}),this.wpsService.getCapabilities_GET(r=>{try{const e=r.capabilities&&r.capabilities.processes||[];this.processes=[e[0],e[1],e[3]]}catch(e){console.log(e)}})},methods:{createProcessInputType(r){const e={type:null,dataType:null,value:null,options:{}};return r.complexData?(e.type="file",e.options.mimetype=r.complexData.formats[0].mimeType):r.literalData?(e.type=r.literalData.literalDataDomains[0].dataType.type,e.dataType=e.type,e.options=null):r.boundingBoxData&&(e.value={llx:null,lly:null,upx:null,upy:null},e.type="bbox",e.epsg=r.boundingBoxData.supportedCRSs[0],e.options.epsg=r.boundingBoxData.supportedCRSs),e},buildFormFromDescribeProcessResponse({abstractValue:r,inputs:e,outputs:t}={}){return e=e.map(n=>{const i=this.createProcessInputType(n);return Hs({id:n.identifier,label:n.title},i)}),t=t.map(n=>({id:n.identifier,label:n.title,sublabel:n.abstractValue||"",value:"",execute:n})),{abstract:r,inputs:e,outputs:t}}},watch:{current_process(r){if(r){const e=`/src/fakedata/wps/${r}.xml`;this.wpsService.setUrl(e),this.wpsService.describeProcess_GET(t=>{const n=t.processOffering&&t.processOffering.process,{abstract:i,inputs:o,outputs:a}=this.buildFormFromDescribeProcessResponse(n);this.process_data.abstract=i,this.process_data.inputs=o,this.process_data.outputs=a,console.log(a)},r)}}}},$i=r=>(nv("data-v-52d28126"),r=r(),rv(),r),Kx=$i(()=>te("label",{for:"wpsprocess"},[te("b",null,"Seleziona un processo")],-1)),qx=$i(()=>te("option",{disabled:"",value:""},"Seleziona un processo",-1)),Zx=["value"],Jx={key:0},Qx={class:"process_abstract"},tw=$i(()=>te("h3",null,"Abstract",-1)),ew={class:"process_inputs"},nw=$i(()=>te("h2",null,"Inputs",-1)),rw=["for"],iw=["id","type","value"],ow={class:"process_outputs"},aw=$i(()=>te("h2",null,"Outputs",-1)),sw=["for"],lw=["id","type"],uw=$i(()=>te("section",null,[te("button",null,"Run")],-1));function fw(r,e,t,n,i,o){return De(),Ge("section",null,[Kx,lu(te("select",{id:"wpsprocess","onUpdate:modelValue":e[0]||(e[0]=a=>i.current_process=a)},[qx,(De(!0),Ge(Ne,null,mo(i.processes,a=>(De(),Ge("option",{key:a.title,value:a.title},Oi(a.title),9,Zx))),128))],512),[[cu,i.current_process]]),i.current_process?(De(),Ge("section",Jx,[te("section",Qx,[tw,te("span",null,Oi(i.process_data.abstract),1)]),te("section",ew,[nw,(De(!0),Ge(Ne,null,mo(i.process_data.inputs,a=>(De(),Ge(Ne,null,[te("label",{for:a.id},Oi(a.label),9,rw),te("input",{id:a.id,type:a.type,value:a.value},null,8,iw)],64))),256))]),te("div",ow,[aw,(De(!0),Ge(Ne,null,mo(i.process_data.outputs,a=>(De(),Ge(Ne,null,[te("label",{for:a.id},Oi(a.label),9,sw),te("input",{id:a.id,type:a.type},null,8,lw)],64))),256))]),uw])):Zv("",!0)])}var hw=Vo(Vx,[["render",fw],["__scopeId","data-v-52d28126"]]);const cw={name:"DrawingControl",props:{allowedFeatures:Array,layerGroup:Wn,interactions:ze},data:()=>({selected:"",hasActiveLayers:!1}),mounted(){this.vector=new Xd({source:new Vd({wrapX:!1})}),this.layerGroup.getLayers().push(this.vector)},watch:{selected(r){this.toggleInteraction(r)}},methods:{toggleInteraction(r){this.interactions.remove(this.draw),r&&r!=="None"&&(this.draw=new bC({source:this.vector.getSource(),type:r}),this.draw.once("drawstart",()=>this.hasActiveLayers=!0),this.draw.once("drawend",()=>this.hasActiveLayers=!0),this.interactions.extend([this.draw]),this.toggleMapCursor(!0))},toggleMapCursor(r){this.draw&&this.draw.getMap()&&(this.draw.getMap().getViewport().style.cursor=r?"default":"")},clear(){this.toggleMapCursor(!1),this.selected="",this.hasActiveLayers=!1,this.vector.getSource().clear()}}},dw=te("label",{for:"drawfeature"},[te("b",null,"Draw geometry")],-1),pw=te("option",{disabled:"",value:""},"Please select one",-1),gw=["value"],vw=["disabled"];function _w(r,e,t,n,i,o){return De(),Ge("section",null,[dw,lu(te("select",{name:"drawfeature","onUpdate:modelValue":e[0]||(e[0]=a=>r.selected=a)},[pw,(De(!0),Ge(Ne,null,mo(t.allowedFeatures,(a,l)=>(De(),Ge("option",{key:l,value:a},Oi(a),9,gw))),128))],512),[[cu,r.selected]]),te("button",{disabled:!r.hasActiveLayers,type:"button",onClick:e[1]||(e[1]=(...a)=>o.clear&&o.clear(...a))},"Clear",8,vw)])}var yw=Vo(cw,[["render",_w]]);const mw={name:"App",components:{WpsControl:hw,MapContainer:jC,LayersControl:Xx,DrawingControl:yw},data:()=>mf(Hs({},D_),{baselayers:new Wn({name:"baselayer"}),overlays:new Wn({name:"overlay"}),controls:Rd()}),created(){this.interactions=new Proxy(qd(),{})},mounted(){this.controls.extend([new F0({source:document.querySelector(this.fullscreenElement)})]),this.interactions.extend([new ST])}},Tw={id:"app"};function Ew(r,e,t,n,i,o){const a=qs("LayersControl"),l=qs("WpsControl"),u=qs("MapContainer");return De(),Ge("main",Tw,[te("aside",null,[dn(a,{mapTypeId:r.mapTypeId,mapTypes:r.mapTypes,layerGroup:r.baselayers},null,8,["mapTypeId","mapTypes","layerGroup"]),dn(l,{mapTypeId:r.mapTypeId,mapTypes:r.mapTypes,layerGroup:r.baselayers},null,8,["mapTypeId","mapTypes","layerGroup"])]),dn(u,{center:r.center,zoom:r.zoom,baselayers:r.baselayers,overlays:r.overlays,controls:r.controls,interactions:r.interactions},null,8,["center","zoom","baselayers","overlays","controls","interactions"])])}var Cw=Vo(mw,[["render",Ew]]);const xw=b_(Cw);xw.mount("#app");
